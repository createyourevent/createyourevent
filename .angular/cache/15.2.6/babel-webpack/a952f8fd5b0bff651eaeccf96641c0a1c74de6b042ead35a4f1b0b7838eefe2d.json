{"ast":null,"code":"import * as i0 from \"@angular/core\";\nimport * as i1 from \"app/general.service\";\nimport * as i2 from \"app/google-geocode.service\";\nimport * as i3 from \"@angular/forms\";\nimport * as i4 from \"../../shared/language/translate.directive\";\nimport * as i5 from \"../../views/boxes/service_slider/service__slider.component\";\nimport * as i6 from \"primeng/knob\";\nexport class DistanceServiceComponent {\n  constructor(generalService, googleGeocoderService) {\n    this.generalService = generalService;\n    this.googleGeocoderService = googleGeocoderService;\n    this.servicesWithDistance = [];\n    this.distance = 0;\n  }\n  ngOnInit() {\n    this.generalService.findWidthAuthorities().subscribe(u => {\n      this.user = u.body;\n    });\n  }\n  changeSliderRadius(e) {\n    console.log(e);\n    this.servicesWithDistance = [];\n    let latUser = 0;\n    let lngUser = 0;\n    let posUser;\n    const queryParam = this.user.address.replace(' ', '+');\n    this.googleGeocoderService.getFromAddress(queryParam).subscribe(res => {\n      const geocoder = res.body['results'];\n      const geometry = geocoder[0].geometry;\n      latUser = geometry.location.lat;\n      lngUser = geometry.location.lng;\n      posUser = new google.maps.LatLng(latUser, lngUser);\n      this.generalService.getServicesWhereActiveAndActiveOwnerTrue().subscribe(services => {\n        this.allServices = services.body;\n        let latService = 0;\n        let lngService = 0;\n        let posService;\n        let i = 0;\n        this.allServices.forEach(element => {\n          i++;\n          const queryParamShop = element.address.replace(' ', '+');\n          this.googleGeocoderService.getFromAddress(queryParamShop).subscribe(resShop => {\n            const geocoderShop = resShop.body['results'];\n            const geometryShop = geocoderShop[0].geometry;\n            latService = geometryShop.location.lat;\n            lngService = geometryShop.location.lng;\n            posService = new google.maps.LatLng(latService, lngService);\n            const distance = google.maps.geometry.spherical.computeDistanceBetween(posUser, posService);\n            const maxDistance = this.distance * 1000;\n            if (maxDistance > distance) {\n              this.servicesWithDistance.push(element);\n            }\n            if (i === this.allServices.length) {\n              this.servicesWithDistance = [].concat(this.servicesWithDistance);\n            }\n          });\n        });\n      });\n    });\n  }\n}\nDistanceServiceComponent.ɵfac = function DistanceServiceComponent_Factory(t) {\n  return new (t || DistanceServiceComponent)(i0.ɵɵdirectiveInject(i1.GeneralService), i0.ɵɵdirectiveInject(i2.GoogleGeocodeService));\n};\nDistanceServiceComponent.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n  type: DistanceServiceComponent,\n  selectors: [[\"jhi-distance-service\"]],\n  decls: 29,\n  vars: 8,\n  consts: [[1, \"container-fluid\"], [1, \"row\"], [1, \"col-md-4\"], [\"jhiTranslate\", \"distance.distance\"], [1, \"slider\", 3, \"ngModel\", \"step\", \"ngModelChange\", \"onChange\"], [1, \"col-md-12\"], [\"orientation\", \"horizontal\", \"verticalViewPortHeight\", \"600\", 3, \"numVisible\", \"numScroll\", \"circular\", \"autoplayInterval\", \"services\"]],\n  template: function DistanceServiceComponent_Template(rf, ctx) {\n    if (rf & 1) {\n      i0.ɵɵelementStart(0, \"div\", 0);\n      i0.ɵɵtext(1, \"\\n\\t\");\n      i0.ɵɵelementStart(2, \"div\", 1);\n      i0.ɵɵtext(3, \"\\n\\t\\t\");\n      i0.ɵɵelementStart(4, \"div\", 2);\n      i0.ɵɵtext(5, \"\\n\\t\\t\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵtext(6, \"\\n\\t\\t\");\n      i0.ɵɵelementStart(7, \"div\", 2);\n      i0.ɵɵtext(8, \"\\n            \");\n      i0.ɵɵelementStart(9, \"h5\");\n      i0.ɵɵelement(10, \"span\", 3);\n      i0.ɵɵtext(11);\n      i0.ɵɵelementEnd();\n      i0.ɵɵtext(12, \"\\n            \");\n      i0.ɵɵelementStart(13, \"p-knob\", 4);\n      i0.ɵɵlistener(\"ngModelChange\", function DistanceServiceComponent_Template_p_knob_ngModelChange_13_listener($event) {\n        return ctx.distance = $event;\n      })(\"onChange\", function DistanceServiceComponent_Template_p_knob_onChange_13_listener($event) {\n        return ctx.changeSliderRadius($event);\n      });\n      i0.ɵɵelementEnd();\n      i0.ɵɵtext(14, \"\\n        \");\n      i0.ɵɵelementEnd();\n      i0.ɵɵtext(15, \"\\n        \");\n      i0.ɵɵelementStart(16, \"div\", 2);\n      i0.ɵɵtext(17, \"\\n\\t\\t\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵtext(18, \"\\n\\t\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵtext(19, \"\\n\\t\");\n      i0.ɵɵelementStart(20, \"div\", 1);\n      i0.ɵɵtext(21, \"\\n\\t\\t\");\n      i0.ɵɵelementStart(22, \"div\", 5);\n      i0.ɵɵtext(23, \"\\n            \");\n      i0.ɵɵelement(24, \"jhi-service-slider\", 6);\n      i0.ɵɵtext(25, \"\\n\\t\\t\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵtext(26, \"\\n\\t\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵtext(27, \"\\n\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵtext(28, \"\\n\\n\\n\\n\\n\\n\");\n    }\n    if (rf & 2) {\n      i0.ɵɵadvance(11);\n      i0.ɵɵtextInterpolate1(\"\", ctx.distance, \" Km\");\n      i0.ɵɵadvance(2);\n      i0.ɵɵproperty(\"ngModel\", ctx.distance)(\"step\", 5);\n      i0.ɵɵadvance(11);\n      i0.ɵɵproperty(\"numVisible\", 4)(\"numScroll\", 1)(\"circular\", true)(\"autoplayInterval\", 3000)(\"services\", ctx.servicesWithDistance);\n    }\n  },\n  dependencies: [i3.NgControlStatus, i3.NgModel, i4.TranslateDirective, i5.ServiceSliderComponent, i6.Knob],\n  styles: [\".slider[_ngcontent-%COMP%] {\\n  width: 250px;\\n  margin: 25px;\\n}\\n/*# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8uL3NyYy9tYWluL3dlYmFwcC9hcHAvbWFwL2Rpc3RhbmNlLXNlcnZpY2UvZGlzdGFuY2Utc2VydmljZS5jb21wb25lbnQuc2NzcyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQTtFQUNFLFlBQUE7RUFDQSxZQUFBO0FBQ0YiLCJzb3VyY2VzQ29udGVudCI6WyIuc2xpZGVyIHtcbiAgd2lkdGg6IDI1MHB4O1xuICBtYXJnaW46IDI1cHg7XG59XG4iXSwic291cmNlUm9vdCI6IiJ9 */\"]\n});","map":{"version":3,"mappings":"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","names":["DistanceServiceComponent","constructor","generalService","googleGeocoderService","ngOnInit","findWidthAuthorities","subscribe","u","user","body","changeSliderRadius","e","console","log","servicesWithDistance","latUser","lngUser","posUser","queryParam","address","replace","getFromAddress","res","geocoder","geometry","location","lat","lng","google","maps","LatLng","getServicesWhereActiveAndActiveOwnerTrue","services","allServices","latService","lngService","posService","i","forEach","element","queryParamShop","resShop","geocoderShop","geometryShop","distance","spherical","computeDistanceBetween","maxDistance","push","length","concat","selectors","decls","vars","consts","template","i0","ctx"],"sourceRoot":"","sources":["/home/ceo/mmmm/createyourevent/src/main/webapp/app/map/distance-service/distance-service.component.ts","/home/ceo/mmmm/createyourevent/src/main/webapp/app/map/distance-service/distance-service.component.html"],"sourcesContent":["import { Component, OnInit } from \"@angular/core\";\nimport { ICreateYourEventService } from \"app/entities/create-your-event-service/create-your-event-service.model\";\nimport { IShop } from \"app/entities/shop/shop.model\";\nimport { IUser } from \"app/entities/user/user.model\";\nimport { GeneralService } from \"app/general.service\";\nimport { GoogleGeocodeService } from \"app/google-geocode.service\";\n\n\n@Component({\n  selector: 'jhi-distance-service',\n  templateUrl: './distance-service.component.html',\n  styleUrls: ['distance-service.component.scss']\n})\nexport class DistanceServiceComponent implements OnInit {\n  user!: IUser;\n  allServices!: ICreateYourEventService[];\n  servicesWithDistance: IShop[] = [];\n  distance = 0;\n\n  constructor(private generalService: GeneralService, private googleGeocoderService: GoogleGeocodeService) {}\n\n  ngOnInit(): void {\n    this.generalService.findWidthAuthorities().subscribe(u => {\n      this.user = u.body!;\n    });\n  }\n\n  changeSliderRadius(e: any): void {\n    console.log(e);\n    this.servicesWithDistance = [];\n    let latUser = 0;\n    let lngUser = 0;\n    let posUser: google.maps.LatLng;\n    const queryParam = this.user.address!.replace(' ', '+');\n    this.googleGeocoderService.getFromAddress(queryParam).subscribe((res: any) => {\n      const geocoder = res.body!['results'];\n      const geometry = geocoder[0].geometry;\n      latUser = geometry.location.lat;\n      lngUser = geometry.location.lng;\n      posUser = new google.maps.LatLng(latUser, lngUser);\n\n      this.generalService.getServicesWhereActiveAndActiveOwnerTrue().subscribe(services => {\n        this.allServices = services.body!;\n        let latService = 0;\n        let lngService = 0;\n        let posService: google.maps.LatLng;\n        let i = 0;\n        this.allServices.forEach(element => {\n          i++;\n          const queryParamShop = element.address!.replace(' ', '+');\n          this.googleGeocoderService.getFromAddress(queryParamShop).subscribe((resShop: any) => {\n            const geocoderShop = resShop.body!['results'];\n            const geometryShop = geocoderShop[0].geometry;\n            latService = geometryShop.location.lat;\n            lngService = geometryShop.location.lng;\n            posService = new google.maps.LatLng(latService, lngService);\n\n            const distance = google.maps.geometry.spherical.computeDistanceBetween(posUser, posService);\n            const maxDistance = this.distance * 1000;\n            if (maxDistance > distance) {\n              this.servicesWithDistance.push(element);\n            }\n            if(i === this.allServices.length) {\n              this.servicesWithDistance = [].concat(this.servicesWithDistance);\n            }\n          });\n        });\n      });\n    });\n  }\n}\n","<div class=\"container-fluid\">\n\t<div class=\"row\">\n\t\t<div class=\"col-md-4\">\n\t\t</div>\n\t\t<div class=\"col-md-4\">\n            <h5><span jhiTranslate=\"distance.distance\"></span>{{ distance }} Km</h5>\n            <p-knob [(ngModel)]=\"distance\" [step]=\"5\" (onChange)=\"changeSliderRadius($event)\" class=\"slider\"></p-knob>\n        </div>\n        <div class=\"col-md-4\">\n\t\t</div>\n\t</div>\n\t<div class=\"row\">\n\t\t<div class=\"col-md-12\">\n            <jhi-service-slider orientation=\"horizontal\" [numVisible]=\"4\" [numScroll]=\"1\" [circular]=\"true\" verticalViewPortHeight=\"600\" [autoplayInterval]=\"3000\" [services]=\"servicesWithDistance\"></jhi-service-slider>\n\t\t</div>\n\t</div>\n</div>\n\n\n\n\n\n"]},"metadata":{},"sourceType":"module","externalDependencies":[]}