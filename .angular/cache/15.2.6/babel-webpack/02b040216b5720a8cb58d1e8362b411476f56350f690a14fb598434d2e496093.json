{"ast":null,"code":"import { GuestReservationDeleteDialogComponent } from \"./guest-reservation-delete-dialog.component\";\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"app/views/event/event.service\";\nimport * as i2 from \"../organisator.service\";\nimport * as i3 from \"@angular/router\";\nimport * as i4 from \"app/entities/event/service/event.service\";\nimport * as i5 from \"app/entities/reservation/service/reservation.service\";\nimport * as i6 from \"ng-jhipster\";\nimport * as i7 from \"@ng-bootstrap/ng-bootstrap\";\nimport * as i8 from \"app/general.service\";\nimport * as i9 from \"../../views/reservation-counter/reservation-counter.component\";\nimport * as i10 from \"@angular/common\";\nimport * as i11 from \"@fortawesome/angular-fontawesome\";\nimport * as i12 from \"../../shared/language/translate.directive\";\nimport * as i13 from \"@angular/material/card\";\nconst _c0 = function (a1) {\n  return [\"/organisator/guest-reservation\", a1, \"view\"];\n};\nfunction GuestReservationComponent_div_18_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r3 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"div\", 21);\n    i0.ɵɵtext(1, \"\\n                \");\n    i0.ɵɵelementStart(2, \"mat-card\", 22);\n    i0.ɵɵtext(3, \"\\n                    \");\n    i0.ɵɵelementStart(4, \"mat-card-header\");\n    i0.ɵɵtext(5, \"\\n                    \");\n    i0.ɵɵelementStart(6, \"mat-card-title\");\n    i0.ɵɵtext(7);\n    i0.ɵɵelementEnd();\n    i0.ɵɵtext(8, \"\\n                    \");\n    i0.ɵɵelementEnd();\n    i0.ɵɵtext(9, \"\\n\\n                    \");\n    i0.ɵɵelementStart(10, \"mat-card-content\");\n    i0.ɵɵtext(11, \"\\n                        \");\n    i0.ɵɵelementStart(12, \"dl\", 10);\n    i0.ɵɵtext(13, \"\\n                            \");\n    i0.ɵɵelementStart(14, \"dt\")(15, \"span\", 23);\n    i0.ɵɵtext(16, \"Firstname\");\n    i0.ɵɵelementEnd()();\n    i0.ɵɵtext(17, \"\\n                            \");\n    i0.ɵɵelementStart(18, \"dd\");\n    i0.ɵɵtext(19, \"\\n                                \");\n    i0.ɵɵelementStart(20, \"span\");\n    i0.ɵɵtext(21);\n    i0.ɵɵelementEnd();\n    i0.ɵɵtext(22, \"\\n                            \");\n    i0.ɵɵelementEnd();\n    i0.ɵɵtext(23, \"\\n                            \");\n    i0.ɵɵelementStart(24, \"dt\")(25, \"span\", 24);\n    i0.ɵɵtext(26, \"Lastname\");\n    i0.ɵɵelementEnd()();\n    i0.ɵɵtext(27, \"\\n                            \");\n    i0.ɵɵelementStart(28, \"dd\");\n    i0.ɵɵtext(29, \"\\n                                \");\n    i0.ɵɵelementStart(30, \"span\");\n    i0.ɵɵtext(31);\n    i0.ɵɵelementEnd();\n    i0.ɵɵtext(32, \"\\n                            \");\n    i0.ɵɵelementEnd();\n    i0.ɵɵtext(33, \"\\n                            \");\n    i0.ɵɵelementStart(34, \"dt\")(35, \"span\", 25);\n    i0.ɵɵtext(36, \"Email\");\n    i0.ɵɵelementEnd()();\n    i0.ɵɵtext(37, \"\\n                            \");\n    i0.ɵɵelementStart(38, \"dd\");\n    i0.ɵɵtext(39, \"\\n                                \");\n    i0.ɵɵelementStart(40, \"span\");\n    i0.ɵɵtext(41);\n    i0.ɵɵelementEnd();\n    i0.ɵɵtext(42, \"\\n                            \");\n    i0.ɵɵelementEnd();\n    i0.ɵɵtext(43, \"\\n                            \");\n    i0.ɵɵelementStart(44, \"dt\")(45, \"span\", 26);\n    i0.ɵɵtext(46, \"Tickets\");\n    i0.ɵɵelementEnd()();\n    i0.ɵɵtext(47, \"\\n                            \");\n    i0.ɵɵelementStart(48, \"dd\");\n    i0.ɵɵtext(49, \"\\n                                \");\n    i0.ɵɵelementStart(50, \"span\");\n    i0.ɵɵtext(51);\n    i0.ɵɵelementEnd();\n    i0.ɵɵtext(52, \"\\n                            \");\n    i0.ɵɵelementEnd();\n    i0.ɵɵtext(53, \"\\n                        \");\n    i0.ɵɵelementEnd();\n    i0.ɵɵtext(54, \"\\n                    \");\n    i0.ɵɵelementEnd();\n    i0.ɵɵtext(55, \"\\n                    \");\n    i0.ɵɵelementStart(56, \"mat-card-actions\");\n    i0.ɵɵtext(57, \"\\n                        \");\n    i0.ɵɵelementStart(58, \"button\", 27);\n    i0.ɵɵtext(59, \"\\n                            \");\n    i0.ɵɵelement(60, \"fa-icon\", 28);\n    i0.ɵɵtext(61, \"\\n                            \");\n    i0.ɵɵelementStart(62, \"span\", 29);\n    i0.ɵɵtext(63, \"\\n                            View this reservation\\n                            \");\n    i0.ɵɵelementEnd();\n    i0.ɵɵtext(64, \"\\n                        \");\n    i0.ɵɵelementEnd();\n    i0.ɵɵtext(65, \"\\n                        \");\n    i0.ɵɵelementStart(66, \"button\", 30);\n    i0.ɵɵlistener(\"click\", function GuestReservationComponent_div_18_Template_button_click_66_listener() {\n      const restoredCtx = i0.ɵɵrestoreView(_r3);\n      const reservation_r1 = restoredCtx.$implicit;\n      const ctx_r2 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r2.delete(reservation_r1));\n    });\n    i0.ɵɵtext(67, \"\\n                            \");\n    i0.ɵɵelement(68, \"fa-icon\", 31);\n    i0.ɵɵtext(69, \"\\n                            \");\n    i0.ɵɵelementStart(70, \"span\", 32);\n    i0.ɵɵtext(71, \"Delete\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵtext(72, \"\\n                        \");\n    i0.ɵɵelementEnd();\n    i0.ɵɵtext(73, \"\\n                    \");\n    i0.ɵɵelementEnd();\n    i0.ɵɵtext(74, \"\\n              \");\n    i0.ɵɵelementEnd();\n    i0.ɵɵtext(75, \"\\n            \");\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const reservation_r1 = ctx.$implicit;\n    i0.ɵɵadvance(7);\n    i0.ɵɵtextInterpolate1(\"Reservation: \", reservation_r1.id, \"\");\n    i0.ɵɵadvance(14);\n    i0.ɵɵtextInterpolate1(\"\", reservation_r1.user.firstName, \" \");\n    i0.ɵɵadvance(10);\n    i0.ɵɵtextInterpolate(reservation_r1.user.lastName);\n    i0.ɵɵadvance(10);\n    i0.ɵɵtextInterpolate(reservation_r1.user.email);\n    i0.ɵɵadvance(10);\n    i0.ɵɵtextInterpolate2(\"\", reservation_r1.ticket.ticketsUsed, \" / \", reservation_r1.ticket.amount, \"\");\n    i0.ɵɵadvance(7);\n    i0.ɵɵproperty(\"routerLink\", i0.ɵɵpureFunction1(7, _c0, reservation_r1.id));\n  }\n}\nexport class GuestReservationComponent {\n  constructor(eventUserService, organisatorService, route, eventService, reservationService, activatedRoute, router, eventManager, modalService, generalService) {\n    this.eventUserService = eventUserService;\n    this.organisatorService = organisatorService;\n    this.route = route;\n    this.eventService = eventService;\n    this.reservationService = reservationService;\n    this.activatedRoute = activatedRoute;\n    this.router = router;\n    this.eventManager = eventManager;\n    this.modalService = modalService;\n    this.generalService = generalService;\n    this.totalEntranceFee = 0;\n    this.totalCost = 0;\n    this.profit = 0;\n    this.numberReservations = 0;\n    this.maximumReservations = 0;\n    this.previousEarnings = 0;\n    this.minimumReservations = 0;\n    this.tickets = 0;\n  }\n  delete(reservation) {\n    const modalRef = this.modalService.open(GuestReservationDeleteDialogComponent, {\n      size: 'lg',\n      backdrop: 'static'\n    });\n    modalRef.componentInstance.reservation = reservation;\n  }\n  previousState() {\n    window.history.back();\n  }\n  ngOnInit() {\n    let eventId;\n    this.route.params.subscribe(params => {\n      eventId = params['eventId'];\n      this.eventUserService.findEvent(eventId).subscribe(event => {\n        this.event = event.body;\n        this.generalService.findWidthAuthorities().subscribe(user => {\n          this.user = user.body;\n          this.organisatorService.findReservationsByEventId(this.event.id).subscribe(res => {\n            this.reservations = res.body;\n            this.reservations.forEach(r => {\n              this.tickets += r.ticket.amount;\n            });\n            this.numberReservations = this.reservations.length;\n            this.maximumReservations = this.event.placenumber;\n            this.minimumReservations = this.event.minPlacenumber;\n            this.previousEarnings = this.event.price * this.numberReservations;\n            this.eventUserService.getProductsWithEventId(this.event.id).subscribe(epo => {\n              epo.body?.forEach(eventProductOrder => {\n                this.totalCost += eventProductOrder.total;\n              });\n              this.totalEntranceFee += this.event.placenumber * this.event.price;\n              this.profit = this.totalEntranceFee - this.totalCost;\n            });\n          });\n        });\n      });\n    });\n  }\n  ngOnDestroy() {}\n}\nGuestReservationComponent.ɵfac = function GuestReservationComponent_Factory(t) {\n  return new (t || GuestReservationComponent)(i0.ɵɵdirectiveInject(i1.EventService), i0.ɵɵdirectiveInject(i2.OrganisatorService), i0.ɵɵdirectiveInject(i3.ActivatedRoute), i0.ɵɵdirectiveInject(i4.EventService), i0.ɵɵdirectiveInject(i5.ReservationService), i0.ɵɵdirectiveInject(i3.ActivatedRoute), i0.ɵɵdirectiveInject(i3.Router), i0.ɵɵdirectiveInject(i6.JhiEventManager), i0.ɵɵdirectiveInject(i7.NgbModal), i0.ɵɵdirectiveInject(i8.GeneralService));\n};\nGuestReservationComponent.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n  type: GuestReservationComponent,\n  selectors: [[\"jhi-guest-reservation\"]],\n  decls: 130,\n  vars: 20,\n  consts: [[1, \"container-fluid\"], [1, \"row\"], [1, \"col-md-12\"], [\"jhiTranslate\", \"guest-reservation.title-event\"], [\"jhiTranslate\", \"guest-reservation.info\"], [\"class\", \"cards\", 4, \"ngFor\", \"ngForOf\"], [1, \"title-box\"], [\"jhiTranslate\", \"event-detail.calculation\"], [1, \"box\"], [1, \"col-md-6\"], [1, \"row-md\", \"jh-entity-details\"], [\"jhiTranslate\", \"event-detail.placenumber\"], [\"jhiTranslate\", \"event-detail.price\"], [\"jhiTranslate\", \"event-detail.total-entrance-fee\"], [\"jhiTranslate\", \"event-detail.total-cost\"], [\"jhiTranslate\", \"event-detail.earnings-entrance-fee\"], [3, \"minimumReservations\", \"tickets\", \"numberReservations\", \"maximumReservations\", \"previousEarnings\"], [1, \"btn-cancel\"], [\"type\", \"button\", \"id\", \"cancel-save\", 1, \"btn\", \"btn-secondary\", \"btn-cancel\", 3, \"click\"], [\"icon\", \"ban\"], [\"jhiTranslate\", \"entity.action.cancel\"], [1, \"cards\"], [1, \"reservation-card\"], [\"jhiTranslate\", \"guest-reservation.firstname\"], [\"jhiTranslate\", \"guest-reservation.lastname\"], [\"jhiTranslate\", \"guest-reservation.email\"], [\"jhiTranslate\", \"guest-reservation.tickets\"], [\"id\", \"view-reservation\", 1, \"btn\", \"btn-primary\", 3, \"routerLink\"], [\"icon\", \"plus\"], [\"jhiTranslate\", \"guest-reservation.view\"], [\"type\", \"submit\", 1, \"btn\", \"btn-danger\", \"btn-sm\", 3, \"click\"], [\"icon\", \"times\"], [\"jhiTranslate\", \"guest-reservation.delete\", 1, \"d-none\", \"d-md-inline\"]],\n  template: function GuestReservationComponent_Template(rf, ctx) {\n    if (rf & 1) {\n      i0.ɵɵelementStart(0, \"div\", 0);\n      i0.ɵɵtext(1, \"\\n\\t\");\n      i0.ɵɵelementStart(2, \"div\", 1);\n      i0.ɵɵtext(3, \"\\n\\t\\t\");\n      i0.ɵɵelementStart(4, \"div\", 2);\n      i0.ɵɵtext(5, \"\\n            \");\n      i0.ɵɵelementStart(6, \"h5\");\n      i0.ɵɵelement(7, \"span\", 3);\n      i0.ɵɵtext(8);\n      i0.ɵɵelementEnd();\n      i0.ɵɵtext(9, \"\\n            \");\n      i0.ɵɵelementStart(10, \"p\");\n      i0.ɵɵtext(11, \"\\n                \");\n      i0.ɵɵelementStart(12, \"span\", 4);\n      i0.ɵɵtext(13, \"Info\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵtext(14, \"\\n            \");\n      i0.ɵɵelementEnd();\n      i0.ɵɵtext(15, \"\\n            \");\n      i0.ɵɵelement(16, \"hr\");\n      i0.ɵɵtext(17, \"\\n            \");\n      i0.ɵɵtemplate(18, GuestReservationComponent_div_18_Template, 76, 9, \"div\", 5);\n      i0.ɵɵtext(19, \"\\n\\t  \");\n      i0.ɵɵelementEnd();\n      i0.ɵɵtext(20, \"\\n    \");\n      i0.ɵɵelementEnd();\n      i0.ɵɵtext(21, \"\\n    \");\n      i0.ɵɵelementStart(22, \"div\", 1);\n      i0.ɵɵtext(23, \"\\n\\t\\t\");\n      i0.ɵɵelementStart(24, \"div\", 2);\n      i0.ɵɵtext(25, \"\\n            \");\n      i0.ɵɵelement(26, \"hr\");\n      i0.ɵɵtext(27, \"\\n            \");\n      i0.ɵɵelementStart(28, \"div\", 6);\n      i0.ɵɵtext(29, \"\\n                \");\n      i0.ɵɵelementStart(30, \"h5\")(31, \"span\", 7);\n      i0.ɵɵtext(32, \"Calculation\");\n      i0.ɵɵelementEnd()();\n      i0.ɵɵtext(33, \"\\n            \");\n      i0.ɵɵelementEnd();\n      i0.ɵɵtext(34, \"\\n            \");\n      i0.ɵɵelementStart(35, \"div\", 8);\n      i0.ɵɵtext(36, \"\\n              \");\n      i0.ɵɵelementStart(37, \"div\", 1);\n      i0.ɵɵtext(38, \"\\n                \");\n      i0.ɵɵelementStart(39, \"div\", 9);\n      i0.ɵɵtext(40, \"\\n                    \");\n      i0.ɵɵelementStart(41, \"dl\", 10);\n      i0.ɵɵtext(42, \"\\n                    \");\n      i0.ɵɵelementStart(43, \"dt\")(44, \"span\", 11);\n      i0.ɵɵtext(45, \"Placenumber\");\n      i0.ɵɵelementEnd()();\n      i0.ɵɵtext(46, \"\\n                    \");\n      i0.ɵɵelementStart(47, \"dd\");\n      i0.ɵɵtext(48, \"\\n                        \");\n      i0.ɵɵelementStart(49, \"span\");\n      i0.ɵɵtext(50);\n      i0.ɵɵelementEnd();\n      i0.ɵɵtext(51, \"\\n                    \");\n      i0.ɵɵelementEnd();\n      i0.ɵɵtext(52, \"\\n                    \");\n      i0.ɵɵelementStart(53, \"dt\")(54, \"span\", 12);\n      i0.ɵɵtext(55, \"Price\");\n      i0.ɵɵelementEnd()();\n      i0.ɵɵtext(56, \"\\n                    \");\n      i0.ɵɵelementStart(57, \"dd\");\n      i0.ɵɵtext(58, \"\\n                        \");\n      i0.ɵɵelementStart(59, \"span\");\n      i0.ɵɵtext(60);\n      i0.ɵɵpipe(61, \"currency\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵtext(62, \"\\n                    \");\n      i0.ɵɵelementEnd();\n      i0.ɵɵtext(63, \"\\n                    \");\n      i0.ɵɵelementStart(64, \"dt\")(65, \"span\", 13);\n      i0.ɵɵtext(66, \"Total entrance fee\");\n      i0.ɵɵelementEnd()();\n      i0.ɵɵtext(67, \"\\n                    \");\n      i0.ɵɵelementStart(68, \"dd\");\n      i0.ɵɵtext(69, \"\\n                        \");\n      i0.ɵɵelementStart(70, \"span\");\n      i0.ɵɵtext(71);\n      i0.ɵɵpipe(72, \"currency\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵtext(73, \"\\n                    \");\n      i0.ɵɵelementEnd();\n      i0.ɵɵtext(74, \"\\n                    \");\n      i0.ɵɵelementStart(75, \"dt\")(76, \"span\", 14);\n      i0.ɵɵtext(77, \"Total cost's\");\n      i0.ɵɵelementEnd()();\n      i0.ɵɵtext(78, \"\\n                    \");\n      i0.ɵɵelementStart(79, \"dd\");\n      i0.ɵɵtext(80, \"\\n                        \");\n      i0.ɵɵelementStart(81, \"span\");\n      i0.ɵɵtext(82);\n      i0.ɵɵpipe(83, \"currency\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵtext(84, \"\\n                    \");\n      i0.ɵɵelementEnd();\n      i0.ɵɵtext(85, \"\\n                    \");\n      i0.ɵɵelementStart(86, \"dt\");\n      i0.ɵɵelement(87, \"span\", 15);\n      i0.ɵɵelementEnd();\n      i0.ɵɵtext(88, \"\\n                    \");\n      i0.ɵɵelementStart(89, \"dd\");\n      i0.ɵɵtext(90, \"\\n                        \");\n      i0.ɵɵelementStart(91, \"span\");\n      i0.ɵɵtext(92);\n      i0.ɵɵpipe(93, \"currency\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵtext(94, \"\\n                    \");\n      i0.ɵɵelementEnd();\n      i0.ɵɵtext(95, \"\\n                \");\n      i0.ɵɵelementEnd();\n      i0.ɵɵtext(96, \"\\n                \");\n      i0.ɵɵelementEnd();\n      i0.ɵɵtext(97, \"\\n                \");\n      i0.ɵɵelementStart(98, \"div\", 9);\n      i0.ɵɵtext(99, \"\\n                    \");\n      i0.ɵɵelement(100, \"jhi-reservation-counter\", 16);\n      i0.ɵɵtext(101, \"\\n                \");\n      i0.ɵɵelementEnd();\n      i0.ɵɵtext(102, \"\\n            \");\n      i0.ɵɵelementEnd();\n      i0.ɵɵtext(103, \"\\n        \");\n      i0.ɵɵelementEnd();\n      i0.ɵɵtext(104, \"\\n            \");\n      i0.ɵɵelement(105, \"hr\");\n      i0.ɵɵtext(106, \"\\n            \");\n      i0.ɵɵelementStart(107, \"div\", 17);\n      i0.ɵɵtext(108, \"\\n                \");\n      i0.ɵɵelementStart(109, \"button\", 18);\n      i0.ɵɵlistener(\"click\", function GuestReservationComponent_Template_button_click_109_listener() {\n        return ctx.previousState();\n      });\n      i0.ɵɵtext(110, \"\\n                  \");\n      i0.ɵɵelement(111, \"fa-icon\", 19);\n      i0.ɵɵtext(112, \"\\u00A0\");\n      i0.ɵɵelementStart(113, \"span\", 20);\n      i0.ɵɵtext(114, \"Cancel\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵtext(115, \"\\n              \");\n      i0.ɵɵelementEnd();\n      i0.ɵɵtext(116, \"\\n            \");\n      i0.ɵɵelementEnd();\n      i0.ɵɵtext(117, \"\\n\\t\\t\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵtext(118, \"\\n\\t\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵtext(119, \"\\n\\t\");\n      i0.ɵɵelementStart(120, \"div\", 1);\n      i0.ɵɵtext(121, \"\\n\\t\\t\");\n      i0.ɵɵelementStart(122, \"div\", 9);\n      i0.ɵɵtext(123, \"\\n\\t\\t\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵtext(124, \"\\n\\t\\t\");\n      i0.ɵɵelementStart(125, \"div\", 9);\n      i0.ɵɵtext(126, \"\\n\\t\\t\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵtext(127, \"\\n\\t\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵtext(128, \"\\n\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵtext(129, \"\\n\");\n    }\n    if (rf & 2) {\n      i0.ɵɵadvance(8);\n      i0.ɵɵtextInterpolate(ctx.event.name);\n      i0.ɵɵadvance(10);\n      i0.ɵɵproperty(\"ngForOf\", ctx.reservations);\n      i0.ɵɵadvance(32);\n      i0.ɵɵtextInterpolate(ctx.event.placenumber);\n      i0.ɵɵadvance(10);\n      i0.ɵɵtextInterpolate(i0.ɵɵpipeBind1(61, 12, ctx.event.price));\n      i0.ɵɵadvance(11);\n      i0.ɵɵtextInterpolate(i0.ɵɵpipeBind1(72, 14, ctx.totalEntranceFee));\n      i0.ɵɵadvance(11);\n      i0.ɵɵtextInterpolate(i0.ɵɵpipeBind1(83, 16, ctx.totalCost));\n      i0.ɵɵadvance(10);\n      i0.ɵɵtextInterpolate(i0.ɵɵpipeBind1(93, 18, ctx.profit));\n      i0.ɵɵadvance(8);\n      i0.ɵɵproperty(\"minimumReservations\", ctx.minimumReservations)(\"tickets\", ctx.tickets)(\"numberReservations\", ctx.numberReservations)(\"maximumReservations\", ctx.maximumReservations)(\"previousEarnings\", ctx.previousEarnings);\n    }\n  },\n  dependencies: [i9.ReservationCounterComponent, i10.NgForOf, i11.FaIconComponent, i12.TranslateDirective, i3.RouterLink, i13.MatCard, i13.MatCardHeader, i13.MatCardContent, i13.MatCardTitle, i13.MatCardActions, i10.CurrencyPipe],\n  styles: [\".cards[_ngcontent-%COMP%] {\\n  width: 300px;\\n  float: left;\\n  margin: 10px;\\n}\\n\\n.reservation-card[_ngcontent-%COMP%] {\\n  width: 200px;\\n  min-height: 400px;\\n  margin: 5px;\\n  border: 1px solid;\\n  border-radius: 5px;\\n}\\n\\n.btn[_ngcontent-%COMP%] {\\n  margin: 3px;\\n}\\n\\n.btn-list[_ngcontent-%COMP%] {\\n  float: none;\\n}\\n/*# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8uL3NyYy9tYWluL3dlYmFwcC9hcHAvb3JnYW5pc2F0b3IvZ3Vlc3QtcmVzZXJ2YXRpb24vZ3Vlc3QtcmVzZXJ2YXRpb24uc2NzcyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQTtFQUNFLFlBQUE7RUFDQSxXQUFBO0VBQ0EsWUFBQTtBQUNGOztBQUVBO0VBQ0UsWUFBQTtFQUNBLGlCQUFBO0VBQ0EsV0FBQTtFQUNBLGlCQUFBO0VBQ0Esa0JBQUE7QUFDRjs7QUFFQTtFQUNFLFdBQUE7QUFDRjs7QUFFQTtFQUNFLFdBQUE7QUFDRiIsInNvdXJjZXNDb250ZW50IjpbIi5jYXJkcyB7XG4gIHdpZHRoOiAzMDBweDtcbiAgZmxvYXQ6IGxlZnQ7XG4gIG1hcmdpbjogMTBweDtcbn1cblxuLnJlc2VydmF0aW9uLWNhcmQge1xuICB3aWR0aDogMjAwcHg7XG4gIG1pbi1oZWlnaHQ6IDQwMHB4O1xuICBtYXJnaW46IDVweDtcbiAgYm9yZGVyOiAxcHggc29saWQ7XG4gIGJvcmRlci1yYWRpdXM6IDVweDtcbn1cblxuLmJ0biB7XG4gIG1hcmdpbjogM3B4O1xufVxuXG4uYnRuLWxpc3Qge1xuICBmbG9hdDogbm9uZTtcbn1cblxuIl0sInNvdXJjZVJvb3QiOiIifQ== */\"]\n});","map":{"version":3,"mappings":"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","names":["GuestReservationDeleteDialogComponent","i0","GuestReservationComponent","constructor","eventUserService","organisatorService","route","eventService","reservationService","activatedRoute","router","eventManager","modalService","generalService","delete","reservation","modalRef","open","size","backdrop","componentInstance","previousState","window","history","back","ngOnInit","eventId","params","subscribe","findEvent","event","body","findWidthAuthorities","user","findReservationsByEventId","id","res","reservations","forEach","r","tickets","ticket","amount","numberReservations","length","maximumReservations","placenumber","minimumReservations","minPlacenumber","previousEarnings","price","getProductsWithEventId","epo","eventProductOrder","totalCost","total","totalEntranceFee","profit","ngOnDestroy","selectors","decls","vars","consts","template","ctx"],"sourceRoot":"","sources":["/home/ceo/mmmm/createyourevent/src/main/webapp/app/organisator/guest-reservation/guest-reservation.component.ts","/home/ceo/mmmm/createyourevent/src/main/webapp/app/organisator/guest-reservation/guest-reservation.component.html"],"sourcesContent":["import { GeneralService } from 'app/general.service';\nimport { Component, OnInit, OnDestroy } from \"@angular/core\";\nimport { ActivatedRoute, Router } from \"@angular/router\";\nimport { NgbModal } from \"@ng-bootstrap/ng-bootstrap\";\nimport { IEvent } from \"app/entities/event/event.model\";\nimport { EventService } from \"app/entities/event/service/event.service\";\nimport { IReservation } from \"app/entities/reservation/reservation.model\";\nimport { ReservationService } from \"app/entities/reservation/service/reservation.service\";\nimport { IUser } from \"app/entities/user/user.model\";\nimport { EventService as EventUserService } from \"app/views/event/event.service\";\nimport { JhiEventManager } from \"ng-jhipster\";\nimport { OrganisatorService } from \"../organisator.service\";\nimport { GuestReservationDeleteDialogComponent } from \"./guest-reservation-delete-dialog.component\";\n\n\n@Component({\n  selector: 'jhi-guest-reservation',\n  templateUrl: './guest-reservation.component.html',\n  styleUrls: ['guest-reservation.scss']\n})\nexport class GuestReservationComponent implements OnInit, OnDestroy {\n  user!: IUser;\n  reservations!: IReservation[];\n  event!: IEvent;\n  totalEntranceFee = 0;\n  totalCost = 0;\n  profit = 0;\n  numberReservations = 0;\n  maximumReservations = 0;\n  previousEarnings = 0;\n  minimumReservations = 0;\n  tickets = 0;\n\n  constructor(\n    private eventUserService: EventUserService,\n    private organisatorService: OrganisatorService,\n    private route: ActivatedRoute,\n    private eventService: EventService,\n    protected reservationService: ReservationService,\n    protected activatedRoute: ActivatedRoute,\n    protected router: Router,\n    protected eventManager: JhiEventManager,\n    protected modalService: NgbModal,\n    private generalService: GeneralService\n  ) {}\n\n  delete(reservation: IReservation): void {\n    const modalRef = this.modalService.open(GuestReservationDeleteDialogComponent, { size: 'lg', backdrop: 'static' });\n    modalRef.componentInstance.reservation = reservation;\n  }\n\n  previousState(): void {\n    window.history.back();\n  }\n\n  ngOnInit(): void {\n    let eventId: number;\n    this.route.params.subscribe(params => {\n      eventId = params['eventId'];\n\n      this.eventUserService.findEvent(eventId).subscribe(event => {\n        this.event = event.body!;\n\n        this.generalService.findWidthAuthorities().subscribe(user => {\n          this.user = user.body!;\n\n          this.organisatorService.findReservationsByEventId(this.event.id!).subscribe(res => {\n            this.reservations = res.body!;\n            this.reservations.forEach(r => {\n              this.tickets += r.ticket.amount;\n            });\n\n            this.numberReservations = this.reservations.length;\n            this.maximumReservations = this.event.placenumber!;\n            this.minimumReservations = this.event.minPlacenumber;\n            this.previousEarnings = this.event.price! * this.numberReservations;\n\n            this.eventUserService.getProductsWithEventId(this.event.id!).subscribe(epo => {\n              epo.body?.forEach(eventProductOrder => {\n                this.totalCost += eventProductOrder.total!;\n              });\n              this.totalEntranceFee += this.event.placenumber! * this.event.price!;\n              this.profit = this.totalEntranceFee - this.totalCost;\n            });\n          });\n        });\n      });\n    });\n  }\n\n  ngOnDestroy(): void {}\n}\n","<div class=\"container-fluid\">\n\t<div class=\"row\">\n\t\t<div class=\"col-md-12\">\n            <h5><span jhiTranslate=\"guest-reservation.title-event\"></span>{{event.name}}</h5>\n            <p>\n                <span jhiTranslate=\"guest-reservation.info\">Info</span>\n            </p>\n            <hr/>\n            <div class=\"cards\" *ngFor=\"let reservation of reservations\">\n                <mat-card class=\"reservation-card\">\n                    <mat-card-header>\n                    <mat-card-title>Reservation: {{reservation.id}}</mat-card-title>\n                    </mat-card-header>\n\n                    <mat-card-content>\n                        <dl class=\"row-md jh-entity-details\">\n                            <dt><span jhiTranslate=\"guest-reservation.firstname\">Firstname</span></dt>\n                            <dd>\n                                <span>{{reservation.user!.firstName}} </span>\n                            </dd>\n                            <dt><span jhiTranslate=\"guest-reservation.lastname\">Lastname</span></dt>\n                            <dd>\n                                <span>{{reservation.user!.lastName}}</span>\n                            </dd>\n                            <dt><span jhiTranslate=\"guest-reservation.email\">Email</span></dt>\n                            <dd>\n                                <span>{{ reservation.user!.email }}</span>\n                            </dd>\n                            <dt><span jhiTranslate=\"guest-reservation.tickets\">Tickets</span></dt>\n                            <dd>\n                                <span>{{ reservation.ticket.ticketsUsed }} / {{ reservation.ticket.amount }}</span>\n                            </dd>\n                        </dl>\n                    </mat-card-content>\n                    <mat-card-actions>\n                        <button id=\"view-reservation\" class=\"btn btn-primary\" [routerLink]=\"['/organisator/guest-reservation', reservation.id, 'view']\">\n                            <fa-icon icon=\"plus\"></fa-icon>\n                            <span  jhiTranslate=\"guest-reservation.view\">\n                            View this reservation\n                            </span>\n                        </button>\n                        <button type=\"submit\" (click)=\"delete(reservation)\"\n                        class=\"btn btn-danger btn-sm\">\n                            <fa-icon icon=\"times\"></fa-icon>\n                            <span class=\"d-none d-md-inline\" jhiTranslate=\"guest-reservation.delete\">Delete</span>\n                        </button>\n                    </mat-card-actions>\n              </mat-card>\n            </div>\n\t  </div>\n    </div>\n    <div class=\"row\">\n\t\t<div class=\"col-md-12\">\n            <hr/>\n            <div class=\"title-box\">\n                <h5><span jhiTranslate=\"event-detail.calculation\">Calculation</span></h5>\n            </div>\n            <div class=\"box\">\n              <div class=\"row\">\n                <div class=\"col-md-6\">\n                    <dl class=\"row-md jh-entity-details\">\n                    <dt><span jhiTranslate=\"event-detail.placenumber\">Placenumber</span></dt>\n                    <dd>\n                        <span>{{ event.placenumber }}</span>\n                    </dd>\n                    <dt><span jhiTranslate=\"event-detail.price\">Price</span></dt>\n                    <dd>\n                        <span>{{ event.price | currency }}</span>\n                    </dd>\n                    <dt><span jhiTranslate=\"event-detail.total-entrance-fee\">Total entrance fee</span></dt>\n                    <dd>\n                        <span>{{ totalEntranceFee | currency }}</span>\n                    </dd>\n                    <dt><span jhiTranslate=\"event-detail.total-cost\">Total cost's</span></dt>\n                    <dd>\n                        <span>{{ totalCost | currency }}</span>\n                    </dd>\n                    <dt><span jhiTranslate=\"event-detail.earnings-entrance-fee\"></span></dt>\n                    <dd>\n                        <span>{{ profit | currency }}</span>\n                    </dd>\n                </dl>\n                </div>\n                <div class=\"col-md-6\">\n                    <jhi-reservation-counter [minimumReservations]=\"minimumReservations\" [tickets]=\"tickets\" [numberReservations]=\"numberReservations\" [maximumReservations]=\"maximumReservations\" [previousEarnings]=\"previousEarnings\"></jhi-reservation-counter>\n                </div>\n            </div>\n        </div>\n            <hr/>\n            <div class=\"btn-cancel\">\n                <button type=\"button\" id=\"cancel-save\" class=\"btn btn-secondary btn-cancel\" (click)=\"previousState()\">\n                  <fa-icon icon=\"ban\"></fa-icon>&nbsp;<span jhiTranslate=\"entity.action.cancel\">Cancel</span>\n              </button>\n            </div>\n\t\t</div>\n\t</div>\n\t<div class=\"row\">\n\t\t<div class=\"col-md-6\">\n\t\t</div>\n\t\t<div class=\"col-md-6\">\n\t\t</div>\n\t</div>\n</div>\n"]},"metadata":{},"sourceType":"module","externalDependencies":[]}