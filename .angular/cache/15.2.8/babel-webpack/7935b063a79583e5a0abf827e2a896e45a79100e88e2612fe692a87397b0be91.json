{"ast":null,"code":"import _defineProperty from \"/home/ceo/mmmm/createyourevent/node_modules/@babel/runtime/helpers/esm/defineProperty.js\";\nimport * as dayjs from \"dayjs\";\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"app/general.service\";\nimport * as i2 from \"app/organisator/organisator.service\";\nimport * as i3 from \"@angular/router\";\nimport * as i4 from \"app/google-geocode.service\";\nimport * as i5 from \"app/entities/location/service/location.service\";\nimport * as i6 from \"@angular/common\";\nimport * as i7 from \"@angular/forms\";\nimport * as i8 from \"@ng-bootstrap/ng-bootstrap\";\nimport * as i9 from \"../../shared/language/translate.directive\";\nimport * as i10 from \"primeng/dataview\";\nimport * as i11 from \"primeng/api\";\nimport * as i12 from \"primeng/inputtext\";\nimport * as i13 from \"primeng/knob\";\nfunction EventDataViewComponent_ng_template_6_ng_container_17_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r7 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementContainerStart(0);\n    i0.ɵɵtext(1, \"\\n            \");\n    i0.ɵɵelementStart(2, \"div\", 8);\n    i0.ɵɵtext(3, \"\\n              \");\n    i0.ɵɵelementStart(4, \"div\", 16);\n    i0.ɵɵtext(5, \"\\n                \");\n    i0.ɵɵelementStart(6, \"h5\");\n    i0.ɵɵelement(7, \"span\", 17);\n    i0.ɵɵtext(8);\n    i0.ɵɵelementEnd();\n    i0.ɵɵtext(9, \"\\n                \");\n    i0.ɵɵelementStart(10, \"p-knob\", 18);\n    i0.ɵɵlistener(\"ngModelChange\", function EventDataViewComponent_ng_template_6_ng_container_17_Template_p_knob_ngModelChange_10_listener($event) {\n      i0.ɵɵrestoreView(_r7);\n      const ctx_r6 = i0.ɵɵnextContext(2);\n      return i0.ɵɵresetView(ctx_r6.distance = $event);\n    })(\"onChange\", function EventDataViewComponent_ng_template_6_ng_container_17_Template_p_knob_onChange_10_listener($event) {\n      i0.ɵɵrestoreView(_r7);\n      const ctx_r8 = i0.ɵɵnextContext(2);\n      return i0.ɵɵresetView(ctx_r8.changeSliderRadius($event));\n    });\n    i0.ɵɵelementEnd();\n    i0.ɵɵtext(11, \"\\n              \");\n    i0.ɵɵelementEnd();\n    i0.ɵɵtext(12, \"\\n              \");\n    i0.ɵɵelementStart(13, \"div\", 19);\n    i0.ɵɵtext(14, \"\\n                \");\n    i0.ɵɵelementStart(15, \"div\", 20);\n    i0.ɵɵtext(16, \"\\n                  \");\n    i0.ɵɵelementStart(17, \"span\", 21);\n    i0.ɵɵtext(18, \"\\n                    Use the switch to select the maximum range in which you want to search for events. If the distance is set to 0, all\\n                    search results are displayed.\\n                  \");\n    i0.ɵɵelementEnd();\n    i0.ɵɵtext(19, \"\\n                \");\n    i0.ɵɵelementEnd();\n    i0.ɵɵtext(20, \"\\n              \");\n    i0.ɵɵelementEnd();\n    i0.ɵɵtext(21, \"\\n            \");\n    i0.ɵɵelementEnd();\n    i0.ɵɵtext(22, \"\\n          \");\n    i0.ɵɵelementContainerEnd();\n  }\n  if (rf & 2) {\n    const ctx_r5 = i0.ɵɵnextContext(2);\n    i0.ɵɵadvance(8);\n    i0.ɵɵtextInterpolate1(\"\", ctx_r5.distance, \" Km\");\n    i0.ɵɵadvance(2);\n    i0.ɵɵproperty(\"ngModel\", ctx_r5.distance)(\"step\", 5);\n  }\n}\nfunction EventDataViewComponent_ng_template_6_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r10 = i0.ɵɵgetCurrentView();\n    i0.ɵɵtext(0, \"\\n    \");\n    i0.ɵɵelementStart(1, \"div\", 7);\n    i0.ɵɵtext(2, \"\\n      \");\n    i0.ɵɵelementStart(3, \"div\", 8);\n    i0.ɵɵtext(4, \"\\n        \");\n    i0.ɵɵelementStart(5, \"div\", 9);\n    i0.ɵɵtext(6, \"\\n          \");\n    i0.ɵɵelementStart(7, \"span\", 10);\n    i0.ɵɵtext(8, \"\\n            \");\n    i0.ɵɵelement(9, \"i\", 11);\n    i0.ɵɵtext(10, \"\\n            \");\n    i0.ɵɵelementStart(11, \"input\", 12);\n    i0.ɵɵlistener(\"input\", function EventDataViewComponent_ng_template_6_Template_input_input_11_listener($event) {\n      i0.ɵɵrestoreView(_r10);\n      i0.ɵɵnextContext();\n      const _r0 = i0.ɵɵreference(4);\n      return i0.ɵɵresetView(_r0.filter($event.target.value));\n    });\n    i0.ɵɵelementEnd();\n    i0.ɵɵtext(12, \"\\n          \");\n    i0.ɵɵelementEnd();\n    i0.ɵɵtext(13, \"\\n        \");\n    i0.ɵɵelementEnd();\n    i0.ɵɵtext(14, \"\\n        \");\n    i0.ɵɵelementStart(15, \"div\", 13);\n    i0.ɵɵtext(16, \"\\n          \");\n    i0.ɵɵtemplate(17, EventDataViewComponent_ng_template_6_ng_container_17_Template, 23, 3, \"ng-container\", 14);\n    i0.ɵɵtext(18, \"\\n        \");\n    i0.ɵɵelementEnd();\n    i0.ɵɵtext(19, \"\\n        \");\n    i0.ɵɵelementStart(20, \"div\", 15);\n    i0.ɵɵtext(21, \"\\n          \");\n    i0.ɵɵelement(22, \"p-dataViewLayoutOptions\");\n    i0.ɵɵtext(23, \"\\n        \");\n    i0.ɵɵelementEnd();\n    i0.ɵɵtext(24, \"\\n      \");\n    i0.ɵɵelementEnd();\n    i0.ɵɵtext(25, \"\\n    \");\n    i0.ɵɵelementEnd();\n    i0.ɵɵtext(26, \"\\n  \");\n  }\n  if (rf & 2) {\n    const ctx_r1 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(17);\n    i0.ɵɵproperty(\"ngIf\", ctx_r1.user);\n  }\n}\nfunction EventDataViewComponent_ng_template_8_ng_template_53_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵtext(0, \"\\n          \");\n    i0.ɵɵelementStart(1, \"span\", 31);\n    i0.ɵɵtext(2, \" \");\n    i0.ɵɵelementStart(3, \"span\", 32);\n    i0.ɵɵtext(4, \"\\u2665\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵtext(5, \"\\u2665 \");\n    i0.ɵɵelementEnd();\n    i0.ɵɵtext(6, \"\\n        \");\n  }\n  if (rf & 2) {\n    const fill_r14 = ctx.fill;\n    i0.ɵɵadvance(1);\n    i0.ɵɵclassProp(\"full\", fill_r14 === 100);\n    i0.ɵɵadvance(2);\n    i0.ɵɵstyleProp(\"width\", fill_r14, \"%\");\n  }\n}\nfunction EventDataViewComponent_ng_template_8_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r16 = i0.ɵɵgetCurrentView();\n    i0.ɵɵtext(0, \"\\n    \");\n    i0.ɵɵelementStart(1, \"div\", 22);\n    i0.ɵɵtext(2, \"\\n      \");\n    i0.ɵɵelementStart(3, \"div\", 16);\n    i0.ɵɵtext(4, \"\\n        \");\n    i0.ɵɵelement(5, \"img\", 23);\n    i0.ɵɵtext(6, \"\\n      \");\n    i0.ɵɵelementEnd();\n    i0.ɵɵtext(7, \"\\n      \");\n    i0.ɵɵelementStart(8, \"div\", 24);\n    i0.ɵɵtext(9);\n    i0.ɵɵelementEnd();\n    i0.ɵɵtext(10, \"\\n      \");\n    i0.ɵɵelementStart(11, \"div\", 16);\n    i0.ɵɵtext(12, \"\\n        \");\n    i0.ɵɵelementStart(13, \"div\", 25);\n    i0.ɵɵtext(14, \"\\n          \");\n    i0.ɵɵelementStart(15, \"p\");\n    i0.ɵɵtext(16, \"\\n            \");\n    i0.ɵɵelementStart(17, \"dt\")(18, \"span\", 26);\n    i0.ɵɵtext(19, \"Placenumber\");\n    i0.ɵɵelementEnd()();\n    i0.ɵɵtext(20, \"\\n            \");\n    i0.ɵɵelementStart(21, \"dd\");\n    i0.ɵɵtext(22, \"\\n              \");\n    i0.ɵɵelementStart(23, \"span\");\n    i0.ɵɵtext(24);\n    i0.ɵɵelementEnd();\n    i0.ɵɵtext(25, \"\\n            \");\n    i0.ɵɵelementEnd();\n    i0.ɵɵtext(26, \"\\n            \");\n    i0.ɵɵelementStart(27, \"dt\")(28, \"span\", 27);\n    i0.ɵɵtext(29, \"Price\");\n    i0.ɵɵelementEnd()();\n    i0.ɵɵtext(30, \"\\n            \");\n    i0.ɵɵelementStart(31, \"dd\");\n    i0.ɵɵtext(32, \"\\n              \");\n    i0.ɵɵelementStart(33, \"span\");\n    i0.ɵɵtext(34);\n    i0.ɵɵpipe(35, \"currency\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵtext(36, \"\\n            \");\n    i0.ɵɵelementEnd();\n    i0.ɵɵtext(37, \"\\n          \");\n    i0.ɵɵelementEnd();\n    i0.ɵɵtext(38, \"\\n          \");\n    i0.ɵɵelement(39, \"hr\");\n    i0.ɵɵtext(40, \"\\n          \");\n    i0.ɵɵelementStart(41, \"div\");\n    i0.ɵɵtext(42);\n    i0.ɵɵpipe(43, \"date\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵtext(44, \"\\n          \");\n    i0.ɵɵelementStart(45, \"div\");\n    i0.ɵɵtext(46);\n    i0.ɵɵpipe(47, \"date\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵtext(48, \"\\n        \");\n    i0.ɵɵelementEnd();\n    i0.ɵɵtext(49, \"\\n      \");\n    i0.ɵɵelementEnd();\n    i0.ɵɵtext(50, \"\\n      \");\n    i0.ɵɵelementStart(51, \"div\", 16);\n    i0.ɵɵtext(52, \"\\n        \");\n    i0.ɵɵtemplate(53, EventDataViewComponent_ng_template_8_ng_template_53_Template, 7, 4, \"ng-template\", null, 28, i0.ɵɵtemplateRefExtractor);\n    i0.ɵɵtext(55, \"\\n        \");\n    i0.ɵɵelement(56, \"ngb-rating\", 29);\n    i0.ɵɵtext(57, \"\\n        \");\n    i0.ɵɵelementStart(58, \"a\", 30);\n    i0.ɵɵlistener(\"click\", function EventDataViewComponent_ng_template_8_Template_a_click_58_listener() {\n      const restoredCtx = i0.ɵɵrestoreView(_r16);\n      const event_r11 = restoredCtx.$implicit;\n      const ctx_r15 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r15.goToEvent(event_r11.id));\n    });\n    i0.ɵɵtext(59, \"Go to event\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵtext(60, \"\\n      \");\n    i0.ɵɵelementEnd();\n    i0.ɵɵtext(61, \"\\n    \");\n    i0.ɵɵelementEnd();\n    i0.ɵɵtext(62, \"\\n  \");\n  }\n  if (rf & 2) {\n    const event_r11 = ctx.$implicit;\n    const _r12 = i0.ɵɵreference(54);\n    const ctx_r2 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(5);\n    i0.ɵɵproperty(\"src\", \"data:\" + event_r11.flyerContentType + \";base64,\" + event_r11.flyer, i0.ɵɵsanitizeUrl);\n    i0.ɵɵadvance(4);\n    i0.ɵɵtextInterpolate1(\"\\n        \", event_r11.name, \"\\n      \");\n    i0.ɵɵadvance(15);\n    i0.ɵɵtextInterpolate2(\"\", event_r11.reservations.length, \"/\", event_r11.placenumber, \"\");\n    i0.ɵɵadvance(10);\n    i0.ɵɵtextInterpolate(i0.ɵɵpipeBind1(35, 11, event_r11.price));\n    i0.ɵɵadvance(8);\n    i0.ɵɵtextInterpolate(i0.ɵɵpipeBind2(43, 13, event_r11.dateStart, \"medium\"));\n    i0.ɵɵadvance(4);\n    i0.ɵɵtextInterpolate(i0.ɵɵpipeBind2(47, 16, event_r11.dateEnd, \"medium\"));\n    i0.ɵɵadvance(10);\n    i0.ɵɵproperty(\"rate\", ctx_r2.getAverage(event_r11.id))(\"starTemplate\", _r12)(\"readonly\", true)(\"max\", 5);\n  }\n}\nfunction EventDataViewComponent_ng_template_10_ng_template_50_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵtext(0, \"\\n          \");\n    i0.ɵɵelementStart(1, \"span\", 31);\n    i0.ɵɵtext(2, \" \");\n    i0.ɵɵelementStart(3, \"span\", 32);\n    i0.ɵɵtext(4, \"\\u2665\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵtext(5, \"\\u2665 \");\n    i0.ɵɵelementEnd();\n    i0.ɵɵtext(6, \"\\n        \");\n  }\n  if (rf & 2) {\n    const fill_r20 = ctx.fill;\n    i0.ɵɵadvance(1);\n    i0.ɵɵclassProp(\"full\", fill_r20 === 100);\n    i0.ɵɵadvance(2);\n    i0.ɵɵstyleProp(\"width\", fill_r20, \"%\");\n  }\n}\nfunction EventDataViewComponent_ng_template_10_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r22 = i0.ɵɵgetCurrentView();\n    i0.ɵɵtext(0, \"\\n    \");\n    i0.ɵɵelementStart(1, \"div\", 33);\n    i0.ɵɵtext(2, \"\\n      \");\n    i0.ɵɵelementStart(3, \"div\", 34);\n    i0.ɵɵtext(4, \"\\n        \");\n    i0.ɵɵelementStart(5, \"h3\", 35);\n    i0.ɵɵtext(6);\n    i0.ɵɵelementEnd();\n    i0.ɵɵtext(7, \"\\n        \");\n    i0.ɵɵelementStart(8, \"div\", 36);\n    i0.ɵɵtext(9, \"\\n          \");\n    i0.ɵɵelement(10, \"img\", 37);\n    i0.ɵɵtext(11, \"\\n        \");\n    i0.ɵɵelementEnd();\n    i0.ɵɵtext(12, \"\\n        \");\n    i0.ɵɵelementStart(13, \"div\", 25);\n    i0.ɵɵtext(14, \"\\n          \");\n    i0.ɵɵelement(15, \"hr\");\n    i0.ɵɵtext(16, \"\\n          \");\n    i0.ɵɵelementStart(17, \"p\");\n    i0.ɵɵtext(18, \"\\n            \");\n    i0.ɵɵelementStart(19, \"dt\")(20, \"span\", 26);\n    i0.ɵɵtext(21, \"Placenumber\");\n    i0.ɵɵelementEnd()();\n    i0.ɵɵtext(22, \"\\n            \");\n    i0.ɵɵelementStart(23, \"dd\");\n    i0.ɵɵtext(24, \"\\n              \");\n    i0.ɵɵelementStart(25, \"span\");\n    i0.ɵɵtext(26);\n    i0.ɵɵelementEnd();\n    i0.ɵɵtext(27, \"\\n            \");\n    i0.ɵɵelementEnd();\n    i0.ɵɵtext(28, \"\\n            \");\n    i0.ɵɵelementStart(29, \"dt\")(30, \"span\", 27);\n    i0.ɵɵtext(31, \"Price\");\n    i0.ɵɵelementEnd()();\n    i0.ɵɵtext(32, \"\\n            \");\n    i0.ɵɵelementStart(33, \"dd\");\n    i0.ɵɵtext(34, \"\\n              \");\n    i0.ɵɵelementStart(35, \"span\");\n    i0.ɵɵtext(36);\n    i0.ɵɵpipe(37, \"currency\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵtext(38, \"\\n            \");\n    i0.ɵɵelementEnd();\n    i0.ɵɵtext(39, \"\\n          \");\n    i0.ɵɵelementEnd();\n    i0.ɵɵtext(40, \"\\n          \");\n    i0.ɵɵelementStart(41, \"div\");\n    i0.ɵɵtext(42);\n    i0.ɵɵpipe(43, \"date\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵtext(44, \"\\n          \");\n    i0.ɵɵelementStart(45, \"div\");\n    i0.ɵɵtext(46);\n    i0.ɵɵpipe(47, \"date\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵtext(48, \"\\n        \");\n    i0.ɵɵelementEnd();\n    i0.ɵɵtext(49, \"\\n        \");\n    i0.ɵɵtemplate(50, EventDataViewComponent_ng_template_10_ng_template_50_Template, 7, 4, \"ng-template\", null, 28, i0.ɵɵtemplateRefExtractor);\n    i0.ɵɵtext(52, \"\\n        \");\n    i0.ɵɵelement(53, \"ngb-rating\", 29);\n    i0.ɵɵtext(54, \"\\n\\n        \");\n    i0.ɵɵelementStart(55, \"a\", 30);\n    i0.ɵɵlistener(\"click\", function EventDataViewComponent_ng_template_10_Template_a_click_55_listener() {\n      const restoredCtx = i0.ɵɵrestoreView(_r22);\n      const event_r17 = restoredCtx.$implicit;\n      const ctx_r21 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r21.goToEvent(event_r17.id));\n    });\n    i0.ɵɵtext(56, \"Go to event\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵtext(57, \"\\n      \");\n    i0.ɵɵelementEnd();\n    i0.ɵɵtext(58, \"\\n    \");\n    i0.ɵɵelementEnd();\n    i0.ɵɵtext(59, \"\\n  \");\n  }\n  if (rf & 2) {\n    const event_r17 = ctx.$implicit;\n    const _r18 = i0.ɵɵreference(51);\n    const ctx_r3 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(6);\n    i0.ɵɵtextInterpolate(event_r17.name);\n    i0.ɵɵadvance(4);\n    i0.ɵɵproperty(\"src\", \"data:\" + event_r17.flyerContentType + \";base64,\" + event_r17.flyer, i0.ɵɵsanitizeUrl);\n    i0.ɵɵadvance(16);\n    i0.ɵɵtextInterpolate2(\"\", event_r17.reservations.length, \"/\", event_r17.placenumber, \"\");\n    i0.ɵɵadvance(10);\n    i0.ɵɵtextInterpolate(i0.ɵɵpipeBind1(37, 11, event_r17.price));\n    i0.ɵɵadvance(6);\n    i0.ɵɵtextInterpolate(i0.ɵɵpipeBind2(43, 13, event_r17.dateStart, \"medium\"));\n    i0.ɵɵadvance(4);\n    i0.ɵɵtextInterpolate(i0.ɵɵpipeBind2(47, 16, event_r17.dateEnd, \"medium\"));\n    i0.ɵɵadvance(7);\n    i0.ɵɵproperty(\"rate\", ctx_r3.getAverage(event_r17.id))(\"starTemplate\", _r18)(\"readonly\", true)(\"max\", 5);\n  }\n}\nfunction EventDataViewComponent_ng_template_12_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵtext(0, \"\\n    \");\n    i0.ɵɵelement(1, \"p-dataViewLayoutOptions\");\n    i0.ɵɵtext(2, \"\\n  \");\n  }\n}\nexport class EventDataViewComponent {\n  constructor(generalService, organisatorService, router, googleGeocoderService, locationService) {\n    _defineProperty(this, \"generalService\", void 0);\n    _defineProperty(this, \"organisatorService\", void 0);\n    _defineProperty(this, \"router\", void 0);\n    _defineProperty(this, \"googleGeocoderService\", void 0);\n    _defineProperty(this, \"locationService\", void 0);\n    _defineProperty(this, \"events\", void 0);\n    _defineProperty(this, \"sortOrder\", void 0);\n    _defineProperty(this, \"sortField\", void 0);\n    _defineProperty(this, \"starEvents\", []);\n    _defineProperty(this, \"loading\", false);\n    _defineProperty(this, \"eventsWithDistance\", []);\n    _defineProperty(this, \"user\", void 0);\n    _defineProperty(this, \"distance\", void 0);\n    this.generalService = generalService;\n    this.organisatorService = organisatorService;\n    this.router = router;\n    this.googleGeocoderService = googleGeocoderService;\n    this.locationService = locationService;\n  }\n  ngOnInit() {\n    this.generalService.findWidthAuthorities().subscribe(u => {\n      this.user = u.body;\n      this.generalService.findEventyByPrivateOrPublicAndActiveTrueAndDateEndAfter(dayjs()).subscribe(res => {\n        this.events = res.body;\n        this.eventsWithDistance = this.events;\n        this.events.forEach(element => {\n          this.locationService.find(element.location.id).subscribe(l => {\n            element.location = l.body;\n          });\n          this.organisatorService.findReservationsByEventId(element.id).subscribe(r => {\n            element.reservations = r.body;\n          });\n          this.generalService.getEventStarRatingByEvent(element.id).subscribe(res => {\n            const ratings = res.body;\n            let total = 0;\n            ratings.forEach(el => {\n              total += el.stars;\n            });\n            const avg = total / ratings.length / 10 * 5;\n            this.starEvents.push({\n              event: element,\n              average: avg\n            });\n          });\n        });\n      });\n    });\n  }\n  onSortChange(event) {\n    let value = event.value;\n    if (value.indexOf('!') === 0) {\n      this.sortOrder = -1;\n      this.sortField = value.substring(1, value.length);\n    } else {\n      this.sortOrder = 1;\n      this.sortField = value;\n    }\n  }\n  getAverage(eventId) {\n    const se = this.starEvents.find(x => x.event.id === eventId);\n    return se.average;\n  }\n  goToEvent(eventId) {\n    this.router.navigate(['/events/' + eventId + '/view']);\n  }\n  changeSliderRadius(e) {\n    this.eventsWithDistance = [];\n    let latUser = 0;\n    let lngUser = 0;\n    let posUser;\n    const queryParam = this.user.address.replace(' ', '+');\n    this.googleGeocoderService.getFromAddress(queryParam).subscribe(res => {\n      const geocoder = res.body['results'];\n      const geometry = geocoder[0].geometry;\n      latUser = geometry.location.lat;\n      lngUser = geometry.location.lng;\n      posUser = new google.maps.LatLng(latUser, lngUser);\n      const now = dayjs();\n      this.events.forEach(element => {\n        const lat = element.location.address.lat;\n        const lng = element.location.address.lng;\n        const posEvent = new google.maps.LatLng(lat, lng);\n        const distance = google.maps.geometry.spherical.computeDistanceBetween(posUser, posEvent);\n        const maxDistance = Number(e) * 1000;\n        if (e === 0) {\n          this.eventsWithDistance = this.events;\n        }\n        if (maxDistance > distance) {\n          this.eventsWithDistance.push(element);\n        }\n      });\n      this.eventsWithDistance = [...new Set(this.eventsWithDistance)];\n    });\n  }\n}\n_defineProperty(EventDataViewComponent, \"\\u0275fac\", function EventDataViewComponent_Factory(t) {\n  return new (t || EventDataViewComponent)(i0.ɵɵdirectiveInject(i1.GeneralService), i0.ɵɵdirectiveInject(i2.OrganisatorService), i0.ɵɵdirectiveInject(i3.Router), i0.ɵɵdirectiveInject(i4.GoogleGeocodeService), i0.ɵɵdirectiveInject(i5.LocationService));\n});\n_defineProperty(EventDataViewComponent, \"\\u0275cmp\", /*@__PURE__*/i0.ɵɵdefineComponent({\n  type: EventDataViewComponent,\n  selectors: [[\"jhi-event-data-view\"]],\n  decls: 15,\n  vars: 6,\n  consts: [[\"id\", \"main-title\", \"jhiTranslate\", \"event-data-view.title\", 1, \"main-title\"], [\"filterBy\", \"name\", \"layout\", \"grid\", 3, \"value\", \"paginator\", \"rows\", \"sortField\", \"sortOrder\", \"loading\"], [\"dv\", \"\"], [\"pTemplate\", \"header\"], [\"pTemplate\", \"listItem\"], [\"pTemplate\", \"gridItem\"], [\"pTemplate\", \"footer\"], [1, \"p-d-flex\", \"p-flex-column\", \"p-flex-md-row\", \"p-jc-md-between\"], [1, \"row\"], [1, \"col-md-4\"], [1, \"p-input-icon-left\", \"p-mb-2\", \"p-mb-md-0\"], [1, \"pi\", \"pi-search\"], [\"type\", \"search\", \"pInputText\", \"\", \"placeholder\", \"Search by name\", 3, \"input\"], [1, \"col-md-6\"], [4, \"ngIf\"], [1, \"col-md-2\"], [1, \"col-md-3\"], [\"jhiTranslate\", \"distance.distance\"], [1, \"slider\", 3, \"ngModel\", \"step\", \"ngModelChange\", \"onChange\"], [1, \"col-md-9\"], [\"role\", \"alert\", 1, \"alert\", \"alert-info\"], [\"jhiTranslate\", \"data-view.distance-info\"], [1, \"row\", \"events-list-row\"], [\"alt\", \"event image\", 1, \"img-list\", \"img\", \"img-center\", 3, \"src\"], [1, \"col-md-3\", \"title\"], [1, \"info\"], [\"jhiTranslate\", \"event-detail.placenumber\"], [\"jhiTranslate\", \"event-detail.price\"], [\"t\", \"\"], [3, \"rate\", \"starTemplate\", \"readonly\", \"max\"], [\"jhiTranslate\", \"event-data-view.goto-event\", 1, \"shiny-button\", 3, \"click\"], [1, \"heart\"], [1, \"half\"], [1, \"p-col-12\", \"p-md-3\"], [1, \"card\", \"card-container\"], [1, \"bungee-inline\"], [1, \"center\"], [\"alt\", \"event image\", 1, \"img\", \"img-center\", 2, \"max-width\", \"250px\", \"max-height\", \"350px\", 3, \"src\"]],\n  template: function EventDataViewComponent_Template(rf, ctx) {\n    if (rf & 1) {\n      i0.ɵɵelementStart(0, \"h1\", 0);\n      i0.ɵɵtext(1, \"Search events\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵtext(2, \"\\n\\n\");\n      i0.ɵɵelementStart(3, \"p-dataView\", 1, 2);\n      i0.ɵɵtext(5, \"\\n  \");\n      i0.ɵɵtemplate(6, EventDataViewComponent_ng_template_6_Template, 27, 1, \"ng-template\", 3);\n      i0.ɵɵtext(7, \"\\n\\n  \");\n      i0.ɵɵtemplate(8, EventDataViewComponent_ng_template_8_Template, 63, 19, \"ng-template\", 4);\n      i0.ɵɵtext(9, \"\\n  \");\n      i0.ɵɵtemplate(10, EventDataViewComponent_ng_template_10_Template, 60, 19, \"ng-template\", 5);\n      i0.ɵɵtext(11, \"\\n\\n  \");\n      i0.ɵɵtemplate(12, EventDataViewComponent_ng_template_12_Template, 3, 0, \"ng-template\", 6);\n      i0.ɵɵtext(13, \"\\n\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵtext(14, \"\\n\");\n    }\n    if (rf & 2) {\n      i0.ɵɵadvance(3);\n      i0.ɵɵproperty(\"value\", ctx.eventsWithDistance)(\"paginator\", true)(\"rows\", 9)(\"sortField\", ctx.sortField)(\"sortOrder\", ctx.sortOrder)(\"loading\", ctx.loading);\n    }\n  },\n  dependencies: [i6.NgIf, i7.NgControlStatus, i7.NgModel, i8.NgbRating, i9.TranslateDirective, i10.DataView, i11.PrimeTemplate, i10.DataViewLayoutOptions, i12.InputText, i13.Knob, i6.CurrencyPipe, i6.DatePipe],\n  styles: [\".title[_ngcontent-%COMP%] {\\n  font-family: \\\"Bangers\\\", cursive;\\n  font-size: x-large;\\n}\\n\\n.img[_ngcontent-%COMP%] {\\n  max-width: 250px;\\n  max-height: 350px;\\n  border: 1px solid black;\\n  border-radius: 10px;\\n  box-shadow: 0px 10px 13px -7px #000000, 5px 5px 15px 5px rgba(0, 0, 0, 0);\\n  margin-top: 20px;\\n}\\n\\n.img-center[_ngcontent-%COMP%] {\\n  display: block;\\n  margin-left: auto;\\n  margin-right: auto;\\n}\\n\\n.img-list[_ngcontent-%COMP%] {\\n  max-width: 200px;\\n  max-height: 250px;\\n}\\n\\n.heart[_ngcontent-%COMP%] {\\n  position: relative;\\n  display: inline-block;\\n  font-size: 3rem;\\n  color: #d3d3d3;\\n}\\n\\n.full[_ngcontent-%COMP%] {\\n  color: red;\\n}\\n\\n.half[_ngcontent-%COMP%] {\\n  position: absolute;\\n  display: inline-block;\\n  overflow: hidden;\\n  color: red;\\n}\\n\\n.events-list-row[_ngcontent-%COMP%] {\\n  width: 100%;\\n  height: 275px;\\n  vertical-align: middle;\\n}\\n\\n.main-title[_ngcontent-%COMP%] {\\n  font-family: \\\"Bangers\\\", cursive;\\n}\\n\\n#main-title[_ngcontent-%COMP%] {\\n  font-size: 71px;\\n  color: #009999;\\n  font-weight: bold;\\n  text-shadow: 0 0 10px #ffffff, 0 0 20px #ffffff, 0 0 30px #ffffff, 0 0 40px #009999, 0 0 70px #009999, 0 0 80px #009999, 0 0 100px #009999, 0 0 170px #009999;\\n  text-align: center;\\n  line-height: 250px;\\n}\\n\\n.card-container[_ngcontent-%COMP%] {\\n  padding: 20px;\\n  \\n  background: rgb(210, 255, 82);   \\n  background: linear-gradient(to right, rgb(210, 255, 82) 0%, rgb(145, 232, 66) 100%); \\n  filter: progid:DXImageTransform.Microsoft.gradient( startColorstr=\\\"#d2ff52\\\", endColorstr=\\\"#91e842\\\",GradientType=1 ); \\n  box-shadow: 10px 10px 5px 0px rgba(0, 0, 0, 0.75);\\n  -webkit-box-shadow: 10px 10px 5px 0px rgba(0, 0, 0, 0.75);\\n  -moz-box-shadow: 10px 10px 5px 0px rgba(0, 0, 0, 0.75);\\n}\\n\\n.events-list-row[_ngcontent-%COMP%] {\\n  margin-top: 5px;\\n  margin-bottom: 5px;\\n  background: rgb(210, 255, 82);   \\n  background: linear-gradient(to right, rgb(210, 255, 82) 0%, rgb(145, 232, 66) 100%); \\n  filter: progid:DXImageTransform.Microsoft.gradient( startColorstr=\\\"#d2ff52\\\", endColorstr=\\\"#91e842\\\",GradientType=1 ); \\n  box-shadow: 10px 10px 5px 0px rgba(0, 0, 0, 0.75);\\n  -webkit-box-shadow: 10px 10px 5px 0px rgba(0, 0, 0, 0.75);\\n  -moz-box-shadow: 10px 10px 5px 0px rgba(0, 0, 0, 0.75);\\n}\\n\\n.info[_ngcontent-%COMP%] {\\n  white-space: inherit;\\n  padding: 5px;\\n  margin: 5px;\\n}\\n/*# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8uL3NyYy9tYWluL3dlYmFwcC9hcHAvc2VhcmNoLWRhdGEtdmlld3MvZXZlbnQtZGF0YS12aWV3L2V2ZW50LWRhdGEtdmlldy5jb21wb25lbnQuc2NzcyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQTtFQUNFLCtCQUFBO0VBQ0Esa0JBQUE7QUFDRjs7QUFFQTtFQUNFLGdCQUFBO0VBQ0EsaUJBQUE7RUFDQSx1QkFBQTtFQUNBLG1CQUFBO0VBRUEseUVBQUE7RUFDQSxnQkFBQTtBQUNGOztBQUVBO0VBQ0UsY0FBQTtFQUNBLGlCQUFBO0VBQ0Esa0JBQUE7QUFDRjs7QUFFQTtFQUNFLGdCQUFBO0VBQ0EsaUJBQUE7QUFDRjs7QUFFQTtFQUNFLGtCQUFBO0VBQ0EscUJBQUE7RUFDQSxlQUFBO0VBQ0EsY0FBQTtBQUNGOztBQUVBO0VBQ0UsVUFBQTtBQUNGOztBQUNBO0VBQ0Usa0JBQUE7RUFDQSxxQkFBQTtFQUNBLGdCQUFBO0VBQ0EsVUFBQTtBQUVGOztBQUNBO0VBQ0UsV0FBQTtFQUNBLGFBQUE7RUFDQSxzQkFBQTtBQUVGOztBQUNBO0VBQ0UsK0JBQUE7QUFFRjs7QUFDQTtFQUNFLGVBQUE7RUFDQSxjQUFBO0VBQ0EsaUJBQUE7RUFDQSw2SkFBQTtFQUVBLGtCQUFBO0VBQ0Esa0JBQUE7QUFDRjs7QUFFQTtFQUNFLGFBQUE7RUFDQSxzSEFBQTtFQUNBLDZCQUFBLEVBQUEsaUJBQUEsRUFDQSxhQUFBLEVBQ0EsNEJBQUE7RUFDQSxtRkFBQSxFQUlHLHFEQUFBO0VBQ0gsbUhBQUEsRUFBQSxVQUFBO0VBQ0EsaURBQUE7RUFDQSx5REFBQTtFQUNBLHNEQUFBO0FBSEY7O0FBTUE7RUFDRSxlQUFBO0VBQ0Esa0JBQUE7RUFDQSw2QkFBQSxFQUFBLGlCQUFBLEVBQ0EsYUFBQSxFQUNBLDRCQUFBO0VBQ0EsbUZBQUEsRUFJRyxxREFBQTtFQUNILG1IQUFBLEVBQUEsVUFBQTtFQUNBLGlEQUFBO0VBQ0EseURBQUE7RUFDQSxzREFBQTtBQVBGOztBQVVBO0VBQ0Usb0JBQUE7RUFDQSxZQUFBO0VBQ0EsV0FBQTtBQVBGIiwic291cmNlc0NvbnRlbnQiOlsiLnRpdGxlIHtcbiAgZm9udC1mYW1pbHk6ICdCYW5nZXJzJywgY3Vyc2l2ZTtcbiAgZm9udC1zaXplOiB4LWxhcmdlO1xufVxuXG4uaW1nIHtcbiAgbWF4LXdpZHRoOiAyNTBweDtcbiAgbWF4LWhlaWdodDogMzUwcHg7XG4gIGJvcmRlcjogMXB4IHNvbGlkIGJsYWNrO1xuICBib3JkZXItcmFkaXVzOiAxMHB4O1xuICAtd2Via2l0LWJveC1zaGFkb3c6IDBweCAxMHB4IDEzcHggLTdweCAjMDAwMDAwLCA1cHggNXB4IDE1cHggNXB4IHJnYigwIDAgMCAvIDAlKTtcbiAgYm94LXNoYWRvdzogMHB4IDEwcHggMTNweCAtN3B4ICMwMDAwMDAsIDVweCA1cHggMTVweCA1cHggcmdiKDAgMCAwIC8gMCUpO1xuICBtYXJnaW4tdG9wOiAyMHB4O1xufVxuXG4uaW1nLWNlbnRlciB7XG4gIGRpc3BsYXk6IGJsb2NrO1xuICBtYXJnaW4tbGVmdDogYXV0bztcbiAgbWFyZ2luLXJpZ2h0OiBhdXRvO1xufVxuXG4uaW1nLWxpc3Qge1xuICBtYXgtd2lkdGg6IDIwMHB4O1xuICBtYXgtaGVpZ2h0OiAyNTBweDtcbn1cblxuLmhlYXJ0IHtcbiAgcG9zaXRpb246IHJlbGF0aXZlO1xuICBkaXNwbGF5OiBpbmxpbmUtYmxvY2s7XG4gIGZvbnQtc2l6ZTogM3JlbTtcbiAgY29sb3I6ICNkM2QzZDM7XG59XG5cbi5mdWxsIHtcbiAgY29sb3I6IHJlZDtcbn1cbi5oYWxmIHtcbiAgcG9zaXRpb246IGFic29sdXRlO1xuICBkaXNwbGF5OiBpbmxpbmUtYmxvY2s7XG4gIG92ZXJmbG93OiBoaWRkZW47XG4gIGNvbG9yOiByZWQ7XG59XG5cbi5ldmVudHMtbGlzdC1yb3cge1xuICB3aWR0aDogMTAwJTtcbiAgaGVpZ2h0OiAyNzVweDtcbiAgdmVydGljYWwtYWxpZ246IG1pZGRsZTtcbn1cblxuLm1haW4tdGl0bGUge1xuICBmb250LWZhbWlseTogJ0JhbmdlcnMnLCBjdXJzaXZlO1xufVxuXG4jbWFpbi10aXRsZSB7XG4gIGZvbnQtc2l6ZTogNzFweDtcbiAgY29sb3I6ICMwMDk5OTk7XG4gIGZvbnQtd2VpZ2h0OiBib2xkO1xuICB0ZXh0LXNoYWRvdzogMCAwIDEwcHggI2ZmZmZmZiwgMCAwIDIwcHggI2ZmZmZmZiwgMCAwIDMwcHggI2ZmZmZmZiwgMCAwIDQwcHggIzAwOTk5OSwgMCAwIDcwcHggIzAwOTk5OSwgMCAwIDgwcHggIzAwOTk5OSwgMCAwIDEwMHB4ICMwMDk5OTksXG4gICAgMCAwIDE3MHB4ICMwMDk5OTk7XG4gIHRleHQtYWxpZ246IGNlbnRlcjtcbiAgbGluZS1oZWlnaHQ6IDI1MHB4O1xufVxuXG4uY2FyZC1jb250YWluZXIge1xuICBwYWRkaW5nOiAyMHB4O1xuICAvKiBQZXJtYWxpbmsgLSB1c2UgdG8gZWRpdCBhbmQgc2hhcmUgdGhpcyBncmFkaWVudDogaHR0cHM6Ly9jb2xvcnppbGxhLmNvbS9ncmFkaWVudC1lZGl0b3IvI2QyZmY1MiswLDkxZTg0MisxMDA7TmVvbiAqL1xuICBiYWNrZ3JvdW5kOiByZ2IoMjEwLCAyNTUsIDgyKTsgLyogT2xkIGJyb3dzZXJzICovXG4gIGJhY2tncm91bmQ6IC1tb3otbGluZWFyLWdyYWRpZW50KGxlZnQsIHJnYmEoMjEwLCAyNTUsIDgyLCAxKSAwJSwgcmdiYSgxNDUsIDIzMiwgNjYsIDEpIDEwMCUpOyAvKiBGRjMuNi0xNSAqL1xuICBiYWNrZ3JvdW5kOiAtd2Via2l0LWxpbmVhci1ncmFkaWVudChsZWZ0LCByZ2JhKDIxMCwgMjU1LCA4MiwgMSkgMCUsIHJnYmEoMTQ1LCAyMzIsIDY2LCAxKSAxMDAlKTsgLyogQ2hyb21lMTAtMjUsU2FmYXJpNS4xLTYgKi9cbiAgYmFja2dyb3VuZDogbGluZWFyLWdyYWRpZW50KFxuICAgIHRvIHJpZ2h0LFxuICAgIHJnYmEoMjEwLCAyNTUsIDgyLCAxKSAwJSxcbiAgICByZ2JhKDE0NSwgMjMyLCA2NiwgMSkgMTAwJVxuICApOyAvKiBXM0MsIElFMTArLCBGRjE2KywgQ2hyb21lMjYrLCBPcGVyYTEyKywgU2FmYXJpNysgKi9cbiAgZmlsdGVyOiBwcm9naWQ6RFhJbWFnZVRyYW5zZm9ybS5NaWNyb3NvZnQuZ3JhZGllbnQoIHN0YXJ0Q29sb3JzdHI9JyNkMmZmNTInLCBlbmRDb2xvcnN0cj0nIzkxZTg0MicsR3JhZGllbnRUeXBlPTEgKTsgLyogSUU2LTkgKi9cbiAgYm94LXNoYWRvdzogMTBweCAxMHB4IDVweCAwcHggcmdiYSgwLCAwLCAwLCAwLjc1KTtcbiAgLXdlYmtpdC1ib3gtc2hhZG93OiAxMHB4IDEwcHggNXB4IDBweCByZ2JhKDAsIDAsIDAsIDAuNzUpO1xuICAtbW96LWJveC1zaGFkb3c6IDEwcHggMTBweCA1cHggMHB4IHJnYmEoMCwgMCwgMCwgMC43NSk7XG59XG5cbi5ldmVudHMtbGlzdC1yb3cge1xuICBtYXJnaW4tdG9wOiA1cHg7XG4gIG1hcmdpbi1ib3R0b206IDVweDtcbiAgYmFja2dyb3VuZDogcmdiKDIxMCwgMjU1LCA4Mik7IC8qIE9sZCBicm93c2VycyAqL1xuICBiYWNrZ3JvdW5kOiAtbW96LWxpbmVhci1ncmFkaWVudChsZWZ0LCByZ2JhKDIxMCwgMjU1LCA4MiwgMSkgMCUsIHJnYmEoMTQ1LCAyMzIsIDY2LCAxKSAxMDAlKTsgLyogRkYzLjYtMTUgKi9cbiAgYmFja2dyb3VuZDogLXdlYmtpdC1saW5lYXItZ3JhZGllbnQobGVmdCwgcmdiYSgyMTAsIDI1NSwgODIsIDEpIDAlLCByZ2JhKDE0NSwgMjMyLCA2NiwgMSkgMTAwJSk7IC8qIENocm9tZTEwLTI1LFNhZmFyaTUuMS02ICovXG4gIGJhY2tncm91bmQ6IGxpbmVhci1ncmFkaWVudChcbiAgICB0byByaWdodCxcbiAgICByZ2JhKDIxMCwgMjU1LCA4MiwgMSkgMCUsXG4gICAgcmdiYSgxNDUsIDIzMiwgNjYsIDEpIDEwMCVcbiAgKTsgLyogVzNDLCBJRTEwKywgRkYxNissIENocm9tZTI2KywgT3BlcmExMissIFNhZmFyaTcrICovXG4gIGZpbHRlcjogcHJvZ2lkOkRYSW1hZ2VUcmFuc2Zvcm0uTWljcm9zb2Z0LmdyYWRpZW50KCBzdGFydENvbG9yc3RyPScjZDJmZjUyJywgZW5kQ29sb3JzdHI9JyM5MWU4NDInLEdyYWRpZW50VHlwZT0xICk7IC8qIElFNi05ICovXG4gIGJveC1zaGFkb3c6IDEwcHggMTBweCA1cHggMHB4IHJnYmEoMCwgMCwgMCwgMC43NSk7XG4gIC13ZWJraXQtYm94LXNoYWRvdzogMTBweCAxMHB4IDVweCAwcHggcmdiYSgwLCAwLCAwLCAwLjc1KTtcbiAgLW1vei1ib3gtc2hhZG93OiAxMHB4IDEwcHggNXB4IDBweCByZ2JhKDAsIDAsIDAsIDAuNzUpO1xufVxuXG4uaW5mbyB7XG4gIHdoaXRlLXNwYWNlOiBpbmhlcml0O1xuICBwYWRkaW5nOiA1cHg7XG4gIG1hcmdpbjogNXB4O1xufVxuIl0sInNvdXJjZVJvb3QiOiIifQ== */\"]\n}));","map":{"version":3,"mappings":"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","names":["dayjs","i0","EventDataViewComponent","constructor","generalService","organisatorService","router","googleGeocoderService","locationService","ngOnInit","findWidthAuthorities","subscribe","u","user","body","findEventyByPrivateOrPublicAndActiveTrueAndDateEndAfter","res","events","eventsWithDistance","forEach","element","find","location","id","l","findReservationsByEventId","r","reservations","getEventStarRatingByEvent","ratings","total","el","stars","avg","length","starEvents","push","event","average","onSortChange","value","indexOf","sortOrder","sortField","substring","getAverage","eventId","se","x","goToEvent","navigate","changeSliderRadius","e","latUser","lngUser","posUser","queryParam","address","replace","getFromAddress","geocoder","geometry","lat","lng","google","maps","LatLng","now","posEvent","distance","spherical","computeDistanceBetween","maxDistance","Number","Set","selectors","decls","vars","consts","template"],"sourceRoot":"","sources":["/home/ceo/mmmm/createyourevent/src/main/webapp/app/search-data-views/event-data-view/event-data-view.component.ts","/home/ceo/mmmm/createyourevent/src/main/webapp/app/search-data-views/event-data-view/event-data-view.component.html"],"sourcesContent":["import { IUser } from './../../entities/user/user.model';\nimport { Component, OnInit } from \"@angular/core\";\nimport { Router } from \"@angular/router\";\nimport { IEvent } from \"app/entities/event/event.model\";\nimport { LocationService } from \"app/entities/location/service/location.service\";\nimport { GeneralService } from \"app/general.service\";\nimport { GoogleGeocodeService } from \"app/google-geocode.service\";\nimport { OrganisatorService } from \"app/organisator/organisator.service\";\nimport * as dayjs from \"dayjs\";\n\n@Component({\n  selector: 'jhi-event-data-view',\n  templateUrl: './event-data-view.component.html',\n  styleUrls: ['./event-data-view.component.scss']\n})\nexport class EventDataViewComponent implements OnInit {\n  events!: IEvent[];\n  sortOrder!: number;\n  sortField!: string;\n  starEvents: any[] = [];\n  loading = false;\n  eventsWithDistance: IEvent[] = [];\n  user: IUser;\n  distance: number;\n\n  constructor(private generalService: GeneralService,\n              private organisatorService: OrganisatorService,\n              private router: Router,\n              private googleGeocoderService: GoogleGeocodeService,\n              private locationService: LocationService) {}\n\n  ngOnInit() {\n    this.generalService.findWidthAuthorities().subscribe(u => {\n      this.user = u.body;\n\n      this.generalService.findEventyByPrivateOrPublicAndActiveTrueAndDateEndAfter(dayjs()).subscribe(res => {\n        this.events = res.body!;\n        this.eventsWithDistance = this.events;\n        this.events.forEach(element => {\n\n          this.locationService.find(element.location.id).subscribe(l => {\n            element.location = l.body;\n          });\n\n          this.organisatorService.findReservationsByEventId(element.id!).subscribe(r => {\n            element.reservations = r.body;\n          });\n\n          this.generalService.getEventStarRatingByEvent(element.id!).subscribe(res => {\n            const ratings = res.body!;\n            let total = 0;\n            ratings.forEach(el => {\n              total += el.stars!;\n            });\n            const avg = (total / ratings.length / 10) * 5;\n            this.starEvents.push({ event: element, average: avg });\n          });\n        });\n      });\n    });\n  }\n\n  onSortChange(event: any) {\n    let value = event.value;\n\n    if (value.indexOf('!') === 0) {\n      this.sortOrder = -1;\n      this.sortField = value.substring(1, value.length);\n    } else {\n      this.sortOrder = 1;\n      this.sortField = value;\n    }\n  }\n\n  getAverage(eventId: number): number {\n    const se = this.starEvents.find(x => x.event.id === eventId);\n    return se.average;\n  }\n\n  goToEvent(eventId: number): void {\n    this.router.navigate(['/events/' + eventId + '/view']);\n  }\n\n  changeSliderRadius(e: any): void {\n    this.eventsWithDistance = [];\n    let latUser = 0;\n    let lngUser = 0;\n    let posUser: google.maps.LatLng;\n    const queryParam = this.user.address!.replace(' ', '+');\n    this.googleGeocoderService.getFromAddress(queryParam).subscribe((res: any) => {\n      const geocoder = res.body!['results'];\n      const geometry = geocoder[0].geometry;\n      latUser = geometry.location.lat;\n      lngUser = geometry.location.lng;\n      posUser = new google.maps.LatLng(latUser, lngUser);\n\n      const now = dayjs();\n      this.events.forEach(element => {\n        const lat: number = element.location.address.lat;\n        const lng: number = element.location.address.lng;\n        const posEvent = new google.maps.LatLng(lat, lng);\n        const distance = google.maps.geometry.spherical.computeDistanceBetween(posUser, posEvent);\n        const maxDistance = Number(e) * 1000;\n        if(e === 0) {\n          this.eventsWithDistance = this.events;\n        }\n        if (maxDistance > distance) {\n          this.eventsWithDistance.push(element);\n        }\n      });\n      this.eventsWithDistance = [...new Set(this.eventsWithDistance)];\n    });\n  };\n}\n","<h1 id=\"main-title\" class=\"main-title\" jhiTranslate=\"event-data-view.title\">Search events</h1>\n\n<p-dataView\n  #dv\n  [value]=\"eventsWithDistance\"\n  [paginator]=\"true\"\n  [rows]=\"9\"\n  filterBy=\"name\"\n  [sortField]=\"sortField\"\n  [sortOrder]=\"sortOrder\"\n  layout=\"grid\"\n  [loading]=\"loading\"\n>\n  <ng-template pTemplate=\"header\">\n    <div class=\"p-d-flex p-flex-column p-flex-md-row p-jc-md-between\">\n      <div class=\"row\">\n        <div class=\"col-md-4\">\n          <span class=\"p-input-icon-left p-mb-2 p-mb-md-0\">\n            <i class=\"pi pi-search\"></i>\n            <input type=\"search\" pInputText placeholder=\"Search by name\" (input)=\"dv.filter($event.target!.value)\" />\n          </span>\n        </div>\n        <div class=\"col-md-6\">\n          <ng-container *ngIf=\"user\">\n            <div class=\"row\">\n              <div class=\"col-md-3\">\n                <h5><span jhiTranslate=\"distance.distance\"></span>{{ distance }} Km</h5>\n                <p-knob [(ngModel)]=\"distance\" [step]=\"5\" (onChange)=\"changeSliderRadius($event)\" class=\"slider\"></p-knob>\n              </div>\n              <div class=\"col-md-9\">\n                <div class=\"alert alert-info\" role=\"alert\">\n                  <span jhiTranslate=\"data-view.distance-info\">\n                    Use the switch to select the maximum range in which you want to search for events. If the distance is set to 0, all\n                    search results are displayed.\n                  </span>\n                </div>\n              </div>\n            </div>\n          </ng-container>\n        </div>\n        <div class=\"col-md-2\">\n          <p-dataViewLayoutOptions></p-dataViewLayoutOptions>\n        </div>\n      </div>\n    </div>\n  </ng-template>\n\n  <ng-template let-event pTemplate=\"listItem\">\n    <div class=\"row events-list-row\">\n      <div class=\"col-md-3\">\n        <img class=\"img-list img img-center\" [src]=\"'data:' + event.flyerContentType + ';base64,' + event.flyer\" alt=\"event image\" />\n      </div>\n      <div class=\"col-md-3 title\">\n        {{ event.name }}\n      </div>\n      <div class=\"col-md-3\">\n        <div class=\"info\">\n          <p>\n            <dt><span jhiTranslate=\"event-detail.placenumber\">Placenumber</span></dt>\n            <dd>\n              <span>{{ event.reservations.length }}/{{ event.placenumber }}</span>\n            </dd>\n            <dt><span jhiTranslate=\"event-detail.price\">Price</span></dt>\n            <dd>\n              <span>{{ event.price | currency }}</span>\n            </dd>\n          </p>\n          <hr />\n          <div>{{ event.dateStart | date: 'medium' }}</div>\n          <div>{{ event.dateEnd | date: 'medium' }}</div>\n        </div>\n      </div>\n      <div class=\"col-md-3\">\n        <ng-template #t let-fill=\"fill\">\n          <span class=\"heart\" [class.full]=\"fill === 100\"> <span class=\"half\" [style.width.%]=\"fill\">&hearts;</span>&hearts; </span>\n        </ng-template>\n        <ngb-rating [rate]=\"getAverage(event.id)\" [starTemplate]=\"t\" [readonly]=\"true\" [max]=\"5\"></ngb-rating>\n        <a class=\"shiny-button\" (click)=\"goToEvent(event.id)\" jhiTranslate=\"event-data-view.goto-event\">Go to event</a>\n      </div>\n    </div>\n  </ng-template>\n  <ng-template let-event pTemplate=\"gridItem\">\n    <div class=\"p-col-12 p-md-3\">\n      <div class=\"card card-container\">\n        <h3 class=\"bungee-inline\">{{ event.name }}</h3>\n        <div class=\"center\">\n          <img\n            class=\"img img-center\"\n            [src]=\"'data:' + event.flyerContentType + ';base64,' + event.flyer\"\n            style=\"max-width: 250px; max-height: 350px\"\n            alt=\"event image\"\n          />\n        </div>\n        <div class=\"info\">\n          <hr />\n          <p>\n            <dt><span jhiTranslate=\"event-detail.placenumber\">Placenumber</span></dt>\n            <dd>\n              <span>{{ event.reservations.length }}/{{ event.placenumber }}</span>\n            </dd>\n            <dt><span jhiTranslate=\"event-detail.price\">Price</span></dt>\n            <dd>\n              <span>{{ event.price | currency }}</span>\n            </dd>\n          </p>\n          <div>{{ event.dateStart | date: 'medium' }}</div>\n          <div>{{ event.dateEnd | date: 'medium' }}</div>\n        </div>\n        <ng-template #t let-fill=\"fill\">\n          <span class=\"heart\" [class.full]=\"fill === 100\"> <span class=\"half\" [style.width.%]=\"fill\">&hearts;</span>&hearts; </span>\n        </ng-template>\n        <ngb-rating [rate]=\"getAverage(event.id)\" [starTemplate]=\"t\" [readonly]=\"true\" [max]=\"5\"></ngb-rating>\n\n        <a class=\"shiny-button\" (click)=\"goToEvent(event.id)\" jhiTranslate=\"event-data-view.goto-event\">Go to event</a>\n      </div>\n    </div>\n  </ng-template>\n\n  <ng-template pTemplate=\"footer\">\n    <p-dataViewLayoutOptions></p-dataViewLayoutOptions>\n  </ng-template>\n</p-dataView>\n"]},"metadata":{},"sourceType":"module","externalDependencies":[]}