{"ast":null,"code":"import { Address } from 'app/entities/address/address.model';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"app/entities/location/service/location.service\";\nimport * as i2 from \"@angular/router\";\nimport * as i3 from \"@angular/forms\";\nimport * as i4 from \"./event.service\";\nimport * as i5 from \"app/entities/address/service/address.service\";\nimport * as i6 from \"app/google-geocode.service\";\nimport * as i7 from \"@fortawesome/angular-fontawesome\";\nimport * as i8 from \"../../shared/language/translate.directive\";\nimport * as i9 from \"../../shared/alert/alert-error.component\";\nimport * as i10 from \"ngx-google-places-autocomplete\";\nexport let AddressUpdateComponent = /*#__PURE__*/(() => {\n  class AddressUpdateComponent {\n    constructor(locationService, activatedRoute, fb, eventUserService, route, addressService, googleGeocoderService) {\n      this.locationService = locationService;\n      this.activatedRoute = activatedRoute;\n      this.fb = fb;\n      this.eventUserService = eventUserService;\n      this.route = route;\n      this.addressService = addressService;\n      this.googleGeocoderService = googleGeocoderService;\n      this.isSaving = false;\n      this.formattedaddress = '';\n      this.editForm = this.fb.group({\n        id: [],\n        address: [],\n        lat: [],\n        lng: []\n      });\n    }\n    ngOnInit() {\n      let locationId = 0;\n      this.route.params.subscribe(params => {\n        locationId = params['locationId'];\n        this.eventUserService.findAddressByLocationId(locationId).subscribe(address => {\n          this.address = address.body;\n          this.updateForm();\n        });\n      });\n    }\n    updateForm() {\n      this.editForm.patchValue({\n        id: this.address.id,\n        address: this.address.address,\n        lat: this.address.lat,\n        lng: this.address.lng\n      });\n    }\n    previousState() {\n      window.history.back();\n    }\n    save() {\n      this.isSaving = true;\n      const address = this.createFromForm();\n      if (address.id !== undefined) {\n        this.subscribeToSaveResponse(this.addressService.update(address));\n      } else {\n        this.subscribeToSaveResponse(this.addressService.create(address));\n      }\n    }\n    createFromForm() {\n      console.log(this.editForm.get(['address']).value);\n      return {\n        ...new Address(),\n        id: this.editForm.get(['id']).value,\n        address: this.formattedaddress,\n        lat: this.lat,\n        lng: this.lng\n      };\n    }\n    subscribeToSaveResponse(result) {\n      result.subscribe(() => this.onSaveSuccess(), () => this.onSaveError());\n    }\n    onSaveSuccess() {\n      this.isSaving = false;\n      this.previousState();\n    }\n    onSaveError() {\n      this.isSaving = false;\n    }\n    addressChange(address) {\n      this.formattedaddress = address.formatted_address;\n      const queryParam = this.formattedaddress.replace(' ', '+');\n      this.googleGeocoderService.getFromAddress(queryParam).subscribe(res => {\n        this.geocoder = res.body['results'];\n        const geometry = this.geocoder['geometry'];\n        this.lat = geometry.location.lat();\n        this.lng = geometry.location.lng();\n      });\n    }\n  }\n  AddressUpdateComponent.ɵfac = function AddressUpdateComponent_Factory(t) {\n    return new (t || AddressUpdateComponent)(i0.ɵɵdirectiveInject(i1.LocationService), i0.ɵɵdirectiveInject(i2.ActivatedRoute), i0.ɵɵdirectiveInject(i3.UntypedFormBuilder), i0.ɵɵdirectiveInject(i4.EventService), i0.ɵɵdirectiveInject(i2.ActivatedRoute), i0.ɵɵdirectiveInject(i5.AddressService), i0.ɵɵdirectiveInject(i6.GoogleGeocodeService));\n  };\n  AddressUpdateComponent.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n    type: AddressUpdateComponent,\n    selectors: [[\"jhi-address-update\"]],\n    decls: 44,\n    vars: 2,\n    consts: [[1, \"row\", \"justify-content-center\"], [1, \"col-8\"], [\"name\", \"editForm\", \"role\", \"form\", \"novalidate\", \"\", 3, \"formGroup\", \"ngSubmit\"], [\"id\", \"jhi-address-heading\", \"jhiTranslate\", \"createyoureventApp.address.home.createOrEditLabel\"], [1, \"form-group\"], [\"jhiTranslate\", \"createyoureventApp.address.address\", \"for\", \"field_address\", 1, \"form-control-label\"], [\"ngx-google-places-autocomplete\", \"\", \"type\", \"text\", \"name\", \"address\", \"id\", \"field_address\", \"formControlName\", \"address\", 1, \"form-control\", 3, \"onAddressChange\"], [\"type\", \"button\", \"id\", \"cancel-save\", 1, \"btn\", \"btn-secondary\", 3, \"click\"], [\"icon\", \"ban\"], [\"jhiTranslate\", \"entity.action.cancel\"], [\"type\", \"submit\", \"id\", \"save-entity\", 1, \"btn\", \"btn-primary\", 3, \"disabled\"], [\"icon\", \"save\"], [\"jhiTranslate\", \"entity.action.save\"]],\n    template: function AddressUpdateComponent_Template(rf, ctx) {\n      if (rf & 1) {\n        i0.ɵɵelementStart(0, \"div\", 0);\n        i0.ɵɵtext(1, \"\\n    \");\n        i0.ɵɵelementStart(2, \"div\", 1);\n        i0.ɵɵtext(3, \"\\n        \");\n        i0.ɵɵelementStart(4, \"form\", 2);\n        i0.ɵɵlistener(\"ngSubmit\", function AddressUpdateComponent_Template_form_ngSubmit_4_listener() {\n          return ctx.save();\n        });\n        i0.ɵɵtext(5, \"\\n            \");\n        i0.ɵɵelementStart(6, \"h2\", 3);\n        i0.ɵɵtext(7, \"Create or edit a Address\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵtext(8, \"\\n\\n            \");\n        i0.ɵɵelementStart(9, \"div\");\n        i0.ɵɵtext(10, \"\\n                \");\n        i0.ɵɵelement(11, \"jhi-alert-error\");\n        i0.ɵɵtext(12, \"\\n\\n                \");\n        i0.ɵɵelementStart(13, \"div\", 4);\n        i0.ɵɵtext(14, \"\\n                    \");\n        i0.ɵɵelementStart(15, \"label\", 5);\n        i0.ɵɵtext(16, \"Address\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵtext(17, \"\\n                    \");\n        i0.ɵɵelementStart(18, \"input\", 6);\n        i0.ɵɵlistener(\"onAddressChange\", function AddressUpdateComponent_Template_input_onAddressChange_18_listener($event) {\n          return ctx.addressChange($event);\n        });\n        i0.ɵɵelementEnd();\n        i0.ɵɵtext(19, \"\\n                \");\n        i0.ɵɵelementEnd();\n        i0.ɵɵtext(20, \"\\n            \");\n        i0.ɵɵelementEnd();\n        i0.ɵɵtext(21, \"\\n\\n            \");\n        i0.ɵɵelementStart(22, \"div\");\n        i0.ɵɵtext(23, \"\\n                \");\n        i0.ɵɵelementStart(24, \"button\", 7);\n        i0.ɵɵlistener(\"click\", function AddressUpdateComponent_Template_button_click_24_listener() {\n          return ctx.previousState();\n        });\n        i0.ɵɵtext(25, \"\\n                    \");\n        i0.ɵɵelement(26, \"fa-icon\", 8);\n        i0.ɵɵtext(27, \"\\u00A0\");\n        i0.ɵɵelementStart(28, \"span\", 9);\n        i0.ɵɵtext(29, \"Cancel\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵtext(30, \"\\n                \");\n        i0.ɵɵelementEnd();\n        i0.ɵɵtext(31, \"\\n\\n                \");\n        i0.ɵɵelementStart(32, \"button\", 10);\n        i0.ɵɵtext(33, \"\\n                    \");\n        i0.ɵɵelement(34, \"fa-icon\", 11);\n        i0.ɵɵtext(35, \"\\u00A0\");\n        i0.ɵɵelementStart(36, \"span\", 12);\n        i0.ɵɵtext(37, \"Save\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵtext(38, \"\\n                \");\n        i0.ɵɵelementEnd();\n        i0.ɵɵtext(39, \"\\n            \");\n        i0.ɵɵelementEnd();\n        i0.ɵɵtext(40, \"\\n        \");\n        i0.ɵɵelementEnd();\n        i0.ɵɵtext(41, \"\\n    \");\n        i0.ɵɵelementEnd();\n        i0.ɵɵtext(42, \"\\n\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵtext(43, \"\\n\");\n      }\n      if (rf & 2) {\n        i0.ɵɵadvance(4);\n        i0.ɵɵproperty(\"formGroup\", ctx.editForm);\n        i0.ɵɵadvance(28);\n        i0.ɵɵproperty(\"disabled\", ctx.editForm.invalid || ctx.isSaving);\n      }\n    },\n    dependencies: [i3.ɵNgNoValidate, i3.DefaultValueAccessor, i3.NgControlStatus, i3.NgControlStatusGroup, i7.FaIconComponent, i3.FormGroupDirective, i3.FormControlName, i8.TranslateDirective, i9.AlertErrorComponent, i10.GooglePlaceDirective],\n    encapsulation: 2\n  });\n  return AddressUpdateComponent;\n})();","map":null,"metadata":{},"sourceType":"module","externalDependencies":[]}