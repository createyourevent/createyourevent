{"ast":null,"code":"import { NavigationStart } from \"@angular/router\";\nimport { EventStatus } from \"app/entities/enumerations/event-status.model\";\nimport * as dayjs from \"dayjs\";\nimport { Subject } from \"rxjs\";\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"app/general.service\";\nimport * as i2 from \"app/google-geocode.service\";\nimport * as i3 from \"./SharedNotificationService.service\";\nimport * as i4 from \"@angular/router\";\nimport * as i5 from \"@angular/common\";\nimport * as i6 from \"../shared/language/translate.directive\";\nimport * as i7 from \"../shared/auth/has-any-authority.directive\";\nfunction SystemNotificationComponent_ng_container_0_div_7_div_2_li_7_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"li\")(1, \"a\", 13);\n    i0.ɵɵtext(2);\n    i0.ɵɵelementEnd()();\n  }\n  if (rf & 2) {\n    const event_r9 = ctx.$implicit;\n    i0.ɵɵadvance(1);\n    i0.ɵɵpropertyInterpolate1(\"href\", \"/events/\", event_r9.id, \"/dashboard-event/workflow\", i0.ɵɵsanitizeUrl);\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate(event_r9.name);\n  }\n}\nfunction SystemNotificationComponent_ng_container_0_div_7_div_2_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 9);\n    i0.ɵɵtext(1, \"\\n            \");\n    i0.ɵɵelementStart(2, \"div\", 10);\n    i0.ɵɵtext(3, \"You still have to definitely confirm the following events, which are organized by you.\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵtext(4, \"\\n            \");\n    i0.ɵɵelementStart(5, \"ul\", 11);\n    i0.ɵɵtext(6, \"\\n                \");\n    i0.ɵɵtemplate(7, SystemNotificationComponent_ng_container_0_div_7_div_2_li_7_Template, 3, 2, \"li\", 12);\n    i0.ɵɵtext(8, \"\\n            \");\n    i0.ɵɵelementEnd();\n    i0.ɵɵtext(9, \"\\n        \");\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const ctx_r2 = i0.ɵɵnextContext(3);\n    i0.ɵɵadvance(7);\n    i0.ɵɵproperty(\"ngForOf\", ctx_r2.eventsIn7days);\n  }\n}\nfunction SystemNotificationComponent_ng_container_0_div_7_div_4_li_7_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"li\")(1, \"a\", 13);\n    i0.ɵɵtext(2);\n    i0.ɵɵelementEnd()();\n  }\n  if (rf & 2) {\n    const event_r11 = ctx.$implicit;\n    i0.ɵɵadvance(1);\n    i0.ɵɵpropertyInterpolate1(\"href\", \"/events/\", event_r11.id, \"/view\", i0.ɵɵsanitizeUrl);\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate(event_r11.name);\n  }\n}\nfunction SystemNotificationComponent_ng_container_0_div_7_div_4_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 14);\n    i0.ɵɵtext(1, \"\\n            \");\n    i0.ɵɵelementStart(2, \"div\", 15);\n    i0.ɵɵtext(3, \"Events this week with distance of 20km.\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵtext(4, \"\\n            \");\n    i0.ɵɵelementStart(5, \"ul\", 16);\n    i0.ɵɵtext(6, \"\\n                \");\n    i0.ɵɵtemplate(7, SystemNotificationComponent_ng_container_0_div_7_div_4_li_7_Template, 3, 2, \"li\", 12);\n    i0.ɵɵtext(8, \"\\n            \");\n    i0.ɵɵelementEnd();\n    i0.ɵɵtext(9, \"\\n        \");\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const ctx_r3 = i0.ɵɵnextContext(3);\n    i0.ɵɵadvance(7);\n    i0.ɵɵproperty(\"ngForOf\", ctx_r3.eventsWithDistanceAndSevenDays);\n  }\n}\nfunction SystemNotificationComponent_ng_container_0_div_7_div_6_li_7_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"li\")(1, \"a\", 19);\n    i0.ɵɵtext(2);\n    i0.ɵɵelementEnd()();\n  }\n  if (rf & 2) {\n    const ticket_r13 = ctx.$implicit;\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(ticket_r13.event.name);\n  }\n}\nfunction SystemNotificationComponent_ng_container_0_div_7_div_6_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 17);\n    i0.ɵɵtext(1, \"\\n            \");\n    i0.ɵɵelementStart(2, \"div\", 18);\n    i0.ɵɵtext(3, \"You must pay this tickets:\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵtext(4, \"\\n            \");\n    i0.ɵɵelementStart(5, \"ul\", 11);\n    i0.ɵɵtext(6, \"\\n                \");\n    i0.ɵɵtemplate(7, SystemNotificationComponent_ng_container_0_div_7_div_6_li_7_Template, 3, 1, \"li\", 12);\n    i0.ɵɵtext(8, \"\\n            \");\n    i0.ɵɵelementEnd();\n    i0.ɵɵtext(9, \"\\n        \");\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const ctx_r4 = i0.ɵɵnextContext(3);\n    i0.ɵɵadvance(7);\n    i0.ɵɵproperty(\"ngForOf\", ctx_r4.tickets);\n  }\n}\nfunction SystemNotificationComponent_ng_container_0_div_7_div_8_li_7_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"li\")(1, \"a\", 13);\n    i0.ɵɵtext(2);\n    i0.ɵɵelementEnd()();\n  }\n  if (rf & 2) {\n    const shop_r15 = ctx.$implicit;\n    i0.ɵɵadvance(1);\n    i0.ɵɵpropertyInterpolate1(\"href\", \"/supplier/orders/\", shop_r15.id, \"\", i0.ɵɵsanitizeUrl);\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate(shop_r15.name);\n  }\n}\nfunction SystemNotificationComponent_ng_container_0_div_7_div_8_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 20);\n    i0.ɵɵtext(1, \"\\n          \");\n    i0.ɵɵelementStart(2, \"div\", 21);\n    i0.ɵɵtext(3, \"You have product orders that you have not yet seen.\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵtext(4, \"\\n          \");\n    i0.ɵɵelementStart(5, \"ul\", 16);\n    i0.ɵɵtext(6, \"\\n              \");\n    i0.ɵɵtemplate(7, SystemNotificationComponent_ng_container_0_div_7_div_8_li_7_Template, 3, 2, \"li\", 12);\n    i0.ɵɵtext(8, \"\\n          \");\n    i0.ɵɵelementEnd();\n    i0.ɵɵtext(9, \"\\n        \");\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const ctx_r5 = i0.ɵɵnextContext(3);\n    i0.ɵɵadvance(7);\n    i0.ɵɵproperty(\"ngForOf\", ctx_r5.shopsNotSeen);\n  }\n}\nfunction SystemNotificationComponent_ng_container_0_div_7_div_10_li_7_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"li\")(1, \"a\", 13);\n    i0.ɵɵtext(2);\n    i0.ɵɵelementEnd()();\n  }\n  if (rf & 2) {\n    const ser_r17 = ctx.$implicit;\n    i0.ɵɵadvance(1);\n    i0.ɵɵpropertyInterpolate2(\"href\", \"/service/\", ser_r17.createYourEventService.id, \"/customer-booking/\", ser_r17.id, \"\", i0.ɵɵsanitizeUrl);\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate(ser_r17.title);\n  }\n}\nfunction SystemNotificationComponent_ng_container_0_div_7_div_10_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 9);\n    i0.ɵɵtext(1, \"\\n          \");\n    i0.ɵɵelementStart(2, \"div\", 22);\n    i0.ɵɵtext(3, \"You haven't seen any service bookings.\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵtext(4, \"\\n          \");\n    i0.ɵɵelementStart(5, \"ul\", 11);\n    i0.ɵɵtext(6, \"\\n              \");\n    i0.ɵɵtemplate(7, SystemNotificationComponent_ng_container_0_div_7_div_10_li_7_Template, 3, 3, \"li\", 12);\n    i0.ɵɵtext(8, \"\\n          \");\n    i0.ɵɵelementEnd();\n    i0.ɵɵtext(9, \"\\n        \");\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const ctx_r6 = i0.ɵɵnextContext(3);\n    i0.ɵɵadvance(7);\n    i0.ɵɵproperty(\"ngForOf\", ctx_r6.serviceMapsNotSeen);\n  }\n}\nfunction SystemNotificationComponent_ng_container_0_div_7_div_12_ng_container_7_ng_container_2_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementContainerStart(0);\n    i0.ɵɵtext(1, \"\\n                  \");\n    i0.ɵɵelementStart(2, \"li\")(3, \"a\", 13);\n    i0.ɵɵpipe(4, \"lowercase\");\n    i0.ɵɵtext(5);\n    i0.ɵɵelementEnd()();\n    i0.ɵɵtext(6, \"\\n                \");\n    i0.ɵɵelementContainerEnd();\n  }\n  if (rf & 2) {\n    const org_r19 = i0.ɵɵnextContext().$implicit;\n    i0.ɵɵadvance(3);\n    i0.ɵɵpropertyInterpolate2(\"href\", \"/organization/\", org_r19.organization.restaurant.id, \"/rent-\", i0.ɵɵpipeBind1(4, 3, org_r19.organization.organizationType), \"\", i0.ɵɵsanitizeUrl);\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(org_r19.organization.name);\n  }\n}\nfunction SystemNotificationComponent_ng_container_0_div_7_div_12_ng_container_7_ng_container_4_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementContainerStart(0);\n    i0.ɵɵtext(1, \"\\n                  \");\n    i0.ɵɵelementStart(2, \"li\")(3, \"a\", 13);\n    i0.ɵɵpipe(4, \"lowercase\");\n    i0.ɵɵtext(5);\n    i0.ɵɵelementEnd()();\n    i0.ɵɵtext(6, \"\\n                \");\n    i0.ɵɵelementContainerEnd();\n  }\n  if (rf & 2) {\n    const org_r19 = i0.ɵɵnextContext().$implicit;\n    i0.ɵɵadvance(3);\n    i0.ɵɵpropertyInterpolate2(\"href\", \"/organization/\", org_r19.organization.club.id, \"/rent-\", i0.ɵɵpipeBind1(4, 3, org_r19.organization.organizationType), \"\", i0.ɵɵsanitizeUrl);\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(org_r19.organization.name);\n  }\n}\nfunction SystemNotificationComponent_ng_container_0_div_7_div_12_ng_container_7_ng_container_6_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementContainerStart(0);\n    i0.ɵɵtext(1, \"\\n                  \");\n    i0.ɵɵelementStart(2, \"li\")(3, \"a\", 13);\n    i0.ɵɵpipe(4, \"lowercase\");\n    i0.ɵɵtext(5);\n    i0.ɵɵelementEnd()();\n    i0.ɵɵtext(6, \"\\n                \");\n    i0.ɵɵelementContainerEnd();\n  }\n  if (rf & 2) {\n    const org_r19 = i0.ɵɵnextContext().$implicit;\n    i0.ɵɵadvance(3);\n    i0.ɵɵpropertyInterpolate2(\"href\", \"/organization/\", org_r19.organization.hotel.id, \"/rent-\", i0.ɵɵpipeBind1(4, 3, org_r19.organization.organizationType), \"\", i0.ɵɵsanitizeUrl);\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(org_r19.organization.name);\n  }\n}\nfunction SystemNotificationComponent_ng_container_0_div_7_div_12_ng_container_7_ng_container_8_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementContainerStart(0);\n    i0.ɵɵtext(1, \"\\n                  \");\n    i0.ɵɵelementStart(2, \"li\")(3, \"a\", 13);\n    i0.ɵɵpipe(4, \"lowercase\");\n    i0.ɵɵtext(5);\n    i0.ɵɵelementEnd()();\n    i0.ɵɵtext(6, \"\\n                \");\n    i0.ɵɵelementContainerEnd();\n  }\n  if (rf & 2) {\n    const org_r19 = i0.ɵɵnextContext().$implicit;\n    i0.ɵɵadvance(3);\n    i0.ɵɵpropertyInterpolate2(\"href\", \"/organization/\", org_r19.organization.building.id, \"/rent-\", i0.ɵɵpipeBind1(4, 3, org_r19.organization.organizationType), \"\", i0.ɵɵsanitizeUrl);\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(org_r19.organization.name);\n  }\n}\nfunction SystemNotificationComponent_ng_container_0_div_7_div_12_ng_container_7_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementContainerStart(0);\n    i0.ɵɵtext(1, \"\\n                \");\n    i0.ɵɵtemplate(2, SystemNotificationComponent_ng_container_0_div_7_div_12_ng_container_7_ng_container_2_Template, 7, 5, \"ng-container\", 24);\n    i0.ɵɵtext(3, \"\\n                \");\n    i0.ɵɵtemplate(4, SystemNotificationComponent_ng_container_0_div_7_div_12_ng_container_7_ng_container_4_Template, 7, 5, \"ng-container\", 24);\n    i0.ɵɵtext(5, \"\\n                \");\n    i0.ɵɵtemplate(6, SystemNotificationComponent_ng_container_0_div_7_div_12_ng_container_7_ng_container_6_Template, 7, 5, \"ng-container\", 24);\n    i0.ɵɵtext(7, \"\\n                \");\n    i0.ɵɵtemplate(8, SystemNotificationComponent_ng_container_0_div_7_div_12_ng_container_7_ng_container_8_Template, 7, 5, \"ng-container\", 24);\n    i0.ɵɵtext(9, \"\\n              \");\n    i0.ɵɵelementContainerEnd();\n  }\n  if (rf & 2) {\n    const org_r19 = ctx.$implicit;\n    i0.ɵɵadvance(2);\n    i0.ɵɵproperty(\"ngIf\", org_r19.organization.organizationType === \"RESTAURANT\");\n    i0.ɵɵadvance(2);\n    i0.ɵɵproperty(\"ngIf\", org_r19.organization.organizationType === \"CLUB\");\n    i0.ɵɵadvance(2);\n    i0.ɵɵproperty(\"ngIf\", org_r19.organization.organizationType === \"HOTEL\");\n    i0.ɵɵadvance(2);\n    i0.ɵɵproperty(\"ngIf\", org_r19.organization.organizationType === \"BUILDING\");\n  }\n}\nfunction SystemNotificationComponent_ng_container_0_div_7_div_12_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 20);\n    i0.ɵɵtext(1, \"\\n            \");\n    i0.ɵɵelementStart(2, \"div\", 23);\n    i0.ɵɵtext(3, \"You haven't seen any organization reservations\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵtext(4, \"\\n            \");\n    i0.ɵɵelementStart(5, \"ul\", 16);\n    i0.ɵɵtext(6, \"\\n              \");\n    i0.ɵɵtemplate(7, SystemNotificationComponent_ng_container_0_div_7_div_12_ng_container_7_Template, 10, 4, \"ng-container\", 12);\n    i0.ɵɵtext(8, \"\\n            \");\n    i0.ɵɵelementEnd();\n    i0.ɵɵtext(9, \"\\n          \");\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const ctx_r7 = i0.ɵɵnextContext(3);\n    i0.ɵɵadvance(7);\n    i0.ɵɵproperty(\"ngForOf\", ctx_r7.organizationsNotSeen);\n  }\n}\nfunction SystemNotificationComponent_ng_container_0_div_7_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 4);\n    i0.ɵɵtext(1, \"\\n        \");\n    i0.ɵɵtemplate(2, SystemNotificationComponent_ng_container_0_div_7_div_2_Template, 10, 1, \"div\", 5);\n    i0.ɵɵtext(3, \"\\n        \");\n    i0.ɵɵtemplate(4, SystemNotificationComponent_ng_container_0_div_7_div_4_Template, 10, 1, \"div\", 6);\n    i0.ɵɵtext(5, \"\\n        \");\n    i0.ɵɵtemplate(6, SystemNotificationComponent_ng_container_0_div_7_div_6_Template, 10, 1, \"div\", 7);\n    i0.ɵɵtext(7, \"\\n        \");\n    i0.ɵɵtemplate(8, SystemNotificationComponent_ng_container_0_div_7_div_8_Template, 10, 1, \"div\", 8);\n    i0.ɵɵtext(9, \"\\n        \");\n    i0.ɵɵtemplate(10, SystemNotificationComponent_ng_container_0_div_7_div_10_Template, 10, 1, \"div\", 5);\n    i0.ɵɵtext(11, \"\\n        \");\n    i0.ɵɵtemplate(12, SystemNotificationComponent_ng_container_0_div_7_div_12_Template, 10, 1, \"div\", 8);\n    i0.ɵɵtext(13, \"\\n    \");\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const ctx_r1 = i0.ɵɵnextContext(2);\n    i0.ɵɵproperty(\"hidden\", ctx_r1.isShowMessages);\n    i0.ɵɵadvance(2);\n    i0.ɵɵproperty(\"ngIf\", ctx_r1.eventsIn7days.length > 0);\n    i0.ɵɵadvance(2);\n    i0.ɵɵproperty(\"ngIf\", ctx_r1.eventsWithDistanceAndSevenDays.length > 0);\n    i0.ɵɵadvance(2);\n    i0.ɵɵproperty(\"ngIf\", ctx_r1.tickets.length > 0);\n    i0.ɵɵadvance(2);\n    i0.ɵɵproperty(\"ngIf\", ctx_r1.shopsNotSeen.length > 0);\n    i0.ɵɵadvance(2);\n    i0.ɵɵproperty(\"ngIf\", ctx_r1.serviceMapsNotSeen.length > 0);\n    i0.ɵɵadvance(2);\n    i0.ɵɵproperty(\"ngIf\", ctx_r1.organizationsNotSeen.length > 0);\n  }\n}\nfunction SystemNotificationComponent_ng_container_0_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r29 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementContainerStart(0);\n    i0.ɵɵtext(1, \"\\n    \");\n    i0.ɵɵelementStart(2, \"div\", 1);\n    i0.ɵɵlistener(\"click\", function SystemNotificationComponent_ng_container_0_Template_div_click_2_listener() {\n      i0.ɵɵrestoreView(_r29);\n      const ctx_r28 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r28.openNotifications());\n    });\n    i0.ɵɵelementEnd();\n    i0.ɵɵtext(3, \"\\n\\n        \");\n    i0.ɵɵelementStart(4, \"div\", 2);\n    i0.ɵɵtext(5);\n    i0.ɵɵelementEnd();\n    i0.ɵɵtext(6, \"\\n\\n    \");\n    i0.ɵɵtemplate(7, SystemNotificationComponent_ng_container_0_div_7_Template, 14, 7, \"div\", 3);\n    i0.ɵɵtext(8, \"\\n\");\n    i0.ɵɵelementContainerEnd();\n  }\n  if (rf & 2) {\n    const ctx_r0 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(5);\n    i0.ɵɵtextInterpolate(ctx_r0.totalMessages);\n    i0.ɵɵadvance(2);\n    i0.ɵɵproperty(\"ngIf\", ctx_r0.eventsIn7days.length > 0 || ctx_r0.eventsWithDistanceAndSevenDays.length > 0 || ctx_r0.tickets.length > 0);\n  }\n}\nexport let SystemNotificationComponent = /*#__PURE__*/(() => {\n  class SystemNotificationComponent {\n    constructor(generalService, googleGeocoderService, sharedNotificationService, router) {\n      this.generalService = generalService;\n      this.googleGeocoderService = googleGeocoderService;\n      this.sharedNotificationService = sharedNotificationService;\n      this.router = router;\n      this.isShowMessages = true;\n      this.eventsIn7days = [];\n      this.totalMessages = 0;\n      this.eventsWithDistanceAndSevenDays = [];\n      this.refresh = new Subject();\n      this.tickets = [];\n      this.eventProductOrders = [];\n      this.shopsNotSeen = [];\n      this.servicesNotSeen = [];\n      this.serviceMapsNotSeen = [];\n      this.organizationsNotSeen = [];\n      this.subscriptionPR = router.events.subscribe(event => {\n        if (event instanceof NavigationStart) {\n          if (!router.navigated) {\n            this.totalMessages = 0;\n            this.loadAlertMessages();\n            this.loadAllEventsInDistance(25);\n            this.loadTickets();\n            this.loadEventProductOrders();\n            this.loadServiceOrders();\n          }\n        }\n      });\n    }\n    ngOnDestroy() {\n      this.changeEventsubscription.unsubscribe();\n      this.subscription.unsubscribe();\n      this.subscriptionPR.unsubscribe();\n    }\n    ngOnInit() {\n      this.generalService.findWidthAuthorities().subscribe(u => {\n        this.user = u.body;\n        if (this.user !== null) {\n          this.totalMessages = 0;\n          this.loadAlertMessages();\n          this.loadAllEventsInDistance(25);\n          this.loadTickets();\n          this.loadEventProductOrders();\n          this.loadServiceOrders();\n          this.loadOrganizationReservations();\n          this.changeEventsubscription = this.sharedNotificationService.getLoginEvent().subscribe(() => {\n            this.totalMessages = 0;\n            this.loadAlertMessages();\n            this.loadAllEventsInDistance(25);\n            this.loadTickets();\n            this.loadEventProductOrders();\n            this.loadServiceOrders();\n            this.loadOrganizationReservations();\n          });\n        }\n      });\n    }\n    loadTickets() {\n      this.tickets = [];\n      this.generalService.getReservationsByUserAndNotBilled(this.user.id).subscribe(r => {\n        r.body.forEach(element => {\n          if (element.event.definitelyConfirmed && element.event.status === EventStatus.DEFINITELY) {\n            this.tickets.push(element);\n            this.totalMessages++;\n            this.refresh.next();\n          }\n        });\n      });\n    }\n    loadAlertMessages() {\n      this.eventsIn7days = [];\n      this.generalService.findAllEventsByActiveTrueAndDateEndAfterAndUserId(dayjs(), this.user.id).subscribe(e => {\n        this.events = e.body;\n        this.events.forEach(element => {\n          const warning = dayjs(element.dateStart).subtract(21, 'days').startOf('day');\n          if (dayjs(element.dateStart).isAfter(warning) && !element.definitelyConfirmed) {\n            this.eventsIn7days.push(element);\n            this.totalMessages++;\n            this.refresh.next();\n          }\n        });\n      });\n    }\n    loadServiceOrders() {\n      this.servicesNotSeen = [];\n      this.serviceMapsNotSeen = [];\n      let esmos = [];\n      this.generalService.getServicesFromUserAndActive(this.user.id).subscribe(res => {\n        const services = res.body;\n        let i = 0;\n        services.forEach(service => {\n          i++;\n          this.generalService.findByCreateYourEventServiceId(service.id).subscribe(res => {\n            {\n              const servicemaps = res.body;\n              let l = 0;\n              servicemaps.forEach(sm => {\n                l++;\n                this.generalService.getAllEventServiceMapsOrdersByServiceMapId(sm.id).subscribe(esmo => {\n                  esmos = esmos.concat(esmo.body);\n                  if (i === services.length && l === servicemaps.length) {\n                    esmos.forEach(elem => {\n                      if (!elem.seen) {\n                        elem.serviceMap.createYourEventService = service;\n                        this.serviceMapsNotSeen.push(elem.serviceMap);\n                        this.totalMessages++;\n                        this.refresh.next();\n                      }\n                    });\n                  }\n                });\n              });\n            }\n          });\n        });\n      });\n    }\n    loadEventProductOrders() {\n      this.shopsNotSeen = [];\n      this.generalService.findShopsByUserAndActiveTrue().subscribe(s => {\n        const shops = s.body;\n        let i = 0;\n        shops.forEach(element => {\n          i++;\n          this.generalService.findAllEventProductOrdersByShopId(element.id).subscribe(epos => {\n            const eventProductOrders = epos.body;\n            eventProductOrders.forEach(res => {\n              if (!res.seen) {\n                this.eventProductOrders.push(res);\n              }\n            });\n            if (i === shops.length) {\n              this.eventProductOrders.forEach(el => {\n                const sel = shops.find(x => el.shop.id === x.id);\n                if (sel !== undefined) {\n                  const z = this.shopsNotSeen.findIndex(y => y.id === sel.id);\n                  if (z === -1) {\n                    this.shopsNotSeen.push(sel);\n                    this.totalMessages++;\n                    this.refresh.next();\n                  }\n                }\n              });\n            }\n          });\n        });\n      });\n    }\n    loadAllEventsInDistance(dist) {\n      this.eventsWithDistanceAndSevenDays = [];\n      this.generalService.findWidthAuthorities().subscribe(u => {\n        const user = u.body;\n        let latUser = 0;\n        let lngUser = 0;\n        let posUser;\n        const queryParam = this.user.address.replace(' ', '+');\n        this.googleGeocoderService.getFromAddress(queryParam).subscribe(res => {\n          const geocoder = res.body['results'];\n          const geometry = geocoder[0].geometry;\n          latUser = geometry.location.lat;\n          lngUser = geometry.location.lng;\n          posUser = new google.maps.LatLng(latUser, lngUser);\n          const now = dayjs();\n          this.generalService.findEventByIsPublicAndActive().subscribe(res2 => {\n            const events = res2.body;\n            const eventsBeforSevenDays = [];\n            events.forEach(eve => {\n              if (eve.definitelyConfirmed === true && eve.status === EventStatus.DEFINITELY) {\n                //eventsBeforSevenDays.push(eve);\n                const warning = dayjs(eve.dateStart).subtract(21, 'days').startOf('day');\n                const t = warning.isBefore(dayjs());\n                if (t) {\n                  eventsBeforSevenDays.push(eve);\n                }\n              }\n            });\n            eventsBeforSevenDays.forEach(element => {\n              let latEvent = 0;\n              let lngEvent = 0;\n              let posEvent;\n              const queryParamShop = element.location.address.address.replace(' ', '+');\n              this.googleGeocoderService.getFromAddress(queryParamShop).subscribe(resShop => {\n                const geocoderShop = resShop.body['results'];\n                const geometryShop = geocoderShop[0].geometry;\n                latEvent = geometryShop.location.lat;\n                lngEvent = geometryShop.location.lng;\n                posEvent = new google.maps.LatLng(latEvent, lngEvent);\n                const distance = google.maps.geometry.spherical.computeDistanceBetween(posUser, posEvent);\n                const maxDistance = dist * 1000;\n                if (maxDistance > distance) {\n                  this.eventsWithDistanceAndSevenDays.push(element);\n                  this.totalMessages++;\n                  this.refresh.next();\n                }\n              });\n            });\n          });\n        });\n      });\n    }\n    loadOrganizationReservations() {\n      this.generalService.findOrganizationReservationsByOrganizationWithUserId(this.user.id).subscribe(or => {\n        const reservations = or.body;\n        reservations.forEach(ele => {\n          if (ele.seen === null || !ele.seen) {\n            this.organizationsNotSeen.push(ele);\n          }\n        });\n      });\n    }\n    openNotifications() {\n      this.isShowMessages = !this.isShowMessages;\n    }\n  }\n  SystemNotificationComponent.ɵfac = function SystemNotificationComponent_Factory(t) {\n    return new (t || SystemNotificationComponent)(i0.ɵɵdirectiveInject(i1.GeneralService), i0.ɵɵdirectiveInject(i2.GoogleGeocodeService), i0.ɵɵdirectiveInject(i3.SharedNotificationService), i0.ɵɵdirectiveInject(i4.Router));\n  };\n  SystemNotificationComponent.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n    type: SystemNotificationComponent,\n    selectors: [[\"jhi-system-notification\"]],\n    decls: 2,\n    vars: 1,\n    consts: [[4, \"jhiHasAnyAuthority\"], [1, \"system-notification\", 3, \"click\"], [1, \"totalMessage\"], [\"class\", \"chat-notification-system\", 3, \"hidden\", 4, \"ngIf\"], [1, \"chat-notification-system\", 3, \"hidden\"], [\"class\", \"alert alert-danger\", \"role\", \"alert\", 4, \"ngIf\"], [\"class\", \"alert alert-primary\", \"role\", \"alert\", 4, \"ngIf\"], [\"class\", \"alert alert-secondary\", \"role\", \"alert\", 4, \"ngIf\"], [\"class\", \"alert alert-info\", \"role\", \"alert\", 4, \"ngIf\"], [\"role\", \"alert\", 1, \"alert\", \"alert-danger\"], [\"jhiTranslate\", \"system-notification.events-in-seven-days\"], [1, \"circle\"], [4, \"ngFor\", \"ngForOf\"], [3, \"href\"], [\"role\", \"alert\", 1, \"alert\", \"alert-primary\"], [\"jhiTranslate\", \"system-notification.events-in-seven-days-with-distance\"], [1, \"diamond\"], [\"role\", \"alert\", 1, \"alert\", \"alert-secondary\"], [\"jhiTranslate\", \"system-notification.pay-tickets\"], [\"href\", \"/account/tickets\"], [\"role\", \"alert\", 1, \"alert\", \"alert-info\"], [\"jhiTranslate\", \"system-notification.event-product-orders\"], [\"jhiTranslate\", \"system-notification.service-orders\"], [\"jhiTranslate\", \"system-notification.organization-reservations\"], [4, \"ngIf\"]],\n    template: function SystemNotificationComponent_Template(rf, ctx) {\n      if (rf & 1) {\n        i0.ɵɵtemplate(0, SystemNotificationComponent_ng_container_0_Template, 9, 2, \"ng-container\", 0);\n        i0.ɵɵtext(1, \"\\n\\n\");\n      }\n      if (rf & 2) {\n        i0.ɵɵproperty(\"jhiHasAnyAuthority\", \"ROLE_USER\");\n      }\n    },\n    dependencies: [i5.NgForOf, i5.NgIf, i6.TranslateDirective, i7.HasAnyAuthorityDirective, i5.LowerCasePipe],\n    styles: [\"@charset \\\"UTF-8\\\";.system-notification[_ngcontent-%COMP%]{background-image:url(info.8bd00a670c0377af.png);width:75px;height:75px;position:absolute;left:75px;top:175px;z-index:6}.totalMessage[_ngcontent-%COMP%]{position:absolute;left:60px;top:160px;background-color:red;text-align:center;width:40px;font-weight:700;color:#fff;border-radius:20px;z-index:6;font-size:large}.chat-notification-system[_ngcontent-%COMP%]{background-color:#000;opacity:.9;min-width:250px;min-height:55px;position:absolute;left:37.5px;top:250px;z-index:500;border-radius:10px;border:white 1px solid;color:#fff;padding:20px 5px 5px;font-weight:700}.user[_ngcontent-%COMP%]{width:75%;float:left}.counterMessages[_ngcontent-%COMP%]{background-color:red;border-radius:12.5px;width:25px;margin:0 auto;float:left;text-align:center}.circle[_ngcontent-%COMP%]{counter-reset:list-counter;list-style:none}.circle[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{margin:1.5em 0}.circle[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]:before{content:counter(list-counter);counter-increment:list-counter;padding:.5em;margin-right:1em;border-radius:50%;border:.25em solid #ccc;background:firebrick;color:#fff;font-family:arial;font-weight:700;text-align:center;display:inline-block}.diamond[_ngcontent-%COMP%]{counter-reset:list-counter;list-style:none}.diamond[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{margin:1.5em 0}.diamond[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]:before{content:counter(list-counter);counter-increment:list-counter;transform:rotate(45deg);text-transform:rotate(90deg);padding:.5em;margin-right:1em;border:.25em solid #ccc;background:#000;color:#fff;font-family:arial;font-weight:700;text-align:center;display:inline-block}.large[_ngcontent-%COMP%]{counter-reset:list-counter;list-style:none;float:left}.large[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{margin:1.5em 0;line-height:1em}.large[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]:before{content:counter(list-counter);counter-increment:list-counter;font-family:arial;color:#666;font:bold;font-size:2em;margin-right:.5em}.oval[_ngcontent-%COMP%]{counter-reset:list-counter;list-style:none;float:left}.oval[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{margin:1.5em 0}.oval[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]:before{content:counter(list-counter);counter-increment:list-counter;width:.5em;height:1em;padding:.5em;margin-right:1em;border-radius:50%;border:.25em solid #ccc;background:#000;color:#fff;font-family:arial;font-weight:700;text-align:center;display:inline-block}ul.timeline[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{position:relative;height:3em;color:#888}ul.timeline[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]:before{content:\\\"\\\";display:inline-block;height:3em;width:1px;background:rgba(170,170,170,.6666666667);margin:0;padding:0;position:absolute;left:-11px;top:-.4em;z-index:-1}ul.timeline[_ngcontent-%COMP%]:before{content:\\\"\\\\25cf\\\";display:inline-block;margin:0;padding:0;position:relative;left:-1em;top:.1em;color:#aaa}ul.timeline[_ngcontent-%COMP%]:after{content:\\\"\\\\25cf\\\";display:inline-block;margin:0;padding:0;position:relative;left:-1em;top:-1em;color:#aaa}\"]\n  });\n  return SystemNotificationComponent;\n})();","map":null,"metadata":{},"sourceType":"module","externalDependencies":[]}