{"ast":null,"code":"import * as i0 from \"@angular/core\";\nimport * as i1 from \"@angular/router\";\nimport * as i2 from \"app/entities/event/service/event.service\";\nimport * as i3 from \"app/organisator/organisator.service\";\nimport * as i4 from \"app/general.service\";\nimport * as i5 from \"@angular/common\";\nimport * as i6 from \"@ng-bootstrap/ng-bootstrap\";\nimport * as i7 from \"../../../shared/language/translate.directive\";\nimport * as i8 from \"primeng/carousel\";\nimport * as i9 from \"primeng/api\";\nimport * as i10 from \"app/pipes/random-number.pipe\";\nimport * as i11 from \"app/pipes/totalTickets.pipe\";\nfunction EventSliderComponent_ng_container_0_ng_template_10_ng_container_12_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementContainerStart(0);\n    i0.ɵɵtext(1, \"\\n                        \");\n    i0.ɵɵelement(2, \"img\", 18);\n    i0.ɵɵtext(3, \"\\n                      \");\n    i0.ɵɵelementContainerEnd();\n  }\n  if (rf & 2) {\n    const event_r2 = i0.ɵɵnextContext().$implicit;\n    i0.ɵɵadvance(2);\n    i0.ɵɵpropertyInterpolate(\"alt\", event_r2.name);\n    i0.ɵɵproperty(\"src\", \"data:\" + event_r2.flyerContentType + \";base64,\" + event_r2.flyer, i0.ɵɵsanitizeUrl);\n  }\n}\nfunction EventSliderComponent_ng_container_0_ng_template_10_ng_template_63_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵtext(0, \"\\n                            \");\n    i0.ɵɵelementStart(1, \"span\", 19);\n    i0.ɵɵtext(2, \"\\n                              \");\n    i0.ɵɵelementStart(3, \"span\", 20);\n    i0.ɵɵtext(4, \"\\u2665\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵtext(5, \"\\u2665\\n                            \");\n    i0.ɵɵelementEnd();\n    i0.ɵɵtext(6, \"\\n                          \");\n  }\n  if (rf & 2) {\n    const fill_r7 = ctx.fill;\n    i0.ɵɵadvance(1);\n    i0.ɵɵclassProp(\"full\", fill_r7 === 100);\n    i0.ɵɵadvance(2);\n    i0.ɵɵstyleProp(\"width\", fill_r7, \"%\");\n  }\n}\nfunction EventSliderComponent_ng_container_0_ng_template_10_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r9 = i0.ɵɵgetCurrentView();\n    i0.ɵɵtext(0, \"\\n           \");\n    i0.ɵɵelementStart(1, \"a\", 4);\n    i0.ɵɵlistener(\"click\", function EventSliderComponent_ng_container_0_ng_template_10_Template_a_click_1_listener() {\n      const restoredCtx = i0.ɵɵrestoreView(_r9);\n      const event_r2 = restoredCtx.$implicit;\n      const ctx_r8 = i0.ɵɵnextContext(2);\n      return i0.ɵɵresetView(ctx_r8.goToEvent(event_r2.id));\n    });\n    i0.ɵɵtext(2, \"\\n            \");\n    i0.ɵɵelementStart(3, \"div\", 5);\n    i0.ɵɵtext(4, \"\\n                \");\n    i0.ɵɵelementStart(5, \"div\");\n    i0.ɵɵpipe(6, \"randomNumber\");\n    i0.ɵɵtext(7, \"\\n                    \");\n    i0.ɵɵelement(8, \"span\", 6);\n    i0.ɵɵtext(9, \"\\n                    \");\n    i0.ɵɵelementStart(10, \"div\", 7);\n    i0.ɵɵtext(11, \"\\n                      \");\n    i0.ɵɵtemplate(12, EventSliderComponent_ng_container_0_ng_template_10_ng_container_12_Template, 4, 2, \"ng-container\", 0);\n    i0.ɵɵtext(13, \"\\n                      \");\n    i0.ɵɵelementStart(14, \"div\", 8);\n    i0.ɵɵtext(15, \"\\n                        \");\n    i0.ɵɵelementStart(16, \"h5\", 9)(17, \"span\", 10);\n    i0.ɵɵtext(18);\n    i0.ɵɵelementEnd()();\n    i0.ɵɵtext(19, \"\\n                        \");\n    i0.ɵɵelementStart(20, \"h6\", 11);\n    i0.ɵɵtext(21);\n    i0.ɵɵelementEnd();\n    i0.ɵɵtext(22, \"\\n                        \");\n    i0.ɵɵelementStart(23, \"div\", 12);\n    i0.ɵɵtext(24, \"\\n                          \");\n    i0.ɵɵelement(25, \"hr\");\n    i0.ɵɵtext(26, \"\\n                          \");\n    i0.ɵɵelementStart(27, \"div\");\n    i0.ɵɵtext(28);\n    i0.ɵɵpipe(29, \"date\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵtext(30, \"\\n                          \");\n    i0.ɵɵelementStart(31, \"div\");\n    i0.ɵɵtext(32);\n    i0.ɵɵpipe(33, \"date\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵtext(34, \"\\n                          \");\n    i0.ɵɵelement(35, \"hr\");\n    i0.ɵɵtext(36, \"\\n                          \");\n    i0.ɵɵelementStart(37, \"p\");\n    i0.ɵɵtext(38, \"\\n                            \");\n    i0.ɵɵelementStart(39, \"dt\")(40, \"span\", 13);\n    i0.ɵɵtext(41, \"Placenumber\");\n    i0.ɵɵelementEnd()();\n    i0.ɵɵtext(42, \"\\n                            \");\n    i0.ɵɵelementStart(43, \"dd\");\n    i0.ɵɵtext(44, \"\\n                                \");\n    i0.ɵɵelementStart(45, \"span\");\n    i0.ɵɵtext(46);\n    i0.ɵɵpipe(47, \"async\");\n    i0.ɵɵpipe(48, \"totalTickets\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵtext(49, \"\\n                            \");\n    i0.ɵɵelementEnd();\n    i0.ɵɵtext(50, \"\\n                            \");\n    i0.ɵɵelementStart(51, \"dt\")(52, \"span\", 14);\n    i0.ɵɵtext(53, \"Price\");\n    i0.ɵɵelementEnd()();\n    i0.ɵɵtext(54, \"\\n                            \");\n    i0.ɵɵelementStart(55, \"dd\");\n    i0.ɵɵtext(56, \"\\n                                \");\n    i0.ɵɵelementStart(57, \"span\");\n    i0.ɵɵtext(58);\n    i0.ɵɵpipe(59, \"currency\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵtext(60, \"\\n                            \");\n    i0.ɵɵelementEnd();\n    i0.ɵɵtext(61, \"\\n                          \");\n    i0.ɵɵelementEnd();\n    i0.ɵɵtext(62, \"\\n\\n                          \");\n    i0.ɵɵtemplate(63, EventSliderComponent_ng_container_0_ng_template_10_ng_template_63_Template, 7, 4, \"ng-template\", null, 15, i0.ɵɵtemplateRefExtractor);\n    i0.ɵɵtext(65, \"\\n                            \");\n    i0.ɵɵelement(66, \"ngb-rating\", 16);\n    i0.ɵɵtext(67, \"\\n                            \");\n    i0.ɵɵelement(68, \"br\");\n    i0.ɵɵtext(69, \"\\n                            \");\n    i0.ɵɵelementStart(70, \"span\", 17);\n    i0.ɵɵtext(71, \"Total ratings:\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵtext(72);\n    i0.ɵɵelementEnd();\n    i0.ɵɵtext(73, \"\\n                        \");\n    i0.ɵɵelement(74, \"br\");\n    i0.ɵɵtext(75, \"\\n                      \");\n    i0.ɵɵelementEnd();\n    i0.ɵɵtext(76, \"\\n                    \");\n    i0.ɵɵelementEnd();\n    i0.ɵɵtext(77, \"\\n                  \");\n    i0.ɵɵelementEnd();\n    i0.ɵɵtext(78, \"\\n              \");\n    i0.ɵɵelementEnd();\n    i0.ɵɵtext(79, \"\\n           \");\n    i0.ɵɵelementEnd();\n    i0.ɵɵtext(80, \"\\n        \");\n  }\n  if (rf & 2) {\n    const event_r2 = ctx.$implicit;\n    const _r4 = i0.ɵɵreference(64);\n    const ctx_r1 = i0.ɵɵnextContext(2);\n    i0.ɵɵadvance(5);\n    i0.ɵɵclassMapInterpolate1(\"box_\", i0.ɵɵpipeBind1(6, 16, 4), \"\");\n    i0.ɵɵadvance(7);\n    i0.ɵɵproperty(\"ngIf\", event_r2.flyer);\n    i0.ɵɵadvance(6);\n    i0.ɵɵtextInterpolate(event_r2.name);\n    i0.ɵɵadvance(3);\n    i0.ɵɵtextInterpolate(event_r2.motto);\n    i0.ɵɵadvance(7);\n    i0.ɵɵtextInterpolate(i0.ɵɵpipeBind2(29, 18, event_r2.dateStart, \"medium\"));\n    i0.ɵɵadvance(4);\n    i0.ɵɵtextInterpolate(i0.ɵɵpipeBind2(33, 21, event_r2.dateEnd, \"medium\"));\n    i0.ɵɵadvance(14);\n    i0.ɵɵtextInterpolate2(\"\", i0.ɵɵpipeBind1(47, 24, i0.ɵɵpipeBind1(48, 26, event_r2.id)), \"/\", event_r2.placenumber, \"\");\n    i0.ɵɵadvance(12);\n    i0.ɵɵtextInterpolate(i0.ɵɵpipeBind1(59, 28, event_r2.price));\n    i0.ɵɵadvance(8);\n    i0.ɵɵproperty(\"rate\", ctx_r1.getAverage(event_r2.id))(\"starTemplate\", _r4)(\"readonly\", true)(\"max\", 5);\n    i0.ɵɵadvance(6);\n    i0.ɵɵtextInterpolate1(\" \", ctx_r1.getRatingsTotal(event_r2.id), \"\\n                        \");\n  }\n}\nfunction EventSliderComponent_ng_container_0_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementContainerStart(0);\n    i0.ɵɵtext(1, \"\\n    \");\n    i0.ɵɵelementStart(2, \"p-carousel\", 1);\n    i0.ɵɵtext(3, \"\\n        \");\n    i0.ɵɵelementStart(4, \"p-header\");\n    i0.ɵɵtext(5, \"\\n            \");\n    i0.ɵɵelementStart(6, \"h3\", 2);\n    i0.ɵɵtext(7, \"Event's\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵtext(8, \"\\n        \");\n    i0.ɵɵelementEnd();\n    i0.ɵɵtext(9, \"\\n        \");\n    i0.ɵɵtemplate(10, EventSliderComponent_ng_container_0_ng_template_10_Template, 81, 30, \"ng-template\", 3);\n    i0.ɵɵtext(11, \"\\n    \");\n    i0.ɵɵelementEnd();\n    i0.ɵɵtext(12, \"\\n\");\n    i0.ɵɵelementContainerEnd();\n  }\n  if (rf & 2) {\n    const ctx_r0 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(2);\n    i0.ɵɵproperty(\"value\", ctx_r0.events)(\"orientation\", ctx_r0.orientation)(\"autoplayInterval\", ctx_r0.autoplayInterval)(\"verticalViewPortHeight\", ctx_r0.verticalViewPortHeight)(\"circular\", ctx_r0.circular)(\"numVisible\", ctx_r0.numVisible)(\"numScroll\", ctx_r0.numScroll);\n  }\n}\nexport let EventSliderComponent = /*#__PURE__*/(() => {\n  class EventSliderComponent {\n    constructor(router, eventService, organisatorService, generalService) {\n      this.router = router;\n      this.eventService = eventService;\n      this.organisatorService = organisatorService;\n      this.generalService = generalService;\n      this.events = [];\n      this.orientation = 'horizontal';\n      this.numVisible = 3;\n      this.numScroll = 1;\n      this.circular = true;\n      this.verticalViewPortHeight = '600px';\n      this.autoplayInterval = 10000;\n      this.style = \"{ width: '1180px' }\";\n      this.loaded = false;\n      this.starEvents = [];\n      this.responsiveOptions = [];\n      this.responsiveOptions = [{\n        breakpoint: '1024px',\n        numVisible: 3,\n        numScroll: 3\n      }, {\n        breakpoint: '768px',\n        numVisible: 2,\n        numScroll: 2\n      }, {\n        breakpoint: '560px',\n        numVisible: 1,\n        numScroll: 1\n      }];\n    }\n    ngOnChanges(changes) {\n      if (changes['events'] !== undefined) {\n        this.events = changes['events'].currentValue;\n        this.events.forEach(element => {\n          this.organisatorService.findReservationsByEventId(element.id).subscribe(r => {\n            element.reservations = r.body;\n            if (element.reservations === null) {\n              element.reservations = [];\n            }\n            this.generalService.getEventStarRatingByEvent(element.id).subscribe(res => {\n              const ratings = res.body;\n              let total = 0;\n              ratings.forEach(el => {\n                total += el.stars;\n              });\n              let avg = total / ratings.length / 10 * 5;\n              if (ratings.length === 0) {\n                avg = 0;\n              }\n              this.starEvents.push({\n                event: element,\n                average: avg,\n                total: ratings.length\n              });\n              this.loaded = true;\n            });\n          });\n        });\n      }\n    }\n    goToEvent(eventId) {\n      this.router.navigate(['/events/' + eventId + '/view']);\n    }\n    getDate(eventId) {\n      let datecde = '';\n      this.eventService.find(eventId).subscribe(e => {\n        datecde = e.body.dateStart.format('YYYY-MM-DD hh:mm:ss');\n      });\n      return datecde;\n    }\n    // Average of the stars\n    getAverage(eventId) {\n      if (this.loaded) {\n        const se = this.starEvents.find(x => x.event.id === eventId);\n        return se.average;\n      }\n    }\n    getRatingsTotal(eventId) {\n      if (this.loaded) {\n        const se = this.starEvents.find(x => x.event.id === eventId);\n        return se.total;\n      }\n    }\n  }\n  EventSliderComponent.ɵfac = function EventSliderComponent_Factory(t) {\n    return new (t || EventSliderComponent)(i0.ɵɵdirectiveInject(i1.Router), i0.ɵɵdirectiveInject(i2.EventService), i0.ɵɵdirectiveInject(i3.OrganisatorService), i0.ɵɵdirectiveInject(i4.GeneralService));\n  };\n  EventSliderComponent.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n    type: EventSliderComponent,\n    selectors: [[\"jhi-event-slider\"]],\n    inputs: {\n      events: \"events\",\n      orientation: \"orientation\",\n      numVisible: \"numVisible\",\n      numScroll: \"numScroll\",\n      circular: \"circular\",\n      verticalViewPortHeight: \"verticalViewPortHeight\",\n      autoplayInterval: \"autoplayInterval\",\n      style: \"style\"\n    },\n    features: [i0.ɵɵNgOnChangesFeature],\n    decls: 2,\n    vars: 1,\n    consts: [[4, \"ngIf\"], [3, \"value\", \"orientation\", \"autoplayInterval\", \"verticalViewPortHeight\", \"circular\", \"numVisible\", \"numScroll\"], [\"jhiTranslate\", \"event_slider.events\"], [\"pTemplate\", \"item\"], [3, \"click\"], [1, \"container_box_slider\"], [1, \"black\"], [1, \"card\", \"content\"], [1, \"card-body\"], [1, \"card-title\", \"bold\"], [1, \"font-title-event\"], [1, \"card-subtitle\"], [1, \"card-text\"], [\"jhiTranslate\", \"event-detail.placenumber\"], [\"jhiTranslate\", \"event-detail.price\"], [\"t\", \"\"], [3, \"rate\", \"starTemplate\", \"readonly\", \"max\"], [\"jhiTranslate\", \"event_slider.total-ratings\"], [1, \"card-img-top\", \"card-img-event-slider\", 3, \"src\", \"alt\"], [1, \"heart\"], [1, \"half\"]],\n    template: function EventSliderComponent_Template(rf, ctx) {\n      if (rf & 1) {\n        i0.ɵɵtemplate(0, EventSliderComponent_ng_container_0_Template, 13, 7, \"ng-container\", 0);\n        i0.ɵɵtext(1, \"\\n\");\n      }\n      if (rf & 2) {\n        i0.ɵɵproperty(\"ngIf\", ctx.loaded);\n      }\n    },\n    dependencies: [i5.NgIf, i6.NgbRating, i7.TranslateDirective, i8.Carousel, i9.Header, i9.PrimeTemplate, i5.AsyncPipe, i5.CurrencyPipe, i5.DatePipe, i10.RandomNumberPipe, i11.TotalTicketsPipe],\n    styles: [\".event-card[_ngcontent-%COMP%]{margin:20px;width:350px;box-shadow:8px 9px 9px -1px #000}.card[_ngcontent-%COMP%]{position:relative;display:flex;flex-direction:column;min-width:0;word-wrap:break-word;background-color:#eee8d520;background-clip:border-box;border:none!important;border-radius:.25rem}.heart[_ngcontent-%COMP%]{position:relative;display:inline-block;font-size:3rem;color:#d3d3d3}.full[_ngcontent-%COMP%]{color:red}.half[_ngcontent-%COMP%]{position:absolute;display:inline-block;overflow:hidden;color:red}.container_box_slider[_ngcontent-%COMP%]{width:350px;margin:20px}.card-img-event-slider[_ngcontent-%COMP%]{max-width:340px;max-height:400px;margin:0 auto}.container_box_slider[_ngcontent-%COMP%]   .box_1[_ngcontent-%COMP%]{position:relative;height:950px;color:#fff;background:#111;display:flex;align-items:center;justify-content:center;width:100%}.container_box_slider[_ngcontent-%COMP%]   .box_1[_ngcontent-%COMP%]:before{content:\\\"\\\";position:absolute;top:0;left:0;width:100%;height:100%;background:linear-gradient(45deg,#ffbc00,#ff0058);filter:blur(30px)}.container_box_slider[_ngcontent-%COMP%]   .box_1[_ngcontent-%COMP%]:after{content:\\\"\\\";position:absolute;top:0;left:0;width:100%;height:100%;background:linear-gradient(45deg,#ffbc00,#ff0058)}.container_box_slider[_ngcontent-%COMP%]   .box_1[_ngcontent-%COMP%]   .black[_ngcontent-%COMP%]{position:absolute;inset:6px;background:rgba(0,0,0,.6);z-index:2}.container_box_slider[_ngcontent-%COMP%]   .box_2[_ngcontent-%COMP%]{position:relative;height:950px;color:#fff;background:#111;display:flex;align-items:center;justify-content:center;width:100%}.container_box_slider[_ngcontent-%COMP%]   .box_2[_ngcontent-%COMP%]:before{content:\\\"\\\";position:absolute;top:0;left:0;width:100%;height:100%;background:linear-gradient(45deg,#8eb92a,#001eff);filter:blur(30px)}.container_box_slider[_ngcontent-%COMP%]   .box_2[_ngcontent-%COMP%]:after{content:\\\"\\\";position:absolute;top:0;left:0;width:100%;height:100%;background:linear-gradient(45deg,#8eb92a,#001eff)}.container_box_slider[_ngcontent-%COMP%]   .box_2[_ngcontent-%COMP%]   .black[_ngcontent-%COMP%]{position:absolute;inset:6px;background:rgba(0,0,0,.6);z-index:2}.container_box_slider[_ngcontent-%COMP%]   .box_3[_ngcontent-%COMP%]{position:relative;height:950px;color:#fff;background:#111;display:flex;align-items:center;justify-content:center;width:100%}.container_box_slider[_ngcontent-%COMP%]   .box_3[_ngcontent-%COMP%]:before{content:\\\"\\\";position:absolute;top:0;left:0;width:100%;height:100%;background:linear-gradient(45deg,#b92a9c,#f2ff00);filter:blur(30px)}.container_box_slider[_ngcontent-%COMP%]   .box_3[_ngcontent-%COMP%]:after{content:\\\"\\\";position:absolute;top:0;left:0;width:100%;height:100%;background:linear-gradient(45deg,#b92a9c,#f2ff00)}.container_box_slider[_ngcontent-%COMP%]   .box_3[_ngcontent-%COMP%]   .black[_ngcontent-%COMP%]{position:absolute;inset:6px;background:rgba(0,0,0,.6);z-index:2}.container_box_slider[_ngcontent-%COMP%]   .box_4[_ngcontent-%COMP%]{position:relative;height:950px;color:#fff;background:#111;display:flex;align-items:center;justify-content:center;width:100%}.container_box_slider[_ngcontent-%COMP%]   .box_4[_ngcontent-%COMP%]:before{content:\\\"\\\";position:absolute;top:0;left:0;width:100%;height:100%;background:linear-gradient(45deg,#dc650a,#7700ff);filter:blur(30px)}.container_box_slider[_ngcontent-%COMP%]   .box_4[_ngcontent-%COMP%]:after{content:\\\"\\\";position:absolute;top:0;left:0;width:100%;height:100%;background:linear-gradient(45deg,#dc650a,#7700ff)}.container_box_slider[_ngcontent-%COMP%]   .box_4[_ngcontent-%COMP%]   .black[_ngcontent-%COMP%]{position:absolute;inset:6px;background:rgba(0,0,0,.6);z-index:2}.bold[_ngcontent-%COMP%]{font-weight:700}\"]\n  });\n  return EventSliderComponent;\n})();","map":null,"metadata":{},"sourceType":"module","externalDependencies":[]}