{"ast":null,"code":"import { MatTable } from \"@angular/material/table\";\nimport { Worksheet } from \"app/entities/worksheet/worksheet.model\";\nimport { EditRowBoxComponent } from \"./editrow-box.component\";\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"@angular/material/dialog\";\nimport * as i2 from \"app/entities/worksheet/service/worksheet.service\";\nimport * as i3 from \"../../shared/language/translate.directive\";\nimport * as i4 from \"@angular/material/table\";\nimport * as i5 from \"@angular/material/button\";\nimport * as i6 from \"@angular/common\";\nfunction OfferComponent_th_13_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"th\", 19)(1, \"span\", 20);\n    i0.ɵɵtext(2, \"Description\");\n    i0.ɵɵelementEnd()();\n  }\n}\nfunction OfferComponent_td_15_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"td\", 21);\n    i0.ɵɵtext(1);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const element_r15 = ctx.$implicit;\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate1(\" \", element_r15.description, \" \");\n  }\n}\nfunction OfferComponent_th_21_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"th\", 19)(1, \"span\", 22);\n    i0.ɵɵtext(2, \"Start\");\n    i0.ɵɵelementEnd()();\n  }\n}\nfunction OfferComponent_td_23_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"td\", 21);\n    i0.ɵɵtext(1);\n    i0.ɵɵpipe(2, \"date\");\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const element_r16 = ctx.$implicit;\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate1(\" \", i0.ɵɵpipeBind2(2, 1, element_r16.start, \"medium\"), \" \");\n  }\n}\nfunction OfferComponent_th_29_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"th\", 19)(1, \"span\", 23);\n    i0.ɵɵtext(2, \"End\");\n    i0.ɵɵelementEnd()();\n  }\n}\nfunction OfferComponent_td_31_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"td\", 21);\n    i0.ɵɵtext(1);\n    i0.ɵɵpipe(2, \"date\");\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const element_r17 = ctx.$implicit;\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate1(\" \", i0.ɵɵpipeBind2(2, 1, element_r17.end, \"medium\"), \" \");\n  }\n}\nfunction OfferComponent_th_37_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"th\", 19)(1, \"span\", 24);\n    i0.ɵɵtext(2, \"Cost's per hour\");\n    i0.ɵɵelementEnd()();\n  }\n}\nfunction OfferComponent_td_39_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"td\", 21);\n    i0.ɵɵtext(1);\n    i0.ɵɵpipe(2, \"currency\");\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const element_r18 = ctx.$implicit;\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate1(\" \", i0.ɵɵpipeBind1(2, 1, element_r18.costHour), \" \");\n  }\n}\nfunction OfferComponent_th_45_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"th\", 19)(1, \"span\", 25);\n    i0.ɵɵtext(2, \"Total cost's\");\n    i0.ɵɵelementEnd()();\n  }\n}\nfunction OfferComponent_td_47_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"td\", 21);\n    i0.ɵɵtext(1);\n    i0.ɵɵpipe(2, \"currency\");\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const element_r19 = ctx.$implicit;\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate1(\" \", i0.ɵɵpipeBind1(2, 1, element_r19.total), \" \");\n  }\n}\nfunction OfferComponent_th_53_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"th\", 19)(1, \"span\", 26);\n    i0.ɵɵtext(2, \"Action\");\n    i0.ɵɵelementEnd()();\n  }\n}\nfunction OfferComponent_td_55_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r22 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"td\", 27);\n    i0.ɵɵtext(1, \"\\n          \");\n    i0.ɵɵelementStart(2, \"a\", 28);\n    i0.ɵɵlistener(\"click\", function OfferComponent_td_55_Template_a_click_2_listener() {\n      const restoredCtx = i0.ɵɵrestoreView(_r22);\n      const element_r20 = restoredCtx.$implicit;\n      const ctx_r21 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r21.openDialog(\"Update\", element_r20));\n    });\n    i0.ɵɵelementStart(3, \"span\", 29);\n    i0.ɵɵtext(4, \"Edit\");\n    i0.ɵɵelementEnd()();\n    i0.ɵɵtext(5, \"\\n          \");\n    i0.ɵɵelementStart(6, \"a\", 30);\n    i0.ɵɵlistener(\"click\", function OfferComponent_td_55_Template_a_click_6_listener() {\n      const restoredCtx = i0.ɵɵrestoreView(_r22);\n      const element_r20 = restoredCtx.$implicit;\n      const ctx_r23 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r23.openDialog(\"Delete\", element_r20));\n    });\n    i0.ɵɵelementStart(7, \"span\", 31);\n    i0.ɵɵtext(8, \"Delete\");\n    i0.ɵɵelementEnd()();\n    i0.ɵɵtext(9, \"\\n        \");\n    i0.ɵɵelementEnd();\n  }\n}\nfunction OfferComponent_tr_58_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelement(0, \"tr\", 32);\n  }\n}\nfunction OfferComponent_tr_60_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelement(0, \"tr\", 33);\n  }\n}\nexport let OfferComponent = /*#__PURE__*/(() => {\n  class OfferComponent {\n    constructor(dialog, worksheetService) {\n      this.dialog = dialog;\n      this.worksheetService = worksheetService;\n      this.displayedColumns = ['description', 'start', 'end', 'costHour', 'total', 'action'];\n    }\n    ngOnInit() {\n      if (this.worksheets === null) {\n        this.worksheets = [];\n      }\n    }\n    openDialog(action, obj) {\n      obj.action = action;\n      const dialogRef = this.dialog.open(EditRowBoxComponent, {\n        width: '450px',\n        data: obj\n      });\n      dialogRef.afterClosed().subscribe(result => {\n        if (result.event === 'Add') {\n          this.addRowData(result.data);\n        } else if (result.event === 'Update') {\n          this.updateRowData(result.data);\n        } else if (result.event === 'Delete') {\n          this.deleteRowData(result.data);\n        }\n      });\n    }\n    addRowData(rowObj) {\n      const worksheet = new Worksheet();\n      worksheet.description = rowObj.description;\n      worksheet.start = rowObj.start;\n      worksheet.end = rowObj.end;\n      worksheet.costHour = rowObj.costHour;\n      worksheet.total = rowObj.total;\n      worksheet.userType = this.userType;\n      worksheet.billingType = this.billingType;\n      worksheet.user = this.user;\n      worksheet.event = this.event;\n      worksheet.product = this.product;\n      this.worksheetService.create(worksheet).subscribe();\n      this.worksheets.push({\n        description: rowObj.description,\n        start: rowObj.start,\n        end: rowObj.end,\n        costHour: rowObj.costHour,\n        total: rowObj.total\n      });\n      this.table.renderRows();\n    }\n    updateRowData(rowObj) {\n      this.worksheets = this.worksheets.filter(value => {\n        if (value.id === rowObj.id) {\n          this.worksheetService.find(rowObj.id).subscribe(res => {\n            const worksheet = res.body;\n            worksheet.description = rowObj.description;\n            worksheet.start = rowObj.start;\n            worksheet.end = rowObj.end;\n            worksheet.costHour = rowObj.costHour;\n            worksheet.total = rowObj.total;\n            this.worksheetService.update(worksheet).subscribe();\n            value.description = rowObj.description;\n            value.start = rowObj.start;\n            value.end = rowObj.end;\n            value.costHour = rowObj.costHour;\n            value.total = rowObj.total;\n          });\n        }\n        return true;\n      });\n    }\n    deleteRowData(rowObj) {\n      this.worksheetService.delete(rowObj.id).subscribe();\n      this.worksheets = this.worksheets.filter(value => {\n        return value.id !== rowObj.id;\n      });\n    }\n    getTotalCost() {\n      let sum = 0;\n      this.worksheets.forEach(sheet => {\n        sum += sheet.total;\n      });\n      return sum;\n    }\n  }\n  OfferComponent.ɵfac = function OfferComponent_Factory(t) {\n    return new (t || OfferComponent)(i0.ɵɵdirectiveInject(i1.MatDialog), i0.ɵɵdirectiveInject(i2.WorksheetService));\n  };\n  OfferComponent.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n    type: OfferComponent,\n    selectors: [[\"jhi-offer\"]],\n    viewQuery: function OfferComponent_Query(rf, ctx) {\n      if (rf & 1) {\n        i0.ɵɵviewQuery(MatTable, 7);\n      }\n      if (rf & 2) {\n        let _t;\n        i0.ɵɵqueryRefresh(_t = i0.ɵɵloadQuery()) && (ctx.table = _t.first);\n      }\n    },\n    inputs: {\n      worksheets: \"worksheets\",\n      userType: \"userType\",\n      event: \"event\",\n      product: \"product\",\n      user: \"user\",\n      billingType: \"billingType\"\n    },\n    decls: 73,\n    vars: 6,\n    consts: [[1, \"container\", \"text-center\"], [\"mat-button\", \"\", \"mat-flat-button\", \"\", \"color\", \"primary\", 1, \"add-button\", 3, \"click\"], [\"jhiTranslate\", \"offer.add-offer\"], [\"mat-table\", \"\", 1, \"my-table\", \"mat-elevation-z8\", 3, \"dataSource\"], [\"mytable\", \"\"], [\"matColumnDef\", \"description\"], [\"mat-header-cell\", \"\", 4, \"matHeaderCellDef\"], [\"mat-cell\", \"\", 4, \"matCellDef\"], [\"matColumnDef\", \"start\"], [\"matColumnDef\", \"end\"], [\"matColumnDef\", \"costHour\"], [\"matColumnDef\", \"total\"], [\"matColumnDef\", \"action\"], [\"mat-cell\", \"\", \"class\", \"action-link\", 4, \"matCellDef\"], [\"mat-header-row\", \"\", 4, \"matHeaderRowDef\"], [\"mat-row\", \"\", 4, \"matRowDef\", \"matRowDefColumns\"], [\"role\", \"alert\", 1, \"alert\", \"alert-info\"], [\"jhiTranslate\", \"offer.total-all-offerts\", 1, \"total-all-offerts\"], [1, \"total-all-offerts\"], [\"mat-header-cell\", \"\"], [\"jhiTranslate\", \"offer.description\"], [\"mat-cell\", \"\"], [\"jhiTranslate\", \"offer.start\"], [\"jhiTranslate\", \"offer.end\"], [\"jhiTranslate\", \"offer.costHour\"], [\"jhiTranslate\", \"offer.total\"], [\"jhiTranslate\", \"offer.action\"], [\"mat-cell\", \"\", 1, \"action-link\"], [\"role\", \"button\", 1, \"btn\", \"btn-primary\", 3, \"click\"], [\"jhiTranslate\", \"offer.edit\"], [\"role\", \"button\", 1, \"btn\", \"btn-info\", 3, \"click\"], [\"jhiTranslate\", \"offer.delete\"], [\"mat-header-row\", \"\"], [\"mat-row\", \"\"]],\n    template: function OfferComponent_Template(rf, ctx) {\n      if (rf & 1) {\n        i0.ɵɵelementStart(0, \"div\", 0);\n        i0.ɵɵtext(1, \"\\n\\n    \");\n        i0.ɵɵelementStart(2, \"button\", 1);\n        i0.ɵɵlistener(\"click\", function OfferComponent_Template_button_click_2_listener() {\n          return ctx.openDialog(\"Add\", {});\n        });\n        i0.ɵɵelementStart(3, \"span\", 2);\n        i0.ɵɵtext(4, \"Add offer\");\n        i0.ɵɵelementEnd()();\n        i0.ɵɵtext(5, \"\\n\\n    \");\n        i0.ɵɵelementStart(6, \"table\", 3, 4);\n        i0.ɵɵtext(8, \"\\n\\n      \");\n        i0.ɵɵtext(9, \"\\n\\n\\n    \");\n        i0.ɵɵtext(10, \"\\n    \");\n        i0.ɵɵelementContainerStart(11, 5);\n        i0.ɵɵtext(12, \"\\n        \");\n        i0.ɵɵtemplate(13, OfferComponent_th_13_Template, 3, 0, \"th\", 6);\n        i0.ɵɵtext(14, \"\\n        \");\n        i0.ɵɵtemplate(15, OfferComponent_td_15_Template, 2, 1, \"td\", 7);\n        i0.ɵɵtext(16, \"\\n    \");\n        i0.ɵɵelementContainerEnd();\n        i0.ɵɵtext(17, \"\\nx\\n    \");\n        i0.ɵɵtext(18, \"\\n    \");\n        i0.ɵɵelementContainerStart(19, 8);\n        i0.ɵɵtext(20, \"\\n        \");\n        i0.ɵɵtemplate(21, OfferComponent_th_21_Template, 3, 0, \"th\", 6);\n        i0.ɵɵtext(22, \"\\n        \");\n        i0.ɵɵtemplate(23, OfferComponent_td_23_Template, 3, 4, \"td\", 7);\n        i0.ɵɵtext(24, \"\\n    \");\n        i0.ɵɵelementContainerEnd();\n        i0.ɵɵtext(25, \"\\n\\n    \");\n        i0.ɵɵtext(26, \"\\n    \");\n        i0.ɵɵelementContainerStart(27, 9);\n        i0.ɵɵtext(28, \"\\n        \");\n        i0.ɵɵtemplate(29, OfferComponent_th_29_Template, 3, 0, \"th\", 6);\n        i0.ɵɵtext(30, \"\\n        \");\n        i0.ɵɵtemplate(31, OfferComponent_td_31_Template, 3, 4, \"td\", 7);\n        i0.ɵɵtext(32, \"\\n    \");\n        i0.ɵɵelementContainerEnd();\n        i0.ɵɵtext(33, \"\\n\\n    \");\n        i0.ɵɵtext(34, \"\\n    \");\n        i0.ɵɵelementContainerStart(35, 10);\n        i0.ɵɵtext(36, \"\\n        \");\n        i0.ɵɵtemplate(37, OfferComponent_th_37_Template, 3, 0, \"th\", 6);\n        i0.ɵɵtext(38, \"\\n        \");\n        i0.ɵɵtemplate(39, OfferComponent_td_39_Template, 3, 3, \"td\", 7);\n        i0.ɵɵtext(40, \"\\n    \");\n        i0.ɵɵelementContainerEnd();\n        i0.ɵɵtext(41, \"\\n\\n    \");\n        i0.ɵɵtext(42, \"\\n    \");\n        i0.ɵɵelementContainerStart(43, 11);\n        i0.ɵɵtext(44, \"\\n        \");\n        i0.ɵɵtemplate(45, OfferComponent_th_45_Template, 3, 0, \"th\", 6);\n        i0.ɵɵtext(46, \"\\n        \");\n        i0.ɵɵtemplate(47, OfferComponent_td_47_Template, 3, 3, \"td\", 7);\n        i0.ɵɵtext(48, \"\\n    \");\n        i0.ɵɵelementContainerEnd();\n        i0.ɵɵtext(49, \"\\n\\n\\n      \");\n        i0.ɵɵtext(50, \"\\n      \");\n        i0.ɵɵelementContainerStart(51, 12);\n        i0.ɵɵtext(52, \"\\n        \");\n        i0.ɵɵtemplate(53, OfferComponent_th_53_Template, 3, 0, \"th\", 6);\n        i0.ɵɵtext(54, \"\\n        \");\n        i0.ɵɵtemplate(55, OfferComponent_td_55_Template, 10, 0, \"td\", 13);\n        i0.ɵɵtext(56, \"\\n      \");\n        i0.ɵɵelementContainerEnd();\n        i0.ɵɵtext(57, \"\\n\\n      \");\n        i0.ɵɵtemplate(58, OfferComponent_tr_58_Template, 1, 0, \"tr\", 14);\n        i0.ɵɵtext(59, \"\\n      \");\n        i0.ɵɵtemplate(60, OfferComponent_tr_60_Template, 1, 0, \"tr\", 15);\n        i0.ɵɵtext(61, \"\\n    \");\n        i0.ɵɵelementEnd();\n        i0.ɵɵtext(62, \"\\n\\n    \");\n        i0.ɵɵelementStart(63, \"div\", 16);\n        i0.ɵɵtext(64, \"\\n        \");\n        i0.ɵɵelementStart(65, \"span\", 17);\n        i0.ɵɵtext(66, \"Total of all offert's:\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(67, \"span\", 18);\n        i0.ɵɵtext(68);\n        i0.ɵɵpipe(69, \"currency\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵtext(70, \"\\n      \");\n        i0.ɵɵelementEnd();\n        i0.ɵɵtext(71, \"\\n  \");\n        i0.ɵɵelementEnd();\n        i0.ɵɵtext(72, \"\\n\");\n      }\n      if (rf & 2) {\n        i0.ɵɵadvance(6);\n        i0.ɵɵproperty(\"dataSource\", ctx.worksheets);\n        i0.ɵɵadvance(52);\n        i0.ɵɵproperty(\"matHeaderRowDef\", ctx.displayedColumns);\n        i0.ɵɵadvance(2);\n        i0.ɵɵproperty(\"matRowDefColumns\", ctx.displayedColumns);\n        i0.ɵɵadvance(8);\n        i0.ɵɵtextInterpolate(i0.ɵɵpipeBind1(69, 4, ctx.getTotalCost()));\n      }\n    },\n    dependencies: [i3.TranslateDirective, i4.MatTable, i4.MatHeaderCellDef, i4.MatHeaderRowDef, i4.MatColumnDef, i4.MatCellDef, i4.MatRowDef, i4.MatHeaderCell, i4.MatCell, i4.MatHeaderRow, i4.MatRow, i5.MatButton, i6.CurrencyPipe, i6.DatePipe],\n    styles: [\".add-button[_ngcontent-%COMP%]{float:right;margin-bottom:5px}.total-all-offerts[_ngcontent-%COMP%]{font-weight:700}\"]\n  });\n  return OfferComponent;\n})();","map":null,"metadata":{},"sourceType":"module","externalDependencies":[]}