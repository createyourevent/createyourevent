{"ast":null,"code":"import * as i0 from \"@angular/core\";\nimport * as i1 from \"app/organisator/organisator.service\";\nimport * as i2 from \"app/general.service\";\nimport * as i3 from \"../event.service\";\nimport * as i4 from \"@angular/common\";\nimport * as i5 from \"../../../shared/language/translate.directive\";\nfunction CalculationEventComponent_ng_container_0_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementContainerStart(0);\n    i0.ɵɵtext(1, \"\\n    \");\n    i0.ɵɵelementStart(2, \"div\", 1);\n    i0.ɵɵtext(3, \"\\n        \");\n    i0.ɵɵelementStart(4, \"div\", 2);\n    i0.ɵɵtext(5, \"\\n            \");\n    i0.ɵɵelementStart(6, \"div\", 3);\n    i0.ɵɵtext(7, \"\\n                \");\n    i0.ɵɵelementStart(8, \"div\", 2);\n    i0.ɵɵtext(9, \"\\n                    \");\n    i0.ɵɵelementStart(10, \"div\", 4);\n    i0.ɵɵtext(11, \"\\n                        \");\n    i0.ɵɵelementStart(12, \"span\", 5);\n    i0.ɵɵtext(13, \"Maximum number of participants\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵtext(14, \"\\n                    \");\n    i0.ɵɵelementEnd();\n    i0.ɵɵtext(15, \"\\n                    \");\n    i0.ɵɵelementStart(16, \"div\", 4);\n    i0.ɵɵtext(17, \"\\n                        \");\n    i0.ɵɵelementStart(18, \"span\", 6);\n    i0.ɵɵtext(19, \"Entrance fee\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵtext(20, \"\\n                    \");\n    i0.ɵɵelementEnd();\n    i0.ɵɵtext(21, \"\\n                    \");\n    i0.ɵɵelementStart(22, \"div\", 4);\n    i0.ɵɵtext(23, \"\\n                        \");\n    i0.ɵɵelementStart(24, \"span\", 7);\n    i0.ɵɵtext(25, \"Total entrance fee\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵtext(26, \"\\n                    \");\n    i0.ɵɵelementEnd();\n    i0.ɵɵtext(27, \"\\n                \");\n    i0.ɵɵelementEnd();\n    i0.ɵɵtext(28, \"\\n                \");\n    i0.ɵɵelementStart(29, \"div\", 2);\n    i0.ɵɵtext(30, \"\\n                    \");\n    i0.ɵɵelementStart(31, \"div\", 4);\n    i0.ɵɵtext(32);\n    i0.ɵɵelementEnd();\n    i0.ɵɵtext(33, \"\\n                    \");\n    i0.ɵɵelementStart(34, \"div\", 4);\n    i0.ɵɵtext(35);\n    i0.ɵɵpipe(36, \"currency\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵtext(37, \"\\n                    \");\n    i0.ɵɵelementStart(38, \"div\", 4);\n    i0.ɵɵtext(39);\n    i0.ɵɵpipe(40, \"currency\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵtext(41, \"\\n                \");\n    i0.ɵɵelementEnd();\n    i0.ɵɵtext(42, \"\\n            \");\n    i0.ɵɵelementEnd();\n    i0.ɵɵtext(43, \"\\n        \");\n    i0.ɵɵelementEnd();\n    i0.ɵɵtext(44, \"\\n        \");\n    i0.ɵɵelement(45, \"hr\");\n    i0.ɵɵtext(46, \"\\n        \");\n    i0.ɵɵelementStart(47, \"div\", 2);\n    i0.ɵɵtext(48, \"\\n            \");\n    i0.ɵɵelementStart(49, \"div\", 3);\n    i0.ɵɵtext(50, \"\\n                \");\n    i0.ɵɵelementStart(51, \"div\", 2);\n    i0.ɵɵtext(52, \"\\n                    \");\n    i0.ɵɵelementStart(53, \"div\", 4);\n    i0.ɵɵtext(54, \"\\n                        \");\n    i0.ɵɵelementStart(55, \"span\", 8);\n    i0.ɵɵtext(56, \"Cost of the products\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵtext(57, \"\\n                    \");\n    i0.ɵɵelementEnd();\n    i0.ɵɵtext(58, \"\\n                    \");\n    i0.ɵɵelementStart(59, \"div\", 4);\n    i0.ɵɵtext(60, \"\\n                        \");\n    i0.ɵɵelementStart(61, \"span\", 9);\n    i0.ɵɵtext(62, \"Cost of the products\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵtext(63, \"\\n                    \");\n    i0.ɵɵelementEnd();\n    i0.ɵɵtext(64, \"\\n                    \");\n    i0.ɵɵtext(65, \"\\n                    \");\n    i0.ɵɵelementStart(66, \"div\", 4);\n    i0.ɵɵtext(67, \"\\n                        \");\n    i0.ɵɵelementStart(68, \"span\", 10);\n    i0.ɵɵtext(69, \"Total of all costs\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵtext(70, \"\\n                    \");\n    i0.ɵɵelementEnd();\n    i0.ɵɵtext(71, \"\\n                \");\n    i0.ɵɵelementEnd();\n    i0.ɵɵtext(72, \"\\n                \");\n    i0.ɵɵelementStart(73, \"div\", 2);\n    i0.ɵɵtext(74, \"\\n                    \");\n    i0.ɵɵelementStart(75, \"div\", 4);\n    i0.ɵɵtext(76);\n    i0.ɵɵpipe(77, \"currency\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵtext(78, \"\\n                    \");\n    i0.ɵɵtext(79, \"\\n                    \");\n    i0.ɵɵelementStart(80, \"div\", 4);\n    i0.ɵɵtext(81);\n    i0.ɵɵpipe(82, \"currency\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵtext(83, \"\\n                    \");\n    i0.ɵɵelementStart(84, \"div\", 4);\n    i0.ɵɵtext(85);\n    i0.ɵɵpipe(86, \"currency\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵtext(87, \"\\n                \");\n    i0.ɵɵelementEnd();\n    i0.ɵɵtext(88, \"\\n            \");\n    i0.ɵɵelementEnd();\n    i0.ɵɵtext(89, \"\\n        \");\n    i0.ɵɵelementEnd();\n    i0.ɵɵtext(90, \"\\n        \");\n    i0.ɵɵelement(91, \"hr\");\n    i0.ɵɵtext(92, \"\\n        \");\n    i0.ɵɵelementStart(93, \"div\", 2);\n    i0.ɵɵtext(94, \"\\n            \");\n    i0.ɵɵelementStart(95, \"div\", 3);\n    i0.ɵɵtext(96, \"\\n                \");\n    i0.ɵɵelementStart(97, \"div\", 2);\n    i0.ɵɵtext(98, \"\\n                    \");\n    i0.ɵɵelementStart(99, \"div\", 4);\n    i0.ɵɵtext(100, \"\\n                        \");\n    i0.ɵɵelementStart(101, \"span\", 11);\n    i0.ɵɵtext(102, \"Entries currently booked\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵtext(103, \"\\n                    \");\n    i0.ɵɵelementEnd();\n    i0.ɵɵtext(104, \"\\n                    \");\n    i0.ɵɵelementStart(105, \"div\", 4);\n    i0.ɵɵtext(106, \"\\n                        \");\n    i0.ɵɵelementStart(107, \"span\", 6);\n    i0.ɵɵtext(108, \"Entrance fee\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵtext(109, \"\\n                    \");\n    i0.ɵɵelementEnd();\n    i0.ɵɵtext(110, \"\\n                    \");\n    i0.ɵɵelementStart(111, \"div\", 4);\n    i0.ɵɵtext(112, \"\\n                        \");\n    i0.ɵɵelementStart(113, \"span\", 12);\n    i0.ɵɵtext(114, \"Current earnings from the booked entries\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵtext(115, \"\\n                    \");\n    i0.ɵɵelementEnd();\n    i0.ɵɵtext(116, \"\\n                \");\n    i0.ɵɵelementEnd();\n    i0.ɵɵtext(117, \"\\n                \");\n    i0.ɵɵelementStart(118, \"div\", 2);\n    i0.ɵɵtext(119, \"\\n                    \");\n    i0.ɵɵelementStart(120, \"div\", 4);\n    i0.ɵɵtext(121);\n    i0.ɵɵelementEnd();\n    i0.ɵɵtext(122, \"\\n                    \");\n    i0.ɵɵelementStart(123, \"div\", 4);\n    i0.ɵɵtext(124);\n    i0.ɵɵpipe(125, \"currency\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵtext(126, \"\\n                    \");\n    i0.ɵɵelementStart(127, \"div\", 4);\n    i0.ɵɵtext(128);\n    i0.ɵɵpipe(129, \"currency\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵtext(130, \"\\n                \");\n    i0.ɵɵelementEnd();\n    i0.ɵɵtext(131, \"\\n            \");\n    i0.ɵɵelementEnd();\n    i0.ɵɵtext(132, \"\\n        \");\n    i0.ɵɵelementEnd();\n    i0.ɵɵtext(133, \"\\n        \");\n    i0.ɵɵelement(134, \"hr\");\n    i0.ɵɵtext(135, \"\\n        \");\n    i0.ɵɵelementStart(136, \"div\", 2);\n    i0.ɵɵtext(137, \"\\n            \");\n    i0.ɵɵelementStart(138, \"div\", 3);\n    i0.ɵɵtext(139, \"\\n                \");\n    i0.ɵɵelementStart(140, \"div\", 2);\n    i0.ɵɵtext(141, \"\\n                    \");\n    i0.ɵɵelementStart(142, \"div\", 4);\n    i0.ɵɵtext(143, \"\\n                        \");\n    i0.ɵɵelementStart(144, \"span\", 13);\n    i0.ɵɵtext(145, \"Total revenue\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵtext(146, \"\\n                    \");\n    i0.ɵɵelementEnd();\n    i0.ɵɵtext(147, \"\\n                    \");\n    i0.ɵɵelementStart(148, \"div\", 4);\n    i0.ɵɵtext(149, \"\\n                        \");\n    i0.ɵɵelementStart(150, \"span\", 14);\n    i0.ɵɵtext(151, \"Total expenses\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵtext(152, \"\\n                    \");\n    i0.ɵɵelementEnd();\n    i0.ɵɵtext(153, \"\\n                    \");\n    i0.ɵɵelementStart(154, \"div\", 4);\n    i0.ɵɵtext(155, \"\\n                        \");\n    i0.ɵɵelementStart(156, \"span\", 15);\n    i0.ɵɵtext(157, \"Total\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵtext(158, \"\\n                    \");\n    i0.ɵɵelementEnd();\n    i0.ɵɵtext(159, \"\\n                \");\n    i0.ɵɵelementEnd();\n    i0.ɵɵtext(160, \"\\n                \");\n    i0.ɵɵelementStart(161, \"div\", 2);\n    i0.ɵɵtext(162, \"\\n                    \");\n    i0.ɵɵelementStart(163, \"div\", 4);\n    i0.ɵɵtext(164);\n    i0.ɵɵpipe(165, \"currency\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵtext(166, \"\\n                    \");\n    i0.ɵɵelementStart(167, \"div\", 4);\n    i0.ɵɵtext(168);\n    i0.ɵɵpipe(169, \"currency\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵtext(170, \"\\n                    \");\n    i0.ɵɵelementStart(171, \"div\", 4);\n    i0.ɵɵtext(172);\n    i0.ɵɵpipe(173, \"currency\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵtext(174, \"\\n                \");\n    i0.ɵɵelementEnd();\n    i0.ɵɵtext(175, \"\\n            \");\n    i0.ɵɵelementEnd();\n    i0.ɵɵtext(176, \"\\n        \");\n    i0.ɵɵelementEnd();\n    i0.ɵɵtext(177, \"\\n    \");\n    i0.ɵɵelementEnd();\n    i0.ɵɵtext(178, \"\\n\");\n    i0.ɵɵelementContainerEnd();\n  }\n  if (rf & 2) {\n    const ctx_r0 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(32);\n    i0.ɵɵtextInterpolate1(\"\\n                        \", ctx_r0.jhiEvent.placenumber, \"\\n                    \");\n    i0.ɵɵadvance(3);\n    i0.ɵɵtextInterpolate1(\"\\n                        \", i0.ɵɵpipeBind1(36, 12, ctx_r0.jhiEvent.price), \"\\n                    \");\n    i0.ɵɵadvance(4);\n    i0.ɵɵtextInterpolate1(\"\\n                        \", i0.ɵɵpipeBind1(40, 14, (ctx_r0.jhiEvent == null ? null : ctx_r0.jhiEvent.placenumber) * (ctx_r0.jhiEvent == null ? null : ctx_r0.jhiEvent.price)), \"\\n                    \");\n    i0.ɵɵadvance(37);\n    i0.ɵɵtextInterpolate1(\"\\n                        \", i0.ɵɵpipeBind1(77, 16, ctx_r0.calculateTotalProducts()), \"\\n                    \");\n    i0.ɵɵadvance(5);\n    i0.ɵɵtextInterpolate1(\"\\n                        \", i0.ɵɵpipeBind1(82, 18, ctx_r0.calculateTotalServices()), \"\\n                    \");\n    i0.ɵɵadvance(4);\n    i0.ɵɵtextInterpolate1(\"\\n                        \", i0.ɵɵpipeBind1(86, 20, ctx_r0.calculateTotalWorksheets() + ctx_r0.calculateTotalProducts() + ctx_r0.calculateTotalServices()), \"\\n                    \");\n    i0.ɵɵadvance(36);\n    i0.ɵɵtextInterpolate1(\"\\n                        \", ctx_r0.getNumberReservations(), \"\\n                    \");\n    i0.ɵɵadvance(3);\n    i0.ɵɵtextInterpolate1(\"\\n                        \", i0.ɵɵpipeBind1(125, 22, ctx_r0.jhiEvent.price), \"\\n                    \");\n    i0.ɵɵadvance(4);\n    i0.ɵɵtextInterpolate1(\"\\n                        \", i0.ɵɵpipeBind1(129, 24, ctx_r0.getNumberReservations() * ctx_r0.jhiEvent.price), \"\\n                    \");\n    i0.ɵɵadvance(36);\n    i0.ɵɵtextInterpolate1(\"\\n                        \", i0.ɵɵpipeBind1(165, 26, ctx_r0.jhiEvent.placenumber * ctx_r0.jhiEvent.price), \"\\n                    \");\n    i0.ɵɵadvance(4);\n    i0.ɵɵtextInterpolate1(\"\\n                        \", i0.ɵɵpipeBind1(169, 28, ctx_r0.calculateTotalWorksheets() + ctx_r0.calculateTotalProducts()), \"\\n                    \");\n    i0.ɵɵadvance(4);\n    i0.ɵɵtextInterpolate1(\"\\n                        \", i0.ɵɵpipeBind1(173, 30, ctx_r0.jhiEvent.placenumber * ctx_r0.jhiEvent.price - (ctx_r0.calculateTotalWorksheets() + ctx_r0.calculateTotalProducts() + ctx_r0.calculateTotalServices())), \"\\n                    \");\n  }\n}\nexport let CalculationEventComponent = /*#__PURE__*/(() => {\n  class CalculationEventComponent {\n    constructor(organisatorService, generalService, eventUserService) {\n      this.organisatorService = organisatorService;\n      this.generalService = generalService;\n      this.eventUserService = eventUserService;\n      this.productorders = [];\n      this.servicesorders = [];\n      this.soldTickets = 0;\n    }\n    ngOnChanges(changes) {\n      if (changes['jhiEvent']) {\n        this.organisatorService.findReservationsByEventId(this.jhiEvent?.id).subscribe(reservationsRes => {\n          this.reservations = reservationsRes.body;\n        });\n        this.generalService.findTicketsByEventId(this.jhiEvent.id).subscribe(t => {\n          const tickets = t.body;\n          tickets.forEach(ticket => {\n            this.soldTickets += ticket.amount;\n          });\n        });\n        this.generalService.findWorksheetsByEventId(this.jhiEvent?.id).subscribe(worksheetsRes => {\n          this.worksheets = worksheetsRes.body;\n        });\n        this.eventUserService.getProductsWithEventId(this.jhiEvent?.id).subscribe(eventProductOrderRes => {\n          this.productorders = eventProductOrderRes.body;\n        });\n        this.generalService.getAllEventServiceMapsOrdersByEventId(this.jhiEvent.id).subscribe(res => {\n          this.servicesorders = res.body;\n        });\n      }\n    }\n    getNumberReservations() {\n      return this.soldTickets;\n    }\n    calculateTotalProducts() {\n      let total = 0;\n      if (this.productorders.length === 0) {\n        return 0;\n      }\n      this.productorders.forEach(productorder => {\n        total += productorder.total;\n      });\n      return total;\n    }\n    calculateTotalServices() {\n      let total = 0;\n      if (this.servicesorders.length === 0) {\n        return 0;\n      }\n      this.servicesorders.forEach(serviceorder => {\n        total += serviceorder.total;\n      });\n      return total;\n    }\n    calculateTotalReservations() {\n      return this.jhiEvent?.price * this.reservations.length;\n    }\n    calculateTotalWorksheets() {\n      let total = 0;\n      this.worksheets.forEach(worksheet => {\n        total += worksheet.total;\n      });\n      return total;\n    }\n  }\n  CalculationEventComponent.ɵfac = function CalculationEventComponent_Factory(t) {\n    return new (t || CalculationEventComponent)(i0.ɵɵdirectiveInject(i1.OrganisatorService), i0.ɵɵdirectiveInject(i2.GeneralService), i0.ɵɵdirectiveInject(i3.EventService));\n  };\n  CalculationEventComponent.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n    type: CalculationEventComponent,\n    selectors: [[\"jhi-calculation-event\"]],\n    inputs: {\n      jhiEvent: \"jhiEvent\"\n    },\n    features: [i0.ɵɵNgOnChangesFeature],\n    decls: 2,\n    vars: 1,\n    consts: [[4, \"ngIf\"], [1, \"container-fluid\"], [1, \"row\"], [1, \"col-md-12\"], [1, \"col-md-4\"], [\"jhiTranslate\", \"calculation-event.max-num-of-participants\", 1, \"bold\"], [\"jhiTranslate\", \"calculation-event.entrance-fee\", 1, \"bold\"], [\"jhiTranslate\", \"calculation-event.total-entrance-fee\", 1, \"bold\"], [\"jhiTranslate\", \"calculation-event.costs-products\", 1, \"bold\"], [\"jhiTranslate\", \"calculation-event.costs-services\", 1, \"bold\"], [\"jhiTranslate\", \"calculation-event.total-costs\", 1, \"bold\"], [\"jhiTranslate\", \"calculation-event.entries-currently-booked\", 1, \"bold\"], [\"jhiTranslate\", \"calculation-event.earnings-from-booked-entries\", 1, \"bold\"], [\"jhiTranslate\", \"calculation-event.total-revenue\", 1, \"bold\"], [\"jhiTranslate\", \"calculation-event.total-expenses\", 1, \"bold\"], [\"jhiTranslate\", \"calculation-event.total\", 1, \"bold\"]],\n    template: function CalculationEventComponent_Template(rf, ctx) {\n      if (rf & 1) {\n        i0.ɵɵtemplate(0, CalculationEventComponent_ng_container_0_Template, 179, 32, \"ng-container\", 0);\n        i0.ɵɵtext(1, \"\\n\");\n      }\n      if (rf & 2) {\n        i0.ɵɵproperty(\"ngIf\", ctx.jhiEvent && ctx.reservations && ctx.worksheets && ctx.productorders);\n      }\n    },\n    dependencies: [i4.NgIf, i5.TranslateDirective, i4.CurrencyPipe],\n    styles: [\".bold[_ngcontent-%COMP%]{font-weight:700}\"]\n  });\n  return CalculationEventComponent;\n})();","map":null,"metadata":{},"sourceType":"module","externalDependencies":[]}