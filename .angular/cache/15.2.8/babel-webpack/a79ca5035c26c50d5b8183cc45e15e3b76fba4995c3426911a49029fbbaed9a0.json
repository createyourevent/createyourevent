{"ast":null,"code":"import _defineProperty from \"/home/ceo/mmmm/createyourevent/node_modules/@babel/runtime/helpers/esm/defineProperty.js\";\nimport * as dayjs from \"dayjs\";\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"../general.service\";\nimport * as i2 from \"app/google-geocode.service\";\nimport * as i3 from \"../shared/language/translate.directive\";\nimport * as i4 from \"../shared/auth/has-any-authority.directive\";\nimport * as i5 from \"primeng/gmap\";\nimport * as i6 from \"@angular/material/tabs\";\nimport * as i7 from \"./distance/distance.component\";\nimport * as i8 from \"./distance-shop/distance-shop.component\";\nimport * as i9 from \"./distance-service/distance-service.component\";\nfunction MapComponent_ng_template_4_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵtext(0, \"\\n        \");\n    i0.ɵɵelementStart(1, \"span\", 12);\n    i0.ɵɵtext(2, \"Map\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵtext(3, \"\\n      \");\n  }\n}\nfunction MapComponent_ng_container_53_ng_template_4_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵtext(0, \"\\n          \");\n    i0.ɵɵelementStart(1, \"span\", 16);\n    i0.ɵɵtext(2, \"Show event's or shop's with distance\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵtext(3, \"\\n        \");\n  }\n}\nfunction MapComponent_ng_container_53_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementContainerStart(0);\n    i0.ɵɵtext(1, \"\\n      \");\n    i0.ɵɵelementStart(2, \"mat-tab\");\n    i0.ɵɵtext(3, \"\\n        \");\n    i0.ɵɵtemplate(4, MapComponent_ng_container_53_ng_template_4_Template, 4, 0, \"ng-template\", 0);\n    i0.ɵɵtext(5, \"\\n        \");\n    i0.ɵɵelementStart(6, \"div\", 13);\n    i0.ɵɵtext(7, \"\\n            \");\n    i0.ɵɵelementStart(8, \"div\", 1);\n    i0.ɵɵtext(9, \"\\n                \");\n    i0.ɵɵelementStart(10, \"div\", 14);\n    i0.ɵɵtext(11, \"\\n                    \");\n    i0.ɵɵelementStart(12, \"div\", 15);\n    i0.ɵɵtext(13, \"\\n                        \");\n    i0.ɵɵelement(14, \"jhi-distance\");\n    i0.ɵɵtext(15, \"\\n                    \");\n    i0.ɵɵelementEnd();\n    i0.ɵɵtext(16, \"\\n                \");\n    i0.ɵɵelementEnd();\n    i0.ɵɵtext(17, \"\\n                \");\n    i0.ɵɵelementStart(18, \"div\", 14);\n    i0.ɵɵtext(19, \"\\n                  \");\n    i0.ɵɵelementStart(20, \"div\", 15);\n    i0.ɵɵtext(21, \"\\n                    \");\n    i0.ɵɵelement(22, \"jhi-distance-shop\");\n    i0.ɵɵtext(23, \"\\n                  \");\n    i0.ɵɵelementEnd();\n    i0.ɵɵtext(24, \"\\n              \");\n    i0.ɵɵelementEnd();\n    i0.ɵɵtext(25, \"\\n              \");\n    i0.ɵɵelementStart(26, \"div\", 14);\n    i0.ɵɵtext(27, \"\\n                \");\n    i0.ɵɵelementStart(28, \"div\", 15);\n    i0.ɵɵtext(29, \"\\n                  \");\n    i0.ɵɵelement(30, \"jhi-distance-service\");\n    i0.ɵɵtext(31, \"\\n                \");\n    i0.ɵɵelementEnd();\n    i0.ɵɵtext(32, \"\\n            \");\n    i0.ɵɵelementEnd();\n    i0.ɵɵtext(33, \"\\n            \");\n    i0.ɵɵelementEnd();\n    i0.ɵɵtext(34, \"\\n        \");\n    i0.ɵɵelementEnd();\n    i0.ɵɵtext(35, \"\\n\\n      \");\n    i0.ɵɵelementEnd();\n    i0.ɵɵtext(36, \"\\n    \");\n    i0.ɵɵelementContainerEnd();\n  }\n}\nconst _c0 = function () {\n  return {\n    \"width\": \"100%\",\n    \"height\": \"720px\"\n  };\n};\nexport class MapComponent {\n  constructor(generalService, googleGeocoderService) {\n    _defineProperty(this, \"generalService\", void 0);\n    _defineProperty(this, \"googleGeocoderService\", void 0);\n    _defineProperty(this, \"options\", void 0);\n    _defineProperty(this, \"events\", void 0);\n    _defineProperty(this, \"shops\", void 0);\n    _defineProperty(this, \"services\", void 0);\n    _defineProperty(this, \"overlays\", []);\n    this.generalService = generalService;\n    this.googleGeocoderService = googleGeocoderService;\n  }\n  ngOnInit() {\n    this.options = {\n      center: {\n        lat: 47.7233,\n        lng: 8.66429\n      },\n      zoom: 12\n    };\n    const now = dayjs();\n    this.generalService.findEventsByPrivateOrPublicAndActiveTrueAndDateEndAfter(now).subscribe(res => {\n      this.events = res.body;\n      this.events.forEach(e => {\n        const marker = new google.maps.Marker({\n          position: {\n            lat: Number(e.location?.address?.lat),\n            lng: Number(e.location?.address?.lng)\n          },\n          title: e.name,\n          icon: {\n            url: 'http://maps.google.com/mapfiles/ms/icons/purple-dot.png'\n          }\n        });\n        marker.addListener('click', function () {\n          window.location.href = '/events/' + e.id + '/view';\n        });\n        this.overlays.push(marker);\n      });\n    });\n    this.generalService.findShopByActiveTrueAndActiveOwnerTrue().subscribe(res => {\n      this.shops = res.body;\n      this.shops.forEach(e => {\n        let pos;\n        const queryParam = e.address.replace(' ', '+');\n        this.googleGeocoderService.getFromAddress(queryParam).subscribe(re => {\n          const geocoder = re.body['results'];\n          const geometry = geocoder[0].geometry;\n          pos = new google.maps.LatLng(geometry.location.lat, geometry.location.lng);\n          const marker = new google.maps.Marker({\n            position: {\n              lat: pos.lat(),\n              lng: pos.lng()\n            },\n            title: e.name,\n            icon: {\n              url: 'http://maps.google.com/mapfiles/ms/icons/red-dot.png'\n            }\n          });\n          marker.addListener('click', function () {\n            window.location.href = '/supplier/shop/' + e.id + '/overview';\n          });\n          this.overlays.push(marker);\n        });\n      });\n    });\n    this.generalService.getServicesWhereActiveAndActiveOwnerTrue().subscribe(res => {\n      this.services = res.body;\n      this.services.forEach(e => {\n        let pos;\n        const queryParam = e.address.replace(' ', '+');\n        this.googleGeocoderService.getFromAddress(queryParam).subscribe(re => {\n          const geocoder = re.body['results'];\n          const geometry = geocoder[0].geometry;\n          pos = new google.maps.LatLng(geometry.location.lat, geometry.location.lng);\n          const marker = new google.maps.Marker({\n            position: {\n              lat: pos.lat(),\n              lng: pos.lng()\n            },\n            title: e.name,\n            icon: {\n              url: 'http://maps.google.com/mapfiles/ms/icons/blue-dot.png'\n            }\n          });\n          marker.addListener('click', function () {\n            window.location.href = '/events/' + e.id + '/view';\n          });\n          this.overlays.push(marker);\n        });\n      });\n    });\n  }\n  ngOnDestroy() {}\n}\n_defineProperty(MapComponent, \"\\u0275fac\", function MapComponent_Factory(t) {\n  return new (t || MapComponent)(i0.ɵɵdirectiveInject(i1.GeneralService), i0.ɵɵdirectiveInject(i2.GoogleGeocodeService));\n});\n_defineProperty(MapComponent, \"\\u0275cmp\", /*@__PURE__*/i0.ɵɵdefineComponent({\n  type: MapComponent,\n  selectors: [[\"jhi-map\"]],\n  decls: 56,\n  vars: 6,\n  consts: [[\"mat-tab-label\", \"\"], [1, \"row\"], [1, \"col-md-1\"], [\"src\", \"http://maps.google.com/mapfiles/ms/icons/purple-dot.png\"], [1, \"col-md-11\"], [\"jhiTranslate\", \"map.events\"], [\"src\", \"http://maps.google.com/mapfiles/ms/icons/red-dot.png\"], [\"jhiTranslate\", \"map.shops\"], [\"src\", \"http://maps.google.com/mapfiles/ms/icons/blue-dot.png\"], [\"jhiTranslate\", \"map.services\"], [3, \"options\", \"overlays\"], [4, \"jhiHasAnyAuthority\"], [\"jhiTranslate\", \"map.map\"], [1, \"container-fluid\"], [1, \"col-md-12\"], [1, \"box\"], [\"jhiTranslate\", \"map.distance\"]],\n  template: function MapComponent_Template(rf, ctx) {\n    if (rf & 1) {\n      i0.ɵɵelementStart(0, \"mat-tab-group\");\n      i0.ɵɵtext(1, \"\\n    \");\n      i0.ɵɵelementStart(2, \"mat-tab\");\n      i0.ɵɵtext(3, \"\\n      \");\n      i0.ɵɵtemplate(4, MapComponent_ng_template_4_Template, 4, 0, \"ng-template\", 0);\n      i0.ɵɵtext(5, \"\\n      \");\n      i0.ɵɵelementStart(6, \"div\", 1);\n      i0.ɵɵtext(7, \"\\n            \");\n      i0.ɵɵelementStart(8, \"div\", 2);\n      i0.ɵɵtext(9, \"\\n                \");\n      i0.ɵɵelement(10, \"img\", 3);\n      i0.ɵɵtext(11, \"\\n            \");\n      i0.ɵɵelementEnd();\n      i0.ɵɵtext(12, \"\\n            \");\n      i0.ɵɵelementStart(13, \"div\", 4);\n      i0.ɵɵtext(14, \"\\n                \");\n      i0.ɵɵelementStart(15, \"span\", 5);\n      i0.ɵɵtext(16, \"Events\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵtext(17, \"\\n            \");\n      i0.ɵɵelementEnd();\n      i0.ɵɵtext(18, \"\\n        \");\n      i0.ɵɵelementEnd();\n      i0.ɵɵtext(19, \"\\n        \");\n      i0.ɵɵelementStart(20, \"div\", 1);\n      i0.ɵɵtext(21, \"\\n            \");\n      i0.ɵɵelementStart(22, \"div\", 2);\n      i0.ɵɵtext(23, \"\\n                \");\n      i0.ɵɵelement(24, \"img\", 6);\n      i0.ɵɵtext(25, \"\\n            \");\n      i0.ɵɵelementEnd();\n      i0.ɵɵtext(26, \"\\n            \");\n      i0.ɵɵelementStart(27, \"div\", 4);\n      i0.ɵɵtext(28, \"\\n                \");\n      i0.ɵɵelementStart(29, \"span\", 7);\n      i0.ɵɵtext(30, \"Shops\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵtext(31, \"\\n            \");\n      i0.ɵɵelementEnd();\n      i0.ɵɵtext(32, \"\\n        \");\n      i0.ɵɵelementEnd();\n      i0.ɵɵtext(33, \"\\n        \");\n      i0.ɵɵelementStart(34, \"div\", 1);\n      i0.ɵɵtext(35, \"\\n            \");\n      i0.ɵɵelementStart(36, \"div\", 2);\n      i0.ɵɵtext(37, \"\\n                \");\n      i0.ɵɵelement(38, \"img\", 8);\n      i0.ɵɵtext(39, \"\\n            \");\n      i0.ɵɵelementEnd();\n      i0.ɵɵtext(40, \"\\n            \");\n      i0.ɵɵelementStart(41, \"div\", 4);\n      i0.ɵɵtext(42, \"\\n                \");\n      i0.ɵɵelementStart(43, \"span\", 9);\n      i0.ɵɵtext(44, \"Services\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵtext(45, \"\\n            \");\n      i0.ɵɵelementEnd();\n      i0.ɵɵtext(46, \"\\n        \");\n      i0.ɵɵelementEnd();\n      i0.ɵɵtext(47, \"\\n        \");\n      i0.ɵɵelement(48, \"hr\");\n      i0.ɵɵtext(49, \"\\n        \");\n      i0.ɵɵelement(50, \"p-gmap\", 10);\n      i0.ɵɵtext(51, \"\\n      \");\n      i0.ɵɵelementEnd();\n      i0.ɵɵtext(52, \"\\n\\n    \");\n      i0.ɵɵtemplate(53, MapComponent_ng_container_53_Template, 37, 0, \"ng-container\", 11);\n      i0.ɵɵtext(54, \"\\n\\n\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵtext(55, \"\\n\");\n    }\n    if (rf & 2) {\n      i0.ɵɵadvance(50);\n      i0.ɵɵstyleMap(i0.ɵɵpureFunction0(5, _c0));\n      i0.ɵɵproperty(\"options\", ctx.options)(\"overlays\", ctx.overlays);\n      i0.ɵɵadvance(3);\n      i0.ɵɵproperty(\"jhiHasAnyAuthority\", \"ROLE_USER\");\n    }\n  },\n  dependencies: [i3.TranslateDirective, i4.HasAnyAuthorityDirective, i5.GMap, i6.MatTabGroup, i6.MatTabLabel, i6.MatTab, i7.DistanceComponent, i8.DistanceShopComponent, i9.DistanceServiceComponent],\n  styles: [\"\\n/*# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IiIsInNvdXJjZVJvb3QiOiIifQ== */\"]\n}));","map":{"version":3,"mappings":"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","names":["dayjs","i0","MapComponent","constructor","generalService","googleGeocoderService","ngOnInit","options","center","lat","lng","zoom","now","findEventsByPrivateOrPublicAndActiveTrueAndDateEndAfter","subscribe","res","events","body","forEach","e","marker","google","maps","Marker","position","Number","location","address","title","name","icon","url","addListener","window","href","id","overlays","push","findShopByActiveTrueAndActiveOwnerTrue","shops","pos","queryParam","replace","getFromAddress","re","geocoder","geometry","LatLng","getServicesWhereActiveAndActiveOwnerTrue","services","ngOnDestroy","selectors","decls","vars","consts","template"],"sourceRoot":"","sources":["/home/ceo/mmmm/createyourevent/src/main/webapp/app/map/map.component.ts","/home/ceo/mmmm/createyourevent/src/main/webapp/app/map/map.component.html"],"sourcesContent":["import { OnDestroy, Component, OnInit } from '@angular/core';\nimport { GeneralService } from '../general.service';\nimport { GoogleGeocodeService } from 'app/google-geocode.service';\nimport * as dayjs from \"dayjs\";\nimport { ICreateYourEventService } from 'app/entities/create-your-event-service/create-your-event-service.model';\nimport { IEvent } from 'app/entities/event/event.model';\nimport { IShop } from 'app/entities/shop/shop.model';\n\n@Component({\n  selector: 'jhi-map',\n  templateUrl: './map.component.html',\n  styleUrls: ['map.component.scss']\n})\nexport class MapComponent implements OnInit, OnDestroy {\n  options: any;\n  events!: IEvent[];\n  shops!: IShop[];\n  services!: ICreateYourEventService[];\n  overlays: any[] = [];\n\n  constructor(private generalService: GeneralService, private googleGeocoderService: GoogleGeocodeService) {}\n\n  ngOnInit(): void {\n    this.options = {\n      center: { lat: 47.7233, lng: 8.66429 },\n      zoom: 12\n    };\n\n    const now = dayjs();\n    this.generalService.findEventsByPrivateOrPublicAndActiveTrueAndDateEndAfter(now).subscribe(res => {\n      this.events = res.body!;\n\n      this.events.forEach(e => {\n        const marker = new google.maps.Marker({\n          position: { lat: Number(e.location?.address?.lat!), lng: Number(e.location?.address?.lng!) },\n          title: e.name,\n          icon: {\n            url: 'http://maps.google.com/mapfiles/ms/icons/purple-dot.png'\n          }\n        });\n        marker.addListener('click', function(): void {\n          window.location.href = '/events/' + e.id + '/view';\n        });\n        this.overlays.push(marker);\n      });\n    });\n\n    this.generalService.findShopByActiveTrueAndActiveOwnerTrue().subscribe(res => {\n      this.shops = res.body!;\n\n      this.shops.forEach(e => {\n        let pos: google.maps.LatLng;\n        const queryParam = e.address!.replace(' ', '+');\n        this.googleGeocoderService.getFromAddress(queryParam).subscribe((re: any) => {\n          const geocoder = re.body!['results'];\n          const geometry = geocoder[0].geometry;\n          pos = new google.maps.LatLng(geometry.location.lat, geometry.location.lng);\n\n          const marker = new google.maps.Marker({\n            position: { lat: pos.lat(), lng: pos.lng() },\n            title: e.name,\n            icon: {\n              url: 'http://maps.google.com/mapfiles/ms/icons/red-dot.png'\n            }\n          });\n          marker.addListener('click', function(): void {\n            window.location.href = '/supplier/shop/' + e.id + '/overview';\n          });\n          this.overlays.push(marker);\n        });\n      });\n    });\n\n    this.generalService.getServicesWhereActiveAndActiveOwnerTrue().subscribe(res => {\n      this.services = res.body!;\n\n      this.services.forEach(e => {\n        let pos: google.maps.LatLng;\n        const queryParam = e.address!.replace(' ', '+');\n        this.googleGeocoderService.getFromAddress(queryParam).subscribe((re: any) => {\n          const geocoder = re.body!['results'];\n          const geometry = geocoder[0].geometry;\n          pos = new google.maps.LatLng(geometry.location.lat, geometry.location.lng);\n\n          const marker = new google.maps.Marker({\n            position: { lat: pos.lat(), lng: pos.lng() },\n            title: e.name,\n            icon: {\n              url: 'http://maps.google.com/mapfiles/ms/icons/blue-dot.png'\n            }\n          });\n          marker.addListener('click', function(): void {\n            window.location.href = '/events/' + e.id + '/view';\n          });\n          this.overlays.push(marker);\n        });\n      });\n    });\n  }\n\n  ngOnDestroy(): void {}\n}\n","<mat-tab-group>\n    <mat-tab>\n      <ng-template mat-tab-label>\n        <span jhiTranslate=\"map.map\">Map</span>\n      </ng-template>\n      <div class=\"row\">\n            <div class=\"col-md-1\">\n                <img src=\"http://maps.google.com/mapfiles/ms/icons/purple-dot.png\"/>\n            </div>\n            <div class=\"col-md-11\">\n                <span jhiTranslate=\"map.events\">Events</span>\n            </div>\n        </div>\n        <div class=\"row\">\n            <div class=\"col-md-1\">\n                <img src=\"http://maps.google.com/mapfiles/ms/icons/red-dot.png\"/>\n            </div>\n            <div class=\"col-md-11\">\n                <span jhiTranslate=\"map.shops\">Shops</span>\n            </div>\n        </div>\n        <div class=\"row\">\n            <div class=\"col-md-1\">\n                <img src=\"http://maps.google.com/mapfiles/ms/icons/blue-dot.png\"/>\n            </div>\n            <div class=\"col-md-11\">\n                <span jhiTranslate=\"map.services\">Services</span>\n            </div>\n        </div>\n        <hr/>\n        <p-gmap [options]=\"options\" [style]=\"{'width':'100%','height':'720px'}\" [overlays]=\"overlays\"></p-gmap>\n      </mat-tab>\n\n    <ng-container *jhiHasAnyAuthority=\"'ROLE_USER'\">\n      <mat-tab>\n        <ng-template mat-tab-label>\n          <span jhiTranslate=\"map.distance\">Show event's or shop's with distance</span>\n        </ng-template>\n        <div class=\"container-fluid\">\n            <div class=\"row\">\n                <div class=\"col-md-12\">\n                    <div class=\"box\">\n                        <jhi-distance></jhi-distance>\n                    </div>\n                </div>\n                <div class=\"col-md-12\">\n                  <div class=\"box\">\n                    <jhi-distance-shop></jhi-distance-shop>\n                  </div>\n              </div>\n              <div class=\"col-md-12\">\n                <div class=\"box\">\n                  <jhi-distance-service></jhi-distance-service>\n                </div>\n            </div>\n            </div>\n        </div>\n\n      </mat-tab>\n    </ng-container>\n\n</mat-tab-group>\n"]},"metadata":{},"sourceType":"module","externalDependencies":[]}