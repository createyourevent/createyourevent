{"ast":null,"code":"import _defineProperty from \"/home/ceo/mmmm/createyourevent/node_modules/@babel/runtime/helpers/esm/defineProperty.js\";\nimport { MatTable } from \"@angular/material/table\";\nimport { Worksheet } from \"app/entities/worksheet/worksheet.model\";\nimport { EditRowBoxComponent } from \"./editrow-box.component\";\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"@angular/material/dialog\";\nimport * as i2 from \"app/entities/worksheet/service/worksheet.service\";\nimport * as i3 from \"../../shared/language/translate.directive\";\nimport * as i4 from \"@angular/material/table\";\nimport * as i5 from \"@angular/material/button\";\nimport * as i6 from \"@angular/common\";\nfunction OfferComponent_th_13_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"th\", 19)(1, \"span\", 20);\n    i0.ɵɵtext(2, \"Description\");\n    i0.ɵɵelementEnd()();\n  }\n}\nfunction OfferComponent_td_15_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"td\", 21);\n    i0.ɵɵtext(1);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const element_r15 = ctx.$implicit;\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate1(\" \", element_r15.description, \" \");\n  }\n}\nfunction OfferComponent_th_21_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"th\", 19)(1, \"span\", 22);\n    i0.ɵɵtext(2, \"Start\");\n    i0.ɵɵelementEnd()();\n  }\n}\nfunction OfferComponent_td_23_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"td\", 21);\n    i0.ɵɵtext(1);\n    i0.ɵɵpipe(2, \"date\");\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const element_r16 = ctx.$implicit;\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate1(\" \", i0.ɵɵpipeBind2(2, 1, element_r16.start, \"medium\"), \" \");\n  }\n}\nfunction OfferComponent_th_29_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"th\", 19)(1, \"span\", 23);\n    i0.ɵɵtext(2, \"End\");\n    i0.ɵɵelementEnd()();\n  }\n}\nfunction OfferComponent_td_31_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"td\", 21);\n    i0.ɵɵtext(1);\n    i0.ɵɵpipe(2, \"date\");\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const element_r17 = ctx.$implicit;\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate1(\" \", i0.ɵɵpipeBind2(2, 1, element_r17.end, \"medium\"), \" \");\n  }\n}\nfunction OfferComponent_th_37_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"th\", 19)(1, \"span\", 24);\n    i0.ɵɵtext(2, \"Cost's per hour\");\n    i0.ɵɵelementEnd()();\n  }\n}\nfunction OfferComponent_td_39_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"td\", 21);\n    i0.ɵɵtext(1);\n    i0.ɵɵpipe(2, \"currency\");\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const element_r18 = ctx.$implicit;\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate1(\" \", i0.ɵɵpipeBind1(2, 1, element_r18.costHour), \" \");\n  }\n}\nfunction OfferComponent_th_45_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"th\", 19)(1, \"span\", 25);\n    i0.ɵɵtext(2, \"Total cost's\");\n    i0.ɵɵelementEnd()();\n  }\n}\nfunction OfferComponent_td_47_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"td\", 21);\n    i0.ɵɵtext(1);\n    i0.ɵɵpipe(2, \"currency\");\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const element_r19 = ctx.$implicit;\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate1(\" \", i0.ɵɵpipeBind1(2, 1, element_r19.total), \" \");\n  }\n}\nfunction OfferComponent_th_53_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"th\", 19)(1, \"span\", 26);\n    i0.ɵɵtext(2, \"Action\");\n    i0.ɵɵelementEnd()();\n  }\n}\nfunction OfferComponent_td_55_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r22 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"td\", 27);\n    i0.ɵɵtext(1, \"\\n          \");\n    i0.ɵɵelementStart(2, \"a\", 28);\n    i0.ɵɵlistener(\"click\", function OfferComponent_td_55_Template_a_click_2_listener() {\n      const restoredCtx = i0.ɵɵrestoreView(_r22);\n      const element_r20 = restoredCtx.$implicit;\n      const ctx_r21 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r21.openDialog(\"Update\", element_r20));\n    });\n    i0.ɵɵelementStart(3, \"span\", 29);\n    i0.ɵɵtext(4, \"Edit\");\n    i0.ɵɵelementEnd()();\n    i0.ɵɵtext(5, \"\\n          \");\n    i0.ɵɵelementStart(6, \"a\", 30);\n    i0.ɵɵlistener(\"click\", function OfferComponent_td_55_Template_a_click_6_listener() {\n      const restoredCtx = i0.ɵɵrestoreView(_r22);\n      const element_r20 = restoredCtx.$implicit;\n      const ctx_r23 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r23.openDialog(\"Delete\", element_r20));\n    });\n    i0.ɵɵelementStart(7, \"span\", 31);\n    i0.ɵɵtext(8, \"Delete\");\n    i0.ɵɵelementEnd()();\n    i0.ɵɵtext(9, \"\\n        \");\n    i0.ɵɵelementEnd();\n  }\n}\nfunction OfferComponent_tr_58_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelement(0, \"tr\", 32);\n  }\n}\nfunction OfferComponent_tr_60_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelement(0, \"tr\", 33);\n  }\n}\nexport class OfferComponent {\n  constructor(dialog, worksheetService) {\n    _defineProperty(this, \"dialog\", void 0);\n    _defineProperty(this, \"worksheetService\", void 0);\n    _defineProperty(this, \"displayedColumns\", ['description', 'start', 'end', 'costHour', 'total', 'action']);\n    _defineProperty(this, \"worksheets\", void 0);\n    _defineProperty(this, \"userType\", void 0);\n    _defineProperty(this, \"event\", void 0);\n    _defineProperty(this, \"product\", void 0);\n    _defineProperty(this, \"user\", void 0);\n    _defineProperty(this, \"billingType\", void 0);\n    _defineProperty(this, \"table\", void 0);\n    this.dialog = dialog;\n    this.worksheetService = worksheetService;\n  }\n  ngOnInit() {\n    if (this.worksheets === null) {\n      this.worksheets = [];\n    }\n  }\n  openDialog(action, obj) {\n    obj.action = action;\n    const dialogRef = this.dialog.open(EditRowBoxComponent, {\n      width: '450px',\n      data: obj\n    });\n    dialogRef.afterClosed().subscribe(result => {\n      if (result.event === 'Add') {\n        this.addRowData(result.data);\n      } else if (result.event === 'Update') {\n        this.updateRowData(result.data);\n      } else if (result.event === 'Delete') {\n        this.deleteRowData(result.data);\n      }\n    });\n  }\n  addRowData(rowObj) {\n    const worksheet = new Worksheet();\n    worksheet.description = rowObj.description;\n    worksheet.start = rowObj.start;\n    worksheet.end = rowObj.end;\n    worksheet.costHour = rowObj.costHour;\n    worksheet.total = rowObj.total;\n    worksheet.userType = this.userType;\n    worksheet.billingType = this.billingType;\n    worksheet.user = this.user;\n    worksheet.event = this.event;\n    worksheet.product = this.product;\n    this.worksheetService.create(worksheet).subscribe();\n    this.worksheets.push({\n      description: rowObj.description,\n      start: rowObj.start,\n      end: rowObj.end,\n      costHour: rowObj.costHour,\n      total: rowObj.total\n    });\n    this.table.renderRows();\n  }\n  updateRowData(rowObj) {\n    this.worksheets = this.worksheets.filter(value => {\n      if (value.id === rowObj.id) {\n        this.worksheetService.find(rowObj.id).subscribe(res => {\n          const worksheet = res.body;\n          worksheet.description = rowObj.description;\n          worksheet.start = rowObj.start;\n          worksheet.end = rowObj.end;\n          worksheet.costHour = rowObj.costHour;\n          worksheet.total = rowObj.total;\n          this.worksheetService.update(worksheet).subscribe();\n          value.description = rowObj.description;\n          value.start = rowObj.start;\n          value.end = rowObj.end;\n          value.costHour = rowObj.costHour;\n          value.total = rowObj.total;\n        });\n      }\n      return true;\n    });\n  }\n  deleteRowData(rowObj) {\n    this.worksheetService.delete(rowObj.id).subscribe();\n    this.worksheets = this.worksheets.filter(value => {\n      return value.id !== rowObj.id;\n    });\n  }\n  getTotalCost() {\n    let sum = 0;\n    this.worksheets.forEach(sheet => {\n      sum += sheet.total;\n    });\n    return sum;\n  }\n}\n_defineProperty(OfferComponent, \"\\u0275fac\", function OfferComponent_Factory(t) {\n  return new (t || OfferComponent)(i0.ɵɵdirectiveInject(i1.MatDialog), i0.ɵɵdirectiveInject(i2.WorksheetService));\n});\n_defineProperty(OfferComponent, \"\\u0275cmp\", /*@__PURE__*/i0.ɵɵdefineComponent({\n  type: OfferComponent,\n  selectors: [[\"jhi-offer\"]],\n  viewQuery: function OfferComponent_Query(rf, ctx) {\n    if (rf & 1) {\n      i0.ɵɵviewQuery(MatTable, 7);\n    }\n    if (rf & 2) {\n      let _t;\n      i0.ɵɵqueryRefresh(_t = i0.ɵɵloadQuery()) && (ctx.table = _t.first);\n    }\n  },\n  inputs: {\n    worksheets: \"worksheets\",\n    userType: \"userType\",\n    event: \"event\",\n    product: \"product\",\n    user: \"user\",\n    billingType: \"billingType\"\n  },\n  decls: 73,\n  vars: 6,\n  consts: [[1, \"container\", \"text-center\"], [\"mat-button\", \"\", \"mat-flat-button\", \"\", \"color\", \"primary\", 1, \"add-button\", 3, \"click\"], [\"jhiTranslate\", \"offer.add-offer\"], [\"mat-table\", \"\", 1, \"my-table\", \"mat-elevation-z8\", 3, \"dataSource\"], [\"mytable\", \"\"], [\"matColumnDef\", \"description\"], [\"mat-header-cell\", \"\", 4, \"matHeaderCellDef\"], [\"mat-cell\", \"\", 4, \"matCellDef\"], [\"matColumnDef\", \"start\"], [\"matColumnDef\", \"end\"], [\"matColumnDef\", \"costHour\"], [\"matColumnDef\", \"total\"], [\"matColumnDef\", \"action\"], [\"mat-cell\", \"\", \"class\", \"action-link\", 4, \"matCellDef\"], [\"mat-header-row\", \"\", 4, \"matHeaderRowDef\"], [\"mat-row\", \"\", 4, \"matRowDef\", \"matRowDefColumns\"], [\"role\", \"alert\", 1, \"alert\", \"alert-info\"], [\"jhiTranslate\", \"offer.total-all-offerts\", 1, \"total-all-offerts\"], [1, \"total-all-offerts\"], [\"mat-header-cell\", \"\"], [\"jhiTranslate\", \"offer.description\"], [\"mat-cell\", \"\"], [\"jhiTranslate\", \"offer.start\"], [\"jhiTranslate\", \"offer.end\"], [\"jhiTranslate\", \"offer.costHour\"], [\"jhiTranslate\", \"offer.total\"], [\"jhiTranslate\", \"offer.action\"], [\"mat-cell\", \"\", 1, \"action-link\"], [\"role\", \"button\", 1, \"btn\", \"btn-primary\", 3, \"click\"], [\"jhiTranslate\", \"offer.edit\"], [\"role\", \"button\", 1, \"btn\", \"btn-info\", 3, \"click\"], [\"jhiTranslate\", \"offer.delete\"], [\"mat-header-row\", \"\"], [\"mat-row\", \"\"]],\n  template: function OfferComponent_Template(rf, ctx) {\n    if (rf & 1) {\n      i0.ɵɵelementStart(0, \"div\", 0);\n      i0.ɵɵtext(1, \"\\n\\n    \");\n      i0.ɵɵelementStart(2, \"button\", 1);\n      i0.ɵɵlistener(\"click\", function OfferComponent_Template_button_click_2_listener() {\n        return ctx.openDialog(\"Add\", {});\n      });\n      i0.ɵɵelementStart(3, \"span\", 2);\n      i0.ɵɵtext(4, \"Add offer\");\n      i0.ɵɵelementEnd()();\n      i0.ɵɵtext(5, \"\\n\\n    \");\n      i0.ɵɵelementStart(6, \"table\", 3, 4);\n      i0.ɵɵtext(8, \"\\n\\n      \");\n      i0.ɵɵtext(9, \"\\n\\n\\n    \");\n      i0.ɵɵtext(10, \"\\n    \");\n      i0.ɵɵelementContainerStart(11, 5);\n      i0.ɵɵtext(12, \"\\n        \");\n      i0.ɵɵtemplate(13, OfferComponent_th_13_Template, 3, 0, \"th\", 6);\n      i0.ɵɵtext(14, \"\\n        \");\n      i0.ɵɵtemplate(15, OfferComponent_td_15_Template, 2, 1, \"td\", 7);\n      i0.ɵɵtext(16, \"\\n    \");\n      i0.ɵɵelementContainerEnd();\n      i0.ɵɵtext(17, \"\\nx\\n    \");\n      i0.ɵɵtext(18, \"\\n    \");\n      i0.ɵɵelementContainerStart(19, 8);\n      i0.ɵɵtext(20, \"\\n        \");\n      i0.ɵɵtemplate(21, OfferComponent_th_21_Template, 3, 0, \"th\", 6);\n      i0.ɵɵtext(22, \"\\n        \");\n      i0.ɵɵtemplate(23, OfferComponent_td_23_Template, 3, 4, \"td\", 7);\n      i0.ɵɵtext(24, \"\\n    \");\n      i0.ɵɵelementContainerEnd();\n      i0.ɵɵtext(25, \"\\n\\n    \");\n      i0.ɵɵtext(26, \"\\n    \");\n      i0.ɵɵelementContainerStart(27, 9);\n      i0.ɵɵtext(28, \"\\n        \");\n      i0.ɵɵtemplate(29, OfferComponent_th_29_Template, 3, 0, \"th\", 6);\n      i0.ɵɵtext(30, \"\\n        \");\n      i0.ɵɵtemplate(31, OfferComponent_td_31_Template, 3, 4, \"td\", 7);\n      i0.ɵɵtext(32, \"\\n    \");\n      i0.ɵɵelementContainerEnd();\n      i0.ɵɵtext(33, \"\\n\\n    \");\n      i0.ɵɵtext(34, \"\\n    \");\n      i0.ɵɵelementContainerStart(35, 10);\n      i0.ɵɵtext(36, \"\\n        \");\n      i0.ɵɵtemplate(37, OfferComponent_th_37_Template, 3, 0, \"th\", 6);\n      i0.ɵɵtext(38, \"\\n        \");\n      i0.ɵɵtemplate(39, OfferComponent_td_39_Template, 3, 3, \"td\", 7);\n      i0.ɵɵtext(40, \"\\n    \");\n      i0.ɵɵelementContainerEnd();\n      i0.ɵɵtext(41, \"\\n\\n    \");\n      i0.ɵɵtext(42, \"\\n    \");\n      i0.ɵɵelementContainerStart(43, 11);\n      i0.ɵɵtext(44, \"\\n        \");\n      i0.ɵɵtemplate(45, OfferComponent_th_45_Template, 3, 0, \"th\", 6);\n      i0.ɵɵtext(46, \"\\n        \");\n      i0.ɵɵtemplate(47, OfferComponent_td_47_Template, 3, 3, \"td\", 7);\n      i0.ɵɵtext(48, \"\\n    \");\n      i0.ɵɵelementContainerEnd();\n      i0.ɵɵtext(49, \"\\n\\n\\n      \");\n      i0.ɵɵtext(50, \"\\n      \");\n      i0.ɵɵelementContainerStart(51, 12);\n      i0.ɵɵtext(52, \"\\n        \");\n      i0.ɵɵtemplate(53, OfferComponent_th_53_Template, 3, 0, \"th\", 6);\n      i0.ɵɵtext(54, \"\\n        \");\n      i0.ɵɵtemplate(55, OfferComponent_td_55_Template, 10, 0, \"td\", 13);\n      i0.ɵɵtext(56, \"\\n      \");\n      i0.ɵɵelementContainerEnd();\n      i0.ɵɵtext(57, \"\\n\\n      \");\n      i0.ɵɵtemplate(58, OfferComponent_tr_58_Template, 1, 0, \"tr\", 14);\n      i0.ɵɵtext(59, \"\\n      \");\n      i0.ɵɵtemplate(60, OfferComponent_tr_60_Template, 1, 0, \"tr\", 15);\n      i0.ɵɵtext(61, \"\\n    \");\n      i0.ɵɵelementEnd();\n      i0.ɵɵtext(62, \"\\n\\n    \");\n      i0.ɵɵelementStart(63, \"div\", 16);\n      i0.ɵɵtext(64, \"\\n        \");\n      i0.ɵɵelementStart(65, \"span\", 17);\n      i0.ɵɵtext(66, \"Total of all offert's:\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(67, \"span\", 18);\n      i0.ɵɵtext(68);\n      i0.ɵɵpipe(69, \"currency\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵtext(70, \"\\n      \");\n      i0.ɵɵelementEnd();\n      i0.ɵɵtext(71, \"\\n  \");\n      i0.ɵɵelementEnd();\n      i0.ɵɵtext(72, \"\\n\");\n    }\n    if (rf & 2) {\n      i0.ɵɵadvance(6);\n      i0.ɵɵproperty(\"dataSource\", ctx.worksheets);\n      i0.ɵɵadvance(52);\n      i0.ɵɵproperty(\"matHeaderRowDef\", ctx.displayedColumns);\n      i0.ɵɵadvance(2);\n      i0.ɵɵproperty(\"matRowDefColumns\", ctx.displayedColumns);\n      i0.ɵɵadvance(8);\n      i0.ɵɵtextInterpolate(i0.ɵɵpipeBind1(69, 4, ctx.getTotalCost()));\n    }\n  },\n  dependencies: [i3.TranslateDirective, i4.MatTable, i4.MatHeaderCellDef, i4.MatHeaderRowDef, i4.MatColumnDef, i4.MatCellDef, i4.MatRowDef, i4.MatHeaderCell, i4.MatCell, i4.MatHeaderRow, i4.MatRow, i5.MatButton, i6.CurrencyPipe, i6.DatePipe],\n  styles: [\".add-button[_ngcontent-%COMP%] {\\n  float: right;\\n  margin-bottom: 5px;\\n}\\n\\n.total-all-offerts[_ngcontent-%COMP%] {\\n  font-weight: bold;\\n}\\n/*# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8uL3NyYy9tYWluL3dlYmFwcC9hcHAvdmlld3Mvb2ZmZXIvb2ZmZXIuY29tcG9uZW50LnNjc3MiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUE7RUFDRSxZQUFBO0VBQ0Esa0JBQUE7QUFDRjs7QUFFQTtFQUNFLGlCQUFBO0FBQ0YiLCJzb3VyY2VzQ29udGVudCI6WyIuYWRkLWJ1dHRvbiB7XG4gIGZsb2F0OiByaWdodDtcbiAgbWFyZ2luLWJvdHRvbTogNXB4O1xufVxuXG4udG90YWwtYWxsLW9mZmVydHMge1xuICBmb250LXdlaWdodDogYm9sZDtcbn1cbiJdLCJzb3VyY2VSb290IjoiIn0= */\"]\n}));","map":{"version":3,"mappings":"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","names":["MatTable","Worksheet","EditRowBoxComponent","i0","OfferComponent","constructor","dialog","worksheetService","ngOnInit","worksheets","openDialog","action","obj","dialogRef","open","width","data","afterClosed","subscribe","result","event","addRowData","updateRowData","deleteRowData","rowObj","worksheet","description","start","end","costHour","total","userType","billingType","user","product","create","push","table","renderRows","filter","value","id","find","res","body","update","delete","getTotalCost","sum","forEach","sheet","selectors","viewQuery","ctx"],"sourceRoot":"","sources":["/home/ceo/mmmm/createyourevent/src/main/webapp/app/views/offer/offer.component.ts","/home/ceo/mmmm/createyourevent/src/main/webapp/app/views/offer/offer.component.html"],"sourcesContent":["import { Component, OnInit, Input, ViewChild } from \"@angular/core\";\nimport { MatDialog } from \"@angular/material/dialog\";\nimport { MatTable } from \"@angular/material/table\";\nimport { UserType } from \"app/entities/enumerations/user-type.model\";\nimport { WorksheetType } from \"app/entities/enumerations/worksheet-type.model\";\nimport { IEvent } from \"app/entities/event/event.model\";\nimport { IProduct } from \"app/entities/product/product.model\";\nimport { IUser } from \"app/entities/user/user.model\";\nimport { WorksheetService } from \"app/entities/worksheet/service/worksheet.service\";\nimport { IWorksheet, Worksheet } from \"app/entities/worksheet/worksheet.model\";\nimport { EditRowBoxComponent } from \"./editrow-box.component\";\n\n\n@Component({\n  selector: 'jhi-offer',\n  templateUrl: './offer.component.html',\n  styleUrls: ['./offer.component.scss']\n})\nexport class OfferComponent implements OnInit {\n  displayedColumns: string[] = ['description', 'start', 'end', 'costHour', 'total', 'action'];\n\n  @Input() worksheets!: IWorksheet[];\n  @Input() userType!: UserType;\n  @Input() event!: IEvent;\n  @Input() product!: IProduct;\n  @Input() user!: IUser;\n  @Input() billingType!: WorksheetType;\n\n  @ViewChild(MatTable, { static: true }) table!: MatTable<any>;\n\n  constructor(public dialog: MatDialog, private worksheetService: WorksheetService) {}\n\n  ngOnInit(): void {\n    if (this.worksheets === null) {\n      this.worksheets = [];\n    }\n  }\n\n  openDialog(action: any, obj: any): void {\n    obj.action = action;\n    const dialogRef = this.dialog.open(EditRowBoxComponent, {\n      width: '450px',\n      data: obj\n    });\n\n    dialogRef.afterClosed().subscribe(result => {\n      if (result.event === 'Add') {\n        this.addRowData(result.data);\n      } else if (result.event === 'Update') {\n        this.updateRowData(result.data);\n      } else if (result.event === 'Delete') {\n        this.deleteRowData(result.data);\n      }\n    });\n  }\n\n  addRowData(rowObj: IWorksheet): void {\n    const worksheet: IWorksheet = new Worksheet();\n    worksheet.description = rowObj.description;\n    worksheet.start = rowObj.start;\n    worksheet.end = rowObj.end;\n    worksheet.costHour = rowObj.costHour;\n    worksheet.total = rowObj.total;\n    worksheet.userType = this.userType;\n    worksheet.billingType = this.billingType;\n    worksheet.user = this.user;\n    worksheet.event = this.event;\n    worksheet.product = this.product;\n\n    this.worksheetService.create(worksheet).subscribe();\n    this.worksheets.push({\n      description: rowObj.description,\n      start: rowObj.start,\n      end: rowObj.end,\n      costHour: rowObj.costHour,\n      total: rowObj.total\n    });\n    this.table.renderRows();\n  }\n\n  updateRowData(rowObj: IWorksheet): void {\n    this.worksheets = this.worksheets.filter(value => {\n      if (value.id === rowObj.id) {\n        this.worksheetService.find(rowObj.id!).subscribe(res => {\n          const worksheet = res.body!;\n          worksheet.description = rowObj.description;\n          worksheet.start = rowObj.start;\n          worksheet.end = rowObj.end;\n          worksheet.costHour = rowObj.costHour;\n          worksheet.total = rowObj.total;\n          this.worksheetService.update(worksheet).subscribe();\n\n          value.description = rowObj.description;\n          value.start = rowObj.start;\n          value.end = rowObj.end;\n          value.costHour = rowObj.costHour;\n          value.total = rowObj.total;\n        });\n      }\n      return true;\n    });\n  }\n\n  deleteRowData(rowObj: IWorksheet): void {\n    this.worksheetService.delete(rowObj.id!).subscribe();\n    this.worksheets = this.worksheets.filter(value => {\n      return value.id !== rowObj.id;\n    });\n  }\n\n  getTotalCost(): number {\n    let sum = 0;\n    this.worksheets.forEach(sheet => {\n      sum += sheet.total!;\n    });\n    return sum;\n  }\n}\n","<div class=\"container text-center\">\n\n    <button class=\"add-button\" mat-button (click)=\"openDialog('Add',{})\" mat-flat-button color=\"primary\"><span jhiTranslate=\"offer.add-offer\">Add offer</span></button>\n\n    <table mat-table [dataSource]=\"worksheets\" #mytable class=\"my-table mat-elevation-z8\">\n\n      <!--- Note that these columns can be defined in any order.\n          The actual rendered columns are set as a property on the row definition\" -->\n\n\n    <!-- Name Column -->\n    <ng-container matColumnDef=\"description\">\n        <th mat-header-cell *matHeaderCellDef><span jhiTranslate=\"offer.description\">Description</span></th>\n        <td mat-cell *matCellDef=\"let element\"> {{ element.description }} </td>\n    </ng-container>\nx\n    <!-- Start Column -->\n    <ng-container matColumnDef=\"start\">\n        <th mat-header-cell *matHeaderCellDef><span jhiTranslate=\"offer.start\">Start</span></th>\n        <td mat-cell *matCellDef=\"let element\"> {{ element.start | date: 'medium' }} </td>\n    </ng-container>\n\n    <!-- End Column -->\n    <ng-container matColumnDef=\"end\">\n        <th mat-header-cell *matHeaderCellDef><span jhiTranslate=\"offer.end\">End</span></th>\n        <td mat-cell *matCellDef=\"let element\"> {{ element.end | date: 'medium' }} </td>\n    </ng-container>\n\n    <!-- Cost per hour Column -->\n    <ng-container matColumnDef=\"costHour\">\n        <th mat-header-cell *matHeaderCellDef><span jhiTranslate=\"offer.costHour\">Cost's per hour</span></th>\n        <td mat-cell *matCellDef=\"let element\"> {{ element.costHour | currency }} </td>\n    </ng-container>\n\n    <!-- Total cost's Column -->\n    <ng-container matColumnDef=\"total\">\n        <th mat-header-cell *matHeaderCellDef><span jhiTranslate=\"offer.total\">Total cost's</span></th>\n        <td mat-cell *matCellDef=\"let element\"> {{ element.total | currency }} </td>\n    </ng-container>\n\n\n      <!-- Action Column -->\n      <ng-container matColumnDef=\"action\">\n        <th mat-header-cell *matHeaderCellDef><span jhiTranslate=\"offer.action\">Action</span></th>\n        <td mat-cell *matCellDef=\"let element\" class=\"action-link\">\n          <a (click)=\"openDialog('Update',element)\" class=\"btn btn-primary\" role=\"button\"><span jhiTranslate=\"offer.edit\">Edit</span></a>\n          <a (click)=\"openDialog('Delete',element)\" class=\"btn btn-info\" role=\"button\"><span jhiTranslate=\"offer.delete\">Delete</span></a>\n        </td>\n      </ng-container>\n\n      <tr mat-header-row *matHeaderRowDef=\"displayedColumns\"></tr>\n      <tr mat-row *matRowDef=\"let row; columns: displayedColumns;\"></tr>\n    </table>\n\n    <div class=\"alert alert-info\" role=\"alert\">\n        <span class=\"total-all-offerts\" jhiTranslate=\"offer.total-all-offerts\">Total of all offert's:</span><span class=\"total-all-offerts\">{{ getTotalCost() | currency }}</span>\n      </div>\n  </div>\n"]},"metadata":{},"sourceType":"module","externalDependencies":[]}