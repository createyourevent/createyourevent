{"ast":null,"code":"import _defineProperty from \"/home/ceo/mmmm/createyourevent/node_modules/@babel/runtime/helpers/esm/defineProperty.js\";\nimport { EventEmitter } from \"@angular/core\";\nimport { Subject } from \"rxjs\";\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"app/general.service\";\nimport * as i2 from \"app/entities/user/user.service\";\nimport * as i3 from \"app/points/points-display/points-display.service\";\nimport * as i4 from \"@angular/forms\";\nimport * as i5 from \"../../../shared/language/translate.directive\";\nimport * as i6 from \"@angular/material/button\";\nimport * as i7 from \"@angular/material/icon\";\nimport * as i8 from \"primeng/inputtextarea\";\nexport class LikeDislikeComponent {\n  constructor(generalService, userService, pointsDataService) {\n    _defineProperty(this, \"generalService\", void 0);\n    _defineProperty(this, \"userService\", void 0);\n    _defineProperty(this, \"pointsDataService\", void 0);\n    _defineProperty(this, \"like\", void 0);\n    _defineProperty(this, \"dislike\", void 0);\n    _defineProperty(this, \"disabled\", false);\n    _defineProperty(this, \"liked\", new EventEmitter());\n    _defineProperty(this, \"refresh\", new Subject());\n    _defineProperty(this, \"userLoggedIn\", void 0);\n    _defineProperty(this, \"points\", 0);\n    _defineProperty(this, \"subscription\", void 0);\n    _defineProperty(this, \"comment\", '');\n    this.generalService = generalService;\n    this.userService = userService;\n    this.pointsDataService = pointsDataService;\n  }\n  ngOnChanges(changes) {\n    if (changes['disabled'] !== undefined) {\n      this.disabled = changes['disabled'].currentValue;\n    }\n  }\n  ngOnInit() {\n    this.subscription = this.pointsDataService.currentPoint.subscribe(points => this.points = points);\n    this.generalService.findWidthAuthorities().subscribe(u => {\n      this.userLoggedIn = u.body;\n    });\n  }\n  onLikeClick() {\n    this.generalService.findPointsByKey('rating_like').subscribe(p => {\n      const points = p.body.points;\n      this.userLoggedIn.points += points;\n      this.generalService.updateUserLoggedInAndPoints(this.userLoggedIn.id, this.userLoggedIn.loggedIn, this.userLoggedIn.points).subscribe(u => {\n        this.pointsDataService.changePoint(this.userLoggedIn.points);\n        this.like++;\n        const liked = {\n          liked: true,\n          comment: this.comment\n        };\n        this.comment = '';\n        this.liked.emit(liked);\n        this.disabled = true;\n      });\n    });\n  }\n  onDislikeClick() {\n    this.generalService.findPointsByKey('rating_like').subscribe(p => {\n      const points = p.body.points;\n      this.userLoggedIn.points += points;\n      this.generalService.updateUserLoggedInAndPoints(this.userLoggedIn.id, this.userLoggedIn.loggedIn, this.userLoggedIn.points).subscribe(u => {\n        this.pointsDataService.changePoint(this.userLoggedIn.points);\n        this.dislike++;\n        const liked = {\n          liked: false,\n          comment: this.comment\n        };\n        this.comment = '';\n        this.liked.emit(liked);\n        this.disabled = true;\n      });\n    });\n  }\n}\n_defineProperty(LikeDislikeComponent, \"\\u0275fac\", function LikeDislikeComponent_Factory(t) {\n  return new (t || LikeDislikeComponent)(i0.ɵɵdirectiveInject(i1.GeneralService), i0.ɵɵdirectiveInject(i2.UserService), i0.ɵɵdirectiveInject(i3.PointsDataService));\n});\n_defineProperty(LikeDislikeComponent, \"\\u0275cmp\", /*@__PURE__*/i0.ɵɵdefineComponent({\n  type: LikeDislikeComponent,\n  selectors: [[\"jhi-like-dislike\"]],\n  inputs: {\n    like: \"like\",\n    dislike: \"dislike\",\n    disabled: \"disabled\"\n  },\n  outputs: {\n    liked: \"liked\"\n  },\n  features: [i0.ɵɵNgOnChangesFeature],\n  decls: 41,\n  vars: 7,\n  consts: [[1, \"container\"], [1, \"row\"], [1, \"col-sm-9\"], [1, \"col-md-6\"], [\"role\", \"alert\", 1, \"alert\", \"alert-primary\"], [\"jhiTranslate\", \"rating.feedback\"], [1, \"col-md-6\", \"col-lg-6\"], [\"pInputTextarea\", \"\", \"autoResize\", \"autoResize\", 3, \"rows\", \"cols\", \"ngModel\", \"ngModelChange\"], [1, \"col-sm-3\"], [\"mat-icon-button\", \"\", 1, \"primary\", 3, \"disabled\", \"click\"], [\"aria-label\", \"Like\"], [\"aria-label\", \"Dislike\"]],\n  template: function LikeDislikeComponent_Template(rf, ctx) {\n    if (rf & 1) {\n      i0.ɵɵelementStart(0, \"div\", 0);\n      i0.ɵɵtext(1, \"\\n    \");\n      i0.ɵɵelementStart(2, \"div\", 1);\n      i0.ɵɵtext(3, \"\\n        \");\n      i0.ɵɵelementStart(4, \"div\", 2);\n      i0.ɵɵtext(5, \"\\n            \");\n      i0.ɵɵelementStart(6, \"div\", 1);\n      i0.ɵɵtext(7, \"\\n                \");\n      i0.ɵɵelementStart(8, \"div\", 3);\n      i0.ɵɵtext(9, \"\\n                    \");\n      i0.ɵɵelementStart(10, \"div\", 4);\n      i0.ɵɵtext(11, \"\\n                        \");\n      i0.ɵɵelementStart(12, \"span\", 5);\n      i0.ɵɵtext(13, \"\\n                            Before you can like, you have to enter a short feedback with at least 50 characters in the text field on the right about why you made which decision.\\n                          \");\n      i0.ɵɵelementEnd();\n      i0.ɵɵtext(14, \"\\n                    \");\n      i0.ɵɵelementEnd();\n      i0.ɵɵtext(15, \"\\n                \");\n      i0.ɵɵelementEnd();\n      i0.ɵɵtext(16, \"\\n                \");\n      i0.ɵɵelementStart(17, \"div\", 6);\n      i0.ɵɵtext(18, \"\\n                    \");\n      i0.ɵɵelementStart(19, \"textarea\", 7);\n      i0.ɵɵlistener(\"ngModelChange\", function LikeDislikeComponent_Template_textarea_ngModelChange_19_listener($event) {\n        return ctx.comment = $event;\n      });\n      i0.ɵɵelementEnd();\n      i0.ɵɵtext(20, \"\\n                \");\n      i0.ɵɵelementEnd();\n      i0.ɵɵtext(21, \"\\n              \");\n      i0.ɵɵelementEnd();\n      i0.ɵɵtext(22, \"\\n        \");\n      i0.ɵɵelementEnd();\n      i0.ɵɵtext(23, \"\\n        \");\n      i0.ɵɵelementStart(24, \"div\", 8);\n      i0.ɵɵtext(25, \"\\n            \");\n      i0.ɵɵelementStart(26, \"button\", 9);\n      i0.ɵɵlistener(\"click\", function LikeDislikeComponent_Template_button_click_26_listener() {\n        return ctx.onLikeClick();\n      });\n      i0.ɵɵtext(27, \"\\n                \");\n      i0.ɵɵelementStart(28, \"mat-icon\", 10);\n      i0.ɵɵtext(29, \"thumb_up\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵtext(30, \"\\n             \");\n      i0.ɵɵelementEnd();\n      i0.ɵɵtext(31);\n      i0.ɵɵelementStart(32, \"button\", 9);\n      i0.ɵɵlistener(\"click\", function LikeDislikeComponent_Template_button_click_32_listener() {\n        return ctx.onDislikeClick();\n      });\n      i0.ɵɵtext(33, \"\\n                \");\n      i0.ɵɵelementStart(34, \"mat-icon\", 11);\n      i0.ɵɵtext(35, \"thumb_down\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵtext(36, \"\\n             \");\n      i0.ɵɵelementEnd();\n      i0.ɵɵtext(37);\n      i0.ɵɵelementEnd();\n      i0.ɵɵtext(38, \"\\n    \");\n      i0.ɵɵelementEnd();\n      i0.ɵɵtext(39, \"\\n\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵtext(40, \"\\n\");\n    }\n    if (rf & 2) {\n      i0.ɵɵadvance(19);\n      i0.ɵɵproperty(\"rows\", 5)(\"cols\", 30)(\"ngModel\", ctx.comment);\n      i0.ɵɵadvance(7);\n      i0.ɵɵproperty(\"disabled\", ctx.disabled || ctx.comment.length <= 50);\n      i0.ɵɵadvance(5);\n      i0.ɵɵtextInterpolate1(\"\\n             \", ctx.like, \"\\n             \");\n      i0.ɵɵadvance(1);\n      i0.ɵɵproperty(\"disabled\", ctx.disabled || ctx.comment.length <= 50);\n      i0.ɵɵadvance(5);\n      i0.ɵɵtextInterpolate1(\"\\n             \", ctx.dislike, \"\\n        \");\n    }\n  },\n  dependencies: [i4.DefaultValueAccessor, i4.NgControlStatus, i4.NgModel, i5.TranslateDirective, i6.MatButton, i7.MatIcon, i8.InputTextarea],\n  styles: [\"\\n/*# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IiIsInNvdXJjZVJvb3QiOiIifQ== */\"]\n}));","map":{"version":3,"mappings":"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","names":["EventEmitter","Subject","LikeDislikeComponent","constructor","generalService","userService","pointsDataService","ngOnChanges","changes","undefined","disabled","currentValue","ngOnInit","subscription","currentPoint","subscribe","points","findWidthAuthorities","u","userLoggedIn","body","onLikeClick","findPointsByKey","p","updateUserLoggedInAndPoints","id","loggedIn","changePoint","like","liked","comment","emit","onDislikeClick","dislike","selectors","inputs","outputs","features","decls","vars","consts","template","i0","ctx"],"sourceRoot":"","sources":["/home/ceo/mmmm/createyourevent/src/main/webapp/app/views/ratings/like_dislike/like_dislike.component.ts","/home/ceo/mmmm/createyourevent/src/main/webapp/app/views/ratings/like_dislike/like_dislike.component.html"],"sourcesContent":["import { EventEmitter } from \"@angular/core\";\nimport { Component, OnInit, OnChanges, Input, Output, SimpleChanges } from \"@angular/core\";\nimport { IUser } from \"app/entities/user/user.model\";\nimport { UserService } from \"app/entities/user/user.service\";\nimport { GeneralService } from \"app/general.service\";\nimport { PointsDataService } from \"app/points/points-display/points-display.service\";\nimport { Subject, Subscription } from \"rxjs\";\n\n\n@Component({\n  selector: 'jhi-like-dislike',\n  templateUrl: './like_dislike.component.html',\n  styleUrls: ['like_dislike.component.scss']\n})\nexport class LikeDislikeComponent implements OnInit, OnChanges {\n  @Input() like!: number;\n  @Input() dislike!: number;\n  @Input() disabled = false;\n  @Output() liked: EventEmitter<{ liked: boolean; comment: string; }> = new EventEmitter();\n\n  refresh: Subject<{ liked: boolean; comment: string; }> = new Subject();\n\n  userLoggedIn!: IUser;\n\n  points = 0;\n  subscription!: Subscription;\n\n  comment = '';\n\n  constructor(private generalService: GeneralService, private userService: UserService, private pointsDataService: PointsDataService) {\n  }\n\n\n  ngOnChanges(changes: SimpleChanges): void {\n    if (changes['disabled'] !== undefined) {\n      this.disabled = changes['disabled'].currentValue;\n    }\n  }\n\n  ngOnInit(): void {\n    this.subscription = this.pointsDataService.currentPoint.subscribe(points => (this.points = points));\n    this.generalService.findWidthAuthorities().subscribe(u => {\n      this.userLoggedIn = u.body!;\n    });\n  }\n\n  onLikeClick(): void {\n    this.generalService.findPointsByKey('rating_like').subscribe(p => {\n      const points = p.body!.points;\n      this.userLoggedIn.points! += points!;\n      this.generalService.updateUserLoggedInAndPoints(this.userLoggedIn.id!, this.userLoggedIn!.loggedIn!, this.userLoggedIn!.points!).subscribe(u => {\n        this.pointsDataService.changePoint(this.userLoggedIn.points!);\n        this.like++;\n        const liked = {liked: true, comment: this.comment}\n        this.comment = '';\n        this.liked.emit(liked);\n        this.disabled = true;\n      });\n    });\n  }\n\n  onDislikeClick(): void {\n    this.generalService.findPointsByKey('rating_like').subscribe(p => {\n      const points = p.body!.points;\n      this.userLoggedIn.points! += points!;\n      this.generalService.updateUserLoggedInAndPoints(this.userLoggedIn.id!, this.userLoggedIn.loggedIn!, this.userLoggedIn.points!).subscribe(u => {\n        this.pointsDataService.changePoint(this.userLoggedIn.points!);\n        this.dislike++;\n        const liked = {liked: false, comment: this.comment}\n        this.comment = '';\n        this.liked.emit(liked);\n        this.disabled = true;\n      });\n    });\n  }\n}\n","<div class=\"container\">\n    <div class=\"row\">\n        <div class=\"col-sm-9\">\n            <div class=\"row\">\n                <div class=\"col-md-6\">\n                    <div class=\"alert alert-primary\" role=\"alert\">\n                        <span jhiTranslate=\"rating.feedback\">\n                            Before you can like, you have to enter a short feedback with at least 50 characters in the text field on the right about why you made which decision.\n                          </span>\n                    </div>\n                </div>\n                <div class=\"col-md-6 col-lg-6\">\n                    <textarea [rows]=\"5\" [cols]=\"30\" pInputTextarea autoResize=\"autoResize\" [(ngModel)]=\"comment\"></textarea>\n                </div>\n              </div>\n        </div>\n        <div class=\"col-sm-3\">\n            <button mat-icon-button class=\"primary\" (click)=\"onLikeClick()\" [disabled]=\"disabled || comment.length  <= 50\">\n                <mat-icon aria-label=\"Like\">thumb_up</mat-icon>\n             </button>\n             {{ like }}\n             <button mat-icon-button class=\"primary\" (click)=\"onDislikeClick()\" [disabled]=\"disabled || comment.length  <= 50\">\n                <mat-icon aria-label=\"Dislike\">thumb_down</mat-icon>\n             </button>\n             {{ dislike }}\n        </div>\n    </div>\n</div>\n"]},"metadata":{},"sourceType":"module","externalDependencies":[]}