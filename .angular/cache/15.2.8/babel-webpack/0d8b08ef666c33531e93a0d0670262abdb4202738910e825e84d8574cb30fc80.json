{"ast":null,"code":"import * as dayjs from \"dayjs\";\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"../general.service\";\nimport * as i2 from \"app/google-geocode.service\";\nimport * as i3 from \"../shared/language/translate.directive\";\nimport * as i4 from \"../shared/auth/has-any-authority.directive\";\nimport * as i5 from \"primeng/gmap\";\nimport * as i6 from \"@angular/material/tabs\";\nimport * as i7 from \"./distance/distance.component\";\nimport * as i8 from \"./distance-shop/distance-shop.component\";\nimport * as i9 from \"./distance-service/distance-service.component\";\nfunction MapComponent_ng_template_4_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵtext(0, \"\\n        \");\n    i0.ɵɵelementStart(1, \"span\", 12);\n    i0.ɵɵtext(2, \"Map\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵtext(3, \"\\n      \");\n  }\n}\nfunction MapComponent_ng_container_53_ng_template_4_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵtext(0, \"\\n          \");\n    i0.ɵɵelementStart(1, \"span\", 16);\n    i0.ɵɵtext(2, \"Show event's or shop's with distance\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵtext(3, \"\\n        \");\n  }\n}\nfunction MapComponent_ng_container_53_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementContainerStart(0);\n    i0.ɵɵtext(1, \"\\n      \");\n    i0.ɵɵelementStart(2, \"mat-tab\");\n    i0.ɵɵtext(3, \"\\n        \");\n    i0.ɵɵtemplate(4, MapComponent_ng_container_53_ng_template_4_Template, 4, 0, \"ng-template\", 0);\n    i0.ɵɵtext(5, \"\\n        \");\n    i0.ɵɵelementStart(6, \"div\", 13);\n    i0.ɵɵtext(7, \"\\n            \");\n    i0.ɵɵelementStart(8, \"div\", 1);\n    i0.ɵɵtext(9, \"\\n                \");\n    i0.ɵɵelementStart(10, \"div\", 14);\n    i0.ɵɵtext(11, \"\\n                    \");\n    i0.ɵɵelementStart(12, \"div\", 15);\n    i0.ɵɵtext(13, \"\\n                        \");\n    i0.ɵɵelement(14, \"jhi-distance\");\n    i0.ɵɵtext(15, \"\\n                    \");\n    i0.ɵɵelementEnd();\n    i0.ɵɵtext(16, \"\\n                \");\n    i0.ɵɵelementEnd();\n    i0.ɵɵtext(17, \"\\n                \");\n    i0.ɵɵelementStart(18, \"div\", 14);\n    i0.ɵɵtext(19, \"\\n                  \");\n    i0.ɵɵelementStart(20, \"div\", 15);\n    i0.ɵɵtext(21, \"\\n                    \");\n    i0.ɵɵelement(22, \"jhi-distance-shop\");\n    i0.ɵɵtext(23, \"\\n                  \");\n    i0.ɵɵelementEnd();\n    i0.ɵɵtext(24, \"\\n              \");\n    i0.ɵɵelementEnd();\n    i0.ɵɵtext(25, \"\\n              \");\n    i0.ɵɵelementStart(26, \"div\", 14);\n    i0.ɵɵtext(27, \"\\n                \");\n    i0.ɵɵelementStart(28, \"div\", 15);\n    i0.ɵɵtext(29, \"\\n                  \");\n    i0.ɵɵelement(30, \"jhi-distance-service\");\n    i0.ɵɵtext(31, \"\\n                \");\n    i0.ɵɵelementEnd();\n    i0.ɵɵtext(32, \"\\n            \");\n    i0.ɵɵelementEnd();\n    i0.ɵɵtext(33, \"\\n            \");\n    i0.ɵɵelementEnd();\n    i0.ɵɵtext(34, \"\\n        \");\n    i0.ɵɵelementEnd();\n    i0.ɵɵtext(35, \"\\n\\n      \");\n    i0.ɵɵelementEnd();\n    i0.ɵɵtext(36, \"\\n    \");\n    i0.ɵɵelementContainerEnd();\n  }\n}\nconst _c0 = function () {\n  return {\n    \"width\": \"100%\",\n    \"height\": \"720px\"\n  };\n};\nexport let MapComponent = /*#__PURE__*/(() => {\n  class MapComponent {\n    constructor(generalService, googleGeocoderService) {\n      this.generalService = generalService;\n      this.googleGeocoderService = googleGeocoderService;\n      this.overlays = [];\n    }\n    ngOnInit() {\n      this.options = {\n        center: {\n          lat: 47.7233,\n          lng: 8.66429\n        },\n        zoom: 12\n      };\n      const now = dayjs();\n      this.generalService.findEventsByPrivateOrPublicAndActiveTrueAndDateEndAfter(now).subscribe(res => {\n        this.events = res.body;\n        this.events.forEach(e => {\n          const marker = new google.maps.Marker({\n            position: {\n              lat: Number(e.location?.address?.lat),\n              lng: Number(e.location?.address?.lng)\n            },\n            title: e.name,\n            icon: {\n              url: 'http://maps.google.com/mapfiles/ms/icons/purple-dot.png'\n            }\n          });\n          marker.addListener('click', function () {\n            window.location.href = '/events/' + e.id + '/view';\n          });\n          this.overlays.push(marker);\n        });\n      });\n      this.generalService.findShopByActiveTrueAndActiveOwnerTrue().subscribe(res => {\n        this.shops = res.body;\n        this.shops.forEach(e => {\n          let pos;\n          const queryParam = e.address.replace(' ', '+');\n          this.googleGeocoderService.getFromAddress(queryParam).subscribe(re => {\n            const geocoder = re.body['results'];\n            const geometry = geocoder[0].geometry;\n            pos = new google.maps.LatLng(geometry.location.lat, geometry.location.lng);\n            const marker = new google.maps.Marker({\n              position: {\n                lat: pos.lat(),\n                lng: pos.lng()\n              },\n              title: e.name,\n              icon: {\n                url: 'http://maps.google.com/mapfiles/ms/icons/red-dot.png'\n              }\n            });\n            marker.addListener('click', function () {\n              window.location.href = '/supplier/shop/' + e.id + '/overview';\n            });\n            this.overlays.push(marker);\n          });\n        });\n      });\n      this.generalService.getServicesWhereActiveAndActiveOwnerTrue().subscribe(res => {\n        this.services = res.body;\n        this.services.forEach(e => {\n          let pos;\n          const queryParam = e.address.replace(' ', '+');\n          this.googleGeocoderService.getFromAddress(queryParam).subscribe(re => {\n            const geocoder = re.body['results'];\n            const geometry = geocoder[0].geometry;\n            pos = new google.maps.LatLng(geometry.location.lat, geometry.location.lng);\n            const marker = new google.maps.Marker({\n              position: {\n                lat: pos.lat(),\n                lng: pos.lng()\n              },\n              title: e.name,\n              icon: {\n                url: 'http://maps.google.com/mapfiles/ms/icons/blue-dot.png'\n              }\n            });\n            marker.addListener('click', function () {\n              window.location.href = '/events/' + e.id + '/view';\n            });\n            this.overlays.push(marker);\n          });\n        });\n      });\n    }\n    ngOnDestroy() {}\n  }\n  MapComponent.ɵfac = function MapComponent_Factory(t) {\n    return new (t || MapComponent)(i0.ɵɵdirectiveInject(i1.GeneralService), i0.ɵɵdirectiveInject(i2.GoogleGeocodeService));\n  };\n  MapComponent.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n    type: MapComponent,\n    selectors: [[\"jhi-map\"]],\n    decls: 56,\n    vars: 6,\n    consts: [[\"mat-tab-label\", \"\"], [1, \"row\"], [1, \"col-md-1\"], [\"src\", \"http://maps.google.com/mapfiles/ms/icons/purple-dot.png\"], [1, \"col-md-11\"], [\"jhiTranslate\", \"map.events\"], [\"src\", \"http://maps.google.com/mapfiles/ms/icons/red-dot.png\"], [\"jhiTranslate\", \"map.shops\"], [\"src\", \"http://maps.google.com/mapfiles/ms/icons/blue-dot.png\"], [\"jhiTranslate\", \"map.services\"], [3, \"options\", \"overlays\"], [4, \"jhiHasAnyAuthority\"], [\"jhiTranslate\", \"map.map\"], [1, \"container-fluid\"], [1, \"col-md-12\"], [1, \"box\"], [\"jhiTranslate\", \"map.distance\"]],\n    template: function MapComponent_Template(rf, ctx) {\n      if (rf & 1) {\n        i0.ɵɵelementStart(0, \"mat-tab-group\");\n        i0.ɵɵtext(1, \"\\n    \");\n        i0.ɵɵelementStart(2, \"mat-tab\");\n        i0.ɵɵtext(3, \"\\n      \");\n        i0.ɵɵtemplate(4, MapComponent_ng_template_4_Template, 4, 0, \"ng-template\", 0);\n        i0.ɵɵtext(5, \"\\n      \");\n        i0.ɵɵelementStart(6, \"div\", 1);\n        i0.ɵɵtext(7, \"\\n            \");\n        i0.ɵɵelementStart(8, \"div\", 2);\n        i0.ɵɵtext(9, \"\\n                \");\n        i0.ɵɵelement(10, \"img\", 3);\n        i0.ɵɵtext(11, \"\\n            \");\n        i0.ɵɵelementEnd();\n        i0.ɵɵtext(12, \"\\n            \");\n        i0.ɵɵelementStart(13, \"div\", 4);\n        i0.ɵɵtext(14, \"\\n                \");\n        i0.ɵɵelementStart(15, \"span\", 5);\n        i0.ɵɵtext(16, \"Events\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵtext(17, \"\\n            \");\n        i0.ɵɵelementEnd();\n        i0.ɵɵtext(18, \"\\n        \");\n        i0.ɵɵelementEnd();\n        i0.ɵɵtext(19, \"\\n        \");\n        i0.ɵɵelementStart(20, \"div\", 1);\n        i0.ɵɵtext(21, \"\\n            \");\n        i0.ɵɵelementStart(22, \"div\", 2);\n        i0.ɵɵtext(23, \"\\n                \");\n        i0.ɵɵelement(24, \"img\", 6);\n        i0.ɵɵtext(25, \"\\n            \");\n        i0.ɵɵelementEnd();\n        i0.ɵɵtext(26, \"\\n            \");\n        i0.ɵɵelementStart(27, \"div\", 4);\n        i0.ɵɵtext(28, \"\\n                \");\n        i0.ɵɵelementStart(29, \"span\", 7);\n        i0.ɵɵtext(30, \"Shops\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵtext(31, \"\\n            \");\n        i0.ɵɵelementEnd();\n        i0.ɵɵtext(32, \"\\n        \");\n        i0.ɵɵelementEnd();\n        i0.ɵɵtext(33, \"\\n        \");\n        i0.ɵɵelementStart(34, \"div\", 1);\n        i0.ɵɵtext(35, \"\\n            \");\n        i0.ɵɵelementStart(36, \"div\", 2);\n        i0.ɵɵtext(37, \"\\n                \");\n        i0.ɵɵelement(38, \"img\", 8);\n        i0.ɵɵtext(39, \"\\n            \");\n        i0.ɵɵelementEnd();\n        i0.ɵɵtext(40, \"\\n            \");\n        i0.ɵɵelementStart(41, \"div\", 4);\n        i0.ɵɵtext(42, \"\\n                \");\n        i0.ɵɵelementStart(43, \"span\", 9);\n        i0.ɵɵtext(44, \"Services\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵtext(45, \"\\n            \");\n        i0.ɵɵelementEnd();\n        i0.ɵɵtext(46, \"\\n        \");\n        i0.ɵɵelementEnd();\n        i0.ɵɵtext(47, \"\\n        \");\n        i0.ɵɵelement(48, \"hr\");\n        i0.ɵɵtext(49, \"\\n        \");\n        i0.ɵɵelement(50, \"p-gmap\", 10);\n        i0.ɵɵtext(51, \"\\n      \");\n        i0.ɵɵelementEnd();\n        i0.ɵɵtext(52, \"\\n\\n    \");\n        i0.ɵɵtemplate(53, MapComponent_ng_container_53_Template, 37, 0, \"ng-container\", 11);\n        i0.ɵɵtext(54, \"\\n\\n\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵtext(55, \"\\n\");\n      }\n      if (rf & 2) {\n        i0.ɵɵadvance(50);\n        i0.ɵɵstyleMap(i0.ɵɵpureFunction0(5, _c0));\n        i0.ɵɵproperty(\"options\", ctx.options)(\"overlays\", ctx.overlays);\n        i0.ɵɵadvance(3);\n        i0.ɵɵproperty(\"jhiHasAnyAuthority\", \"ROLE_USER\");\n      }\n    },\n    dependencies: [i3.TranslateDirective, i4.HasAnyAuthorityDirective, i5.GMap, i6.MatTabGroup, i6.MatTabLabel, i6.MatTab, i7.DistanceComponent, i8.DistanceShopComponent, i9.DistanceServiceComponent]\n  });\n  return MapComponent;\n})();","map":null,"metadata":{},"sourceType":"module","externalDependencies":[]}