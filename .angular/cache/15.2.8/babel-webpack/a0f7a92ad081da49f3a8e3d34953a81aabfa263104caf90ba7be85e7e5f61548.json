{"ast":null,"code":"import _defineProperty from \"/home/ceo/mmmm/createyourevent/node_modules/@babel/runtime/helpers/esm/defineProperty.js\";\nimport { ReservationTransactionId } from './../../../entities/reservation-transaction-id/reservation-transaction-id.model';\nimport { Reservation } from 'app/entities/reservation/reservation.model';\nimport dayjs from 'dayjs';\nimport { Ticket } from 'app/entities/ticket/ticket.model';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"@angular/router\";\nimport * as i2 from \"app/general.service\";\nimport * as i3 from \"app/entities/reservation/service/reservation.service\";\nimport * as i4 from \"app/entities/ticket/service/ticket.service\";\nimport * as i5 from \"../../../shared/language/translate.directive\";\nimport * as i6 from \"primeng/progressspinner\";\nimport * as i7 from \"../../please-wait-dialog/please-wait-dialog.component\";\nexport class SuccessfullComponent {\n  constructor(route, generalService, reservationService, router, ticketService) {\n    _defineProperty(this, \"route\", void 0);\n    _defineProperty(this, \"generalService\", void 0);\n    _defineProperty(this, \"reservationService\", void 0);\n    _defineProperty(this, \"router\", void 0);\n    _defineProperty(this, \"ticketService\", void 0);\n    _defineProperty(this, \"type\", void 0);\n    _defineProperty(this, \"id\", void 0);\n    _defineProperty(this, \"datatransTrxId\", void 0);\n    _defineProperty(this, \"user\", void 0);\n    _defineProperty(this, \"refNo\", void 0);\n    _defineProperty(this, \"amount\", void 0);\n    _defineProperty(this, \"display\", false);\n    this.route = route;\n    this.generalService = generalService;\n    this.reservationService = reservationService;\n    this.router = router;\n    this.ticketService = ticketService;\n  }\n  ngOnInit() {\n    this.display = true;\n    this.generalService.findWidthAuthorities().subscribe(u => {\n      this.user = u.body;\n      this.route.queryParams.subscribe(params => {\n        this.datatransTrxId = params['datatransTrxId'];\n        this.type = this.route.snapshot.params.type;\n        this.id = this.route.snapshot.params.id;\n        this.refNo = this.route.snapshot.params.refNo;\n        this.amount = this.route.snapshot.params.amount;\n        if (this.type === 'event') {\n          const reservation = new Reservation();\n          this.generalService.findEventById(this.id).subscribe(e => {\n            reservation.user = this.user;\n            reservation.event = e.body;\n            const tid = new ReservationTransactionId();\n            tid.transactionDepositId = this.refNo;\n            reservation.transactionId = tid;\n            this.generalService.createReservation(reservation).subscribe(re => {\n              this.reservationService.find(re.body.id).subscribe(r => {\n                const res = r.body;\n                const ticket = new Ticket();\n                ticket.date = dayjs();\n                ticket.amount = 1;\n                ticket.total = e.body.price * 100;\n                ticket.event = res.event;\n                ticket.user = res.user;\n                // ticket.refNo = this.refNo;\n                // this.ticketService.create(ticket).subscribe(t => {\n                res.ticket = ticket;\n                this.generalService.updateReservation(res).subscribe(() => {\n                  this.router.navigate(['/events/' + this.id + '/view']);\n                  this.display = false;\n                });\n                // });\n              });\n            });\n          });\n        } else if (this.type === 'ticket') {\n          this.reservationService.find(this.id).subscribe(r => {\n            const res = r.body;\n            res.billed = true;\n            res.date = dayjs(new Date());\n            res.transactionId.transactionId = this.refNo;\n            res.ticket.refNo = this.refNo;\n            this.generalService.updateReservation(res).subscribe(() => {\n              this.router.navigate(['/account/tickets/' + this.id + '/payTicket']);\n              this.display = false;\n            });\n          });\n        } else if (this.type === 'cashbox') {\n          this.generalService.findEventById(this.id).subscribe(e => {\n            const jhie = e.body;\n            jhie.billedOrganisator = true;\n            this.generalService.updateEvent(jhie).subscribe(() => {\n              this.router.navigate(['/organisator/cashbox/' + this.id + '/cashbox']);\n              this.display = false;\n            });\n          });\n        } else if (this.type === 'fee') {\n          this.router.navigate(['/billing'], {\n            queryParams: {\n              txId: this.datatransTrxId,\n              refNo: this.refNo\n            }\n          });\n        } else if (this.type === 'buyTicket') {\n          this.generalService.findWidthAuthorities().subscribe(u => {\n            const user = u.body;\n            this.generalService.findEventById(this.id).subscribe(e => {\n              const jhie = e.body;\n              const ticket = new Ticket();\n              ticket.date = dayjs();\n              ticket.amount = this.amount / (jhie.price * 100);\n              ticket.total = this.amount;\n              ticket.event = jhie;\n              ticket.user = user;\n              ticket.refNo = this.refNo;\n              this.ticketService.create(ticket).subscribe(t => {\n                const res = new Reservation();\n                res.date = dayjs();\n                res.user = this.user;\n                res.ticket = ticket;\n                res.event = ticket.event;\n                res.billed = true;\n                const tid = new ReservationTransactionId();\n                tid.transactionId = this.refNo;\n                res.transactionId = tid;\n                this.generalService.createReservation(res).subscribe(() => {\n                  this.router.navigate(['/events/' + jhie.id + '/buy-tickets']);\n                  this.display = false;\n                });\n              });\n            });\n          });\n        }\n      });\n    });\n  }\n}\n_defineProperty(SuccessfullComponent, \"\\u0275fac\", function SuccessfullComponent_Factory(t) {\n  return new (t || SuccessfullComponent)(i0.ɵɵdirectiveInject(i1.ActivatedRoute), i0.ɵɵdirectiveInject(i2.GeneralService), i0.ɵɵdirectiveInject(i3.ReservationService), i0.ɵɵdirectiveInject(i1.Router), i0.ɵɵdirectiveInject(i4.TicketService));\n});\n_defineProperty(SuccessfullComponent, \"\\u0275cmp\", /*@__PURE__*/i0.ɵɵdefineComponent({\n  type: SuccessfullComponent,\n  selectors: [[\"jhi-successfull\"]],\n  decls: 19,\n  vars: 1,\n  consts: [[1, \"row\"], [1, \"col-md-6\"], [\"role\", \"alert\", 1, \"alert\", \"alert-success\"], [\"jhiTranslate\", \"successfull.success\"], [3, \"display\"]],\n  template: function SuccessfullComponent_Template(rf, ctx) {\n    if (rf & 1) {\n      i0.ɵɵelementStart(0, \"div\", 0);\n      i0.ɵɵtext(1, \"\\n  \");\n      i0.ɵɵelementStart(2, \"div\", 1);\n      i0.ɵɵtext(3, \"\\n    \");\n      i0.ɵɵelement(4, \"p-progressSpinner\");\n      i0.ɵɵtext(5, \"\\n  \");\n      i0.ɵɵelementEnd();\n      i0.ɵɵtext(6, \"\\n  \");\n      i0.ɵɵelementStart(7, \"div\", 1);\n      i0.ɵɵtext(8, \"\\n    \");\n      i0.ɵɵelementStart(9, \"div\", 2);\n      i0.ɵɵtext(10, \"\\n      \");\n      i0.ɵɵelementStart(11, \"span\", 3);\n      i0.ɵɵtext(12, \"Payment submitted successfully. Thanks.\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵtext(13, \"\\n    \");\n      i0.ɵɵelementEnd();\n      i0.ɵɵtext(14, \"\\n  \");\n      i0.ɵɵelementEnd();\n      i0.ɵɵtext(15, \"\\n\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵtext(16, \"\\n\\n\");\n      i0.ɵɵelement(17, \"jhi-please-wait-dialog\", 4);\n      i0.ɵɵtext(18, \"\\n\");\n    }\n    if (rf & 2) {\n      i0.ɵɵadvance(17);\n      i0.ɵɵproperty(\"display\", ctx.display);\n    }\n  },\n  dependencies: [i5.TranslateDirective, i6.ProgressSpinner, i7.PleaseWaitDialogComponent],\n  styles: [\"\\n/*# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IiIsInNvdXJjZVJvb3QiOiIifQ== */\"]\n}));","map":{"version":3,"mappings":"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","names":["ReservationTransactionId","Reservation","dayjs","Ticket","SuccessfullComponent","constructor","route","generalService","reservationService","router","ticketService","ngOnInit","display","findWidthAuthorities","subscribe","u","user","body","queryParams","params","datatransTrxId","type","snapshot","id","refNo","amount","reservation","findEventById","e","event","tid","transactionDepositId","transactionId","createReservation","re","find","r","res","ticket","date","total","price","updateReservation","navigate","billed","Date","jhie","billedOrganisator","updateEvent","txId","create","t","selectors","decls","vars","consts","template","i0"],"sourceRoot":"","sources":["/home/ceo/mmmm/createyourevent/src/main/webapp/app/views/payment/successfull/successfull.component.ts","/home/ceo/mmmm/createyourevent/src/main/webapp/app/views/payment/successfull/successfull.component.html"],"sourcesContent":["import { ReservationTransactionId } from './../../../entities/reservation-transaction-id/reservation-transaction-id.model';\nimport { Component, OnInit } from '@angular/core';\nimport { ActivatedRoute, Router } from '@angular/router';\nimport { IReservation, Reservation } from 'app/entities/reservation/reservation.model';\nimport { ReservationService } from 'app/entities/reservation/service/reservation.service';\nimport { IUser } from 'app/entities/user/user.model';\nimport { GeneralService } from 'app/general.service';\nimport dayjs from 'dayjs';\nimport { TicketService } from 'app/entities/ticket/service/ticket.service';\nimport { Ticket } from 'app/entities/ticket/ticket.model';\n\n@Component({\n  selector: 'jhi-successfull',\n  templateUrl: './successfull.component.html',\n  styleUrls: ['./successfull.component.scss']\n})\nexport class SuccessfullComponent implements OnInit {\n\n  type: string;\n  id: number;\n  datatransTrxId: string;\n  user: IUser;\n  refNo: string;\n  amount: number;\n\n  display = false;\n\n  constructor(\n    private route: ActivatedRoute,\n    private generalService: GeneralService,\n    private reservationService: ReservationService,\n    protected router: Router,\n    private ticketService: TicketService\n  ) { }\n\n  ngOnInit(): void {\n    this.display = true;\n    this.generalService.findWidthAuthorities().subscribe(u => {\n      this.user = u.body;\n      this.route.queryParams.subscribe(params => {\n        this.datatransTrxId = params['datatransTrxId'];\n        this.type = this.route.snapshot.params.type;\n        this.id = this.route.snapshot.params.id;\n        this.refNo = this.route.snapshot.params.refNo;\n        this.amount = this.route.snapshot.params.amount;\n\n        if(this.type === 'event') {\n          const reservation: IReservation = new Reservation();\n          this.generalService.findEventById(this.id).subscribe(e => {\n            reservation.user = this.user;\n            reservation.event = e.body;\n            const tid: ReservationTransactionId = new ReservationTransactionId();\n            tid.transactionDepositId = this.refNo;\n            reservation.transactionId = tid;\n            this.generalService.createReservation(reservation).subscribe(re => {\n              this.reservationService.find(re.body.id).subscribe(r => {\n                const res = r.body;\n                const ticket = new Ticket();\n                ticket.date = dayjs();\n                ticket.amount = 1;\n                ticket.total = e.body.price * 100;\n                ticket.event = res.event;\n                ticket.user = res.user;\n                // ticket.refNo = this.refNo;\n               // this.ticketService.create(ticket).subscribe(t => {\n                res.ticket = ticket;\n                  this.generalService.updateReservation(res).subscribe(() => {\n                    this.router.navigate(['/events/' + this.id + '/view']);\n                    this.display = false;\n                  });\n               // });\n              });\n            });\n          });\n        }else if(this.type === 'ticket') {\n          this.reservationService.find(this.id).subscribe(r => {\n            const res = r.body;\n            res.billed = true;\n            res.date = dayjs(new Date());\n            res.transactionId.transactionId = this.refNo;\n            res.ticket.refNo = this.refNo;\n            this.generalService.updateReservation(res).subscribe(() => {\n              this.router.navigate(['/account/tickets/' + this.id + '/payTicket']);\n              this.display = false;\n            });\n          });\n        }else if(this.type === 'cashbox') {\n          this.generalService.findEventById(this.id).subscribe(e => {\n            const jhie = e.body;\n            jhie.billedOrganisator = true;\n            this.generalService.updateEvent(jhie).subscribe(() => {\n                this.router.navigate(['/organisator/cashbox/' + this.id + '/cashbox']);\n                this.display = false;\n            });\n          });\n        }else if(this.type === 'fee') {\n          this.router.navigate(['/billing'], { queryParams: { txId: this.datatransTrxId, refNo: this.refNo } });\n        }else if(this.type === 'buyTicket') {\n          this.generalService.findWidthAuthorities().subscribe(u => {\n            const user = u.body;\n            this.generalService.findEventById(this.id).subscribe(e => {\n              const jhie = e.body;\n              const ticket = new Ticket();\n              ticket.date = dayjs();\n              ticket.amount = this.amount / (jhie.price * 100);\n              ticket.total = this.amount;\n              ticket.event = jhie;\n              ticket.user = user;\n              ticket.refNo = this.refNo;\n              this.ticketService.create(ticket).subscribe(t => {\n                const res = new Reservation();\n                res.date =  dayjs();\n                res.user = this.user;\n                res.ticket = ticket;\n                res.event = ticket.event;\n                res.billed = true;\n                const tid: ReservationTransactionId = new ReservationTransactionId();\n                tid.transactionId = this.refNo;\n                res.transactionId = tid;\n                this.generalService.createReservation(res).subscribe(() => {\n                   this.router.navigate(['/events/' + jhie.id + '/buy-tickets']);\n                   this.display = false;\n                });\n              });\n\n            });\n          });\n        }\n\n      });\n    });\n  }\n\n}\n","<div class=\"row\">\n  <div class=\"col-md-6\">\n    <p-progressSpinner></p-progressSpinner>\n  </div>\n  <div class=\"col-md-6\">\n    <div class=\"alert alert-success\" role=\"alert\">\n      <span jhiTranslate=\"successfull.success\">Payment submitted successfully. Thanks.</span>\n    </div>\n  </div>\n</div>\n\n<jhi-please-wait-dialog [display]=\"display\"></jhi-please-wait-dialog>\n"]},"metadata":{},"sourceType":"module","externalDependencies":[]}