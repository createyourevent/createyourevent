{"ast":null,"code":"import _asyncToGenerator from \"/home/ceo/mmmm/createyourevent/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";\nimport _defineProperty from \"/home/ceo/mmmm/createyourevent/node_modules/@babel/runtime/helpers/esm/defineProperty.js\";\nimport { EventEmitter } from '@angular/core';\nimport SlotMachine from 'slot-machine-gen';\nimport { timer } from 'rxjs';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"app/general.service\";\nimport * as i2 from \"app/points/points-display/points-display.service\";\nimport * as i3 from \"@angular/common\";\nimport * as i4 from \"@fortawesome/angular-fontawesome\";\nimport * as i5 from \"../../../shared/language/translate.directive\";\nimport * as i6 from \"primeng/button\";\nimport * as i7 from \"@ngx-translate/core\";\nfunction SlotMachineComponent_ng_container_7_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementContainerStart(0);\n    i0.ɵɵtext(1, \"\\n  \");\n    i0.ɵɵelementStart(2, \"div\", 5);\n    i0.ɵɵtext(3, \"\\n    \");\n    i0.ɵɵelement(4, \"img\", 6);\n    i0.ɵɵtext(5, \"\\n  \");\n    i0.ɵɵelementEnd();\n    i0.ɵɵtext(6, \"\\n\");\n    i0.ɵɵelementContainerEnd();\n  }\n}\nfunction SlotMachineComponent_ng_container_9_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementContainerStart(0);\n    i0.ɵɵtext(1, \"\\n  \");\n    i0.ɵɵelement(2, \"div\", 7);\n    i0.ɵɵtext(3, \"\\n\");\n    i0.ɵɵelementContainerEnd();\n  }\n}\nfunction SlotMachineComponent_div_13_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\");\n    i0.ɵɵtext(1, \"\\n    \");\n    i0.ɵɵelementStart(2, \"div\", 8);\n    i0.ɵɵtext(3, \"\\n      \");\n    i0.ɵɵelementStart(4, \"div\", 9);\n    i0.ɵɵtext(5, \"Let's play...\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵtext(6, \"\\n    \");\n    i0.ɵɵelementEnd();\n    i0.ɵɵtext(7, \"\\n  \");\n    i0.ɵɵelementEnd();\n  }\n}\nfunction SlotMachineComponent_div_15_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\");\n    i0.ɵɵtext(1, \"\\n    \");\n    i0.ɵɵelementStart(2, \"div\", 8);\n    i0.ɵɵtext(3, \"\\n      \");\n    i0.ɵɵelementStart(4, \"div\", 10);\n    i0.ɵɵtext(5, \"Lost\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵtext(6, \"\\n    \");\n    i0.ɵɵelementEnd();\n    i0.ɵɵtext(7, \"\\n  \");\n    i0.ɵɵelementEnd();\n  }\n}\nfunction SlotMachineComponent_div_17_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\");\n    i0.ɵɵtext(1, \"\\n    \");\n    i0.ɵɵelementStart(2, \"div\", 8);\n    i0.ɵɵtext(3, \"\\n      \");\n    i0.ɵɵelementStart(4, \"div\", 11);\n    i0.ɵɵtext(5, \"Win\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵtext(6, \"\\n    \");\n    i0.ɵɵelementEnd();\n    i0.ɵɵtext(7, \"\\n  \");\n    i0.ɵɵelementEnd();\n  }\n}\nfunction SlotMachineComponent_ng_container_20_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementContainerStart(0);\n    i0.ɵɵtext(1, \"\\n  \");\n    i0.ɵɵelementStart(2, \"div\", 12);\n    i0.ɵɵtext(3, \"\\n    \");\n    i0.ɵɵelementStart(4, \"div\", 13);\n    i0.ɵɵtext(5, \"\\n      You don't have enough points to play. Visit www.createyourevent.org/points-list to find out how to get more points on Create Your\\n      Event to play.\\n    \");\n    i0.ɵɵelementEnd();\n    i0.ɵɵtext(6, \"\\n  \");\n    i0.ɵɵelementEnd();\n    i0.ɵɵtext(7, \"\\n\");\n    i0.ɵɵelementContainerEnd();\n  }\n}\nfunction SlotMachineComponent_ng_container_22_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r8 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementContainerStart(0);\n    i0.ɵɵtext(1, \"\\n  \");\n    i0.ɵɵelementStart(2, \"div\", 14);\n    i0.ɵɵtext(3, \"\\n    \");\n    i0.ɵɵelementStart(4, \"button\", 15);\n    i0.ɵɵlistener(\"click\", function SlotMachineComponent_ng_container_22_Template_button_click_4_listener() {\n      i0.ɵɵrestoreView(_r8);\n      const ctx_r7 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r7.play());\n    });\n    i0.ɵɵtext(5, \"\\n      \");\n    i0.ɵɵelement(6, \"fa-icon\", 16);\n    i0.ɵɵtext(7, \"\\u00A0\");\n    i0.ɵɵelementStart(8, \"span\");\n    i0.ɵɵtext(9);\n    i0.ɵɵpipe(10, \"uppercase\");\n    i0.ɵɵpipe(11, \"translate\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵtext(12, \"\\n    \");\n    i0.ɵɵelementEnd();\n    i0.ɵɵtext(13, \"\\n  \");\n    i0.ɵɵelementEnd();\n    i0.ɵɵtext(14, \"\\n\");\n    i0.ɵɵelementContainerEnd();\n  }\n  if (rf & 2) {\n    i0.ɵɵadvance(9);\n    i0.ɵɵtextInterpolate(i0.ɵɵpipeBind1(10, 1, i0.ɵɵpipeBind1(11, 3, \"slot-machine.play-game\")));\n  }\n}\nexport class SlotMachineComponent {\n  constructor(generalService, pointsDataService) {\n    _defineProperty(this, \"generalService\", void 0);\n    _defineProperty(this, \"pointsDataService\", void 0);\n    _defineProperty(this, \"clockWin\", new EventEmitter());\n    _defineProperty(this, \"cherryWin\", new EventEmitter());\n    _defineProperty(this, \"orangeWin\", new EventEmitter());\n    _defineProperty(this, \"plumWin\", new EventEmitter());\n    _defineProperty(this, \"reels\", [{\n      imageSrc: '../../../content/images/slot-machine/reel-strip1.png',\n      symbols: [{\n        title: 'cherry',\n        position: 100,\n        weight: 2\n      }, {\n        title: 'plum',\n        position: 300,\n        weight: 6\n      }, {\n        title: 'orange',\n        position: 500,\n        weight: 5\n      }, {\n        title: 'bell',\n        position: 700,\n        weight: 1\n      }, {\n        title: 'cherry',\n        position: 900,\n        weight: 3\n      }, {\n        title: 'plum',\n        position: 1100,\n        weight: 5\n      }]\n    }, {\n      imageSrc: '../../../content/images/slot-machine/reel-strip2.png',\n      symbols: [{\n        title: 'orange',\n        position: 100,\n        weight: 6\n      }, {\n        title: 'plum',\n        position: 300,\n        weight: 5\n      }, {\n        title: 'orange',\n        position: 500,\n        weight: 3\n      }, {\n        title: 'plum',\n        position: 700,\n        weight: 5\n      }, {\n        title: 'cherry',\n        position: 900,\n        weight: 2\n      }, {\n        title: 'bell',\n        position: 1100,\n        weight: 1\n      }]\n    }, {\n      imageSrc: '../../../content/images/slot-machine/reel-strip3.png',\n      symbols: [{\n        title: 'cherry',\n        position: 100,\n        weight: 4\n      }, {\n        title: 'bell',\n        position: 300,\n        weight: 1\n      }, {\n        title: 'orange',\n        position: 500,\n        weight: 6\n      }, {\n        title: 'plum',\n        position: 700,\n        weight: 5\n      }, {\n        title: 'plum',\n        position: 900,\n        weight: 3\n      }, {\n        title: 'cherry',\n        position: 1100,\n        weight: 2\n      }]\n    }]);\n    _defineProperty(this, \"slot\", void 0);\n    _defineProperty(this, \"pointsStart\", void 0);\n    _defineProperty(this, \"user\", void 0);\n    _defineProperty(this, \"enoughtPoints\", false);\n    _defineProperty(this, \"state\", 'new');\n    this.generalService = generalService;\n    this.pointsDataService = pointsDataService;\n  }\n  ngOnInit() {\n    var _this = this;\n    this.generalService.findWidthAuthorities().subscribe(us => {\n      this.user = us.body;\n      this.generalService.findPropertyByKey('slot_machine_start_points').subscribe( /*#__PURE__*/function () {\n        var _ref = _asyncToGenerator(function* (rt) {\n          _this.pointsStart = Number(rt.body.value);\n          if (_this.user.points >= _this.pointsStart) {\n            _this.enoughtPoints = true;\n            while (!document.querySelector('#slot-machine')) {\n              yield new Promise(r => setTimeout(r, 500));\n            }\n            var machine = document.getElementById('slot-machine');\n            _this.slot = new SlotMachine(machine, _this.reels, _this.callback.bind(_this));\n          }\n        });\n        return function (_x) {\n          return _ref.apply(this, arguments);\n        };\n      }());\n    });\n  }\n  callback(payLine) {\n    if (payLine[0].title === payLine[1].title && payLine[0].title === payLine[2].title && payLine[1].title === payLine[2].title) {\n      timer(4500).subscribe(() => {\n        if (payLine[0].title === 'bell') {\n          this.clockWin.emit();\n        }\n        if (payLine[0].title === 'cherry') {\n          this.cherryWin.emit();\n        }\n        if (payLine[0].title === 'orange') {\n          this.orangeWin.emit();\n        }\n        if (payLine[0].title === 'plum') {\n          this.plumWin.emit();\n        }\n        this.state = 'win';\n        this.pointsDataService.changePoint(this.user.points);\n        this.generalService.findWidthAuthorities().subscribe(us => {\n          this.user = us.body;\n          if (this.user.points - this.pointsStart < 0) {\n            this.enoughtPoints = false;\n          }\n        });\n      });\n    } else {\n      timer(4500).subscribe(() => {\n        this.state = 'lost';\n        this.pointsDataService.changePoint(this.user.points);\n        this.generalService.findWidthAuthorities().subscribe(us => {\n          this.user = us.body;\n          if (this.user.points - this.pointsStart < 0) {\n            this.enoughtPoints = false;\n          }\n        });\n      });\n    }\n  }\n  play() {\n    if (this.user.points - this.pointsStart < 0) {\n      this.enoughtPoints = false;\n      return;\n    }\n    this.user.points -= this.pointsStart;\n    this.generalService.updateUserLoggedInAndPoints(this.user.id, this.user.loggedIn, this.user.points).subscribe(() => {\n      this.generalService.updatePointsKeycloak(this.user.points, this.user.id).subscribe(() => {\n        this.state = 'new';\n        this.slot.play();\n      });\n    });\n  }\n}\n_defineProperty(SlotMachineComponent, \"\\u0275fac\", function SlotMachineComponent_Factory(t) {\n  return new (t || SlotMachineComponent)(i0.ɵɵdirectiveInject(i1.GeneralService), i0.ɵɵdirectiveInject(i2.PointsDataService));\n});\n_defineProperty(SlotMachineComponent, \"\\u0275cmp\", /*@__PURE__*/i0.ɵɵdefineComponent({\n  type: SlotMachineComponent,\n  selectors: [[\"jhi-slot-machine\"]],\n  outputs: {\n    clockWin: \"clockWin\",\n    cherryWin: \"cherryWin\",\n    orangeWin: \"orangeWin\",\n    plumWin: \"plumWin\"\n  },\n  decls: 24,\n  vars: 12,\n  consts: [[\"jhiTranslate\", \"slot-machine.one-game-costs\", 1, \"title-points-costs\"], [1, \"points-count\"], [4, \"ngIf\"], [3, \"ngSwitch\"], [4, \"ngSwitchCase\"], [1, \"text-align-center\"], [\"src\", \"../../../../content/images/slot-machine/slotmachine.png\", 1, \"slot-machine\"], [\"id\", \"slot-machine\", 1, \"slot-machine\"], [1, \"status\"], [\"jhiTranslate\", \"slot-machine.lets-play\"], [\"jhiTranslate\", \"slot-machine.lost\"], [\"jhiTranslate\", \"slot-machine.win\"], [1, \"container-not-enought-points\"], [\"jhiTranslate\", \"slot-machine.not-enought-points\", 1, \"box-not-enought-points\"], [1, \"button-slot-machine\"], [\"pButton\", \"\", \"pRipple\", \"\", \"type\", \"button\", 1, \"p-button-rounded\", \"p-button-info\", \"play-button\", 3, \"click\"], [\"icon\", \"gamepad\"]],\n  template: function SlotMachineComponent_Template(rf, ctx) {\n    if (rf & 1) {\n      i0.ɵɵelementStart(0, \"div\", 0);\n      i0.ɵɵtext(1, \"One game will use\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵtext(2, \"\\n\");\n      i0.ɵɵelementStart(3, \"div\", 1);\n      i0.ɵɵtext(4);\n      i0.ɵɵpipe(5, \"translate\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵtext(6, \"\\n\\n\");\n      i0.ɵɵtemplate(7, SlotMachineComponent_ng_container_7_Template, 7, 0, \"ng-container\", 2);\n      i0.ɵɵtext(8, \"\\n\");\n      i0.ɵɵtemplate(9, SlotMachineComponent_ng_container_9_Template, 4, 0, \"ng-container\", 2);\n      i0.ɵɵtext(10, \"\\n\\n\");\n      i0.ɵɵelementContainerStart(11, 3);\n      i0.ɵɵtext(12, \"\\n  \");\n      i0.ɵɵtemplate(13, SlotMachineComponent_div_13_Template, 8, 0, \"div\", 4);\n      i0.ɵɵtext(14, \"\\n\\n  \");\n      i0.ɵɵtemplate(15, SlotMachineComponent_div_15_Template, 8, 0, \"div\", 4);\n      i0.ɵɵtext(16, \"\\n\\n  \");\n      i0.ɵɵtemplate(17, SlotMachineComponent_div_17_Template, 8, 0, \"div\", 4);\n      i0.ɵɵtext(18, \"\\n\");\n      i0.ɵɵelementContainerEnd();\n      i0.ɵɵtext(19, \"\\n\\n\");\n      i0.ɵɵtemplate(20, SlotMachineComponent_ng_container_20_Template, 8, 0, \"ng-container\", 2);\n      i0.ɵɵtext(21, \"\\n\");\n      i0.ɵɵtemplate(22, SlotMachineComponent_ng_container_22_Template, 15, 5, \"ng-container\", 2);\n      i0.ɵɵtext(23, \"\\n\");\n    }\n    if (rf & 2) {\n      i0.ɵɵadvance(4);\n      i0.ɵɵtextInterpolate2(\"\", ctx.pointsStart, \" \", i0.ɵɵpipeBind1(5, 10, \"slot-machine.points\"), \"\");\n      i0.ɵɵadvance(3);\n      i0.ɵɵproperty(\"ngIf\", !ctx.enoughtPoints);\n      i0.ɵɵadvance(2);\n      i0.ɵɵproperty(\"ngIf\", ctx.enoughtPoints);\n      i0.ɵɵadvance(2);\n      i0.ɵɵproperty(\"ngSwitch\", ctx.state);\n      i0.ɵɵadvance(2);\n      i0.ɵɵproperty(\"ngSwitchCase\", \"new\");\n      i0.ɵɵadvance(2);\n      i0.ɵɵproperty(\"ngSwitchCase\", \"lost\");\n      i0.ɵɵadvance(2);\n      i0.ɵɵproperty(\"ngSwitchCase\", \"win\");\n      i0.ɵɵadvance(3);\n      i0.ɵɵproperty(\"ngIf\", !ctx.enoughtPoints);\n      i0.ɵɵadvance(2);\n      i0.ɵɵproperty(\"ngIf\", ctx.enoughtPoints);\n    }\n  },\n  dependencies: [i3.NgIf, i3.NgSwitch, i3.NgSwitchCase, i4.FaIconComponent, i5.TranslateDirective, i6.ButtonDirective, i3.UpperCasePipe, i7.TranslatePipe],\n  styles: [\".slot-machine {\\n  height: 480px;\\n  width: 600px;\\n}\\n.slot-machine .display {\\n  display: flex;\\n  height: inherit;\\n  position: absolute;\\n  transform: translateZ(0);\\n  width: inherit;\\n  z-index: 2;\\n}\\n.slot-machine .display .reel {\\n  background: transparent;\\n  border: 1px solid #999;\\n  border-radius: 10px;\\n  cursor: pointer;\\n  height: calc(100% - 103px);\\n  margin: 47px 10px;\\n  overflow: hidden;\\n  width: 200px;\\n}\\n.slot-machine .display .reel:after {\\n  box-shadow: inset -3em -3em 4em #0C090A;\\n}\\n.slot-machine .display .reel:before {\\n  box-shadow: inset -3em 3em 4em #0C090A;\\n}\\n.slot-machine .display .reel:after, .slot-machine .display .reel:before {\\n  content: \\\"\\\";\\n  display: block;\\n  height: 50%;\\n  width: calc(100% + 100px);\\n}\\n.slot-machine .slots {\\n  height: inherit;\\n  z-index: 1;\\n  --webkit-transform: translate3d(0, 0, 0);\\n}\\n.slot-machine .slots .reel {\\n  display: inline-block;\\n}\\n.slot-machine .slots .reel .strip {\\n  list-style: none;\\n  margin-left: -40px;\\n  transform-style: preserve-3d;\\n}\\n.slot-machine .slots .reel .strip.start {\\n  animation: init 300ms ease-in reverse;\\n}\\n.slot-machine .slots .reel .strip.spin {\\n  animation: spin 600ms linear infinite reverse;\\n}\\n.slot-machine .slots .reel .strip.stop {\\n  animation: init 1000ms ease-out reverse;\\n}\\n.slot-machine .slots .reel .strip li {\\n  font-size: 0;\\n  position: absolute;\\n  text-align: center;\\n  -webkit-backface-visibility: hidden;\\n}\\n\\n/*# sourceMappingURL=slot-machine.css.map */\\n\\n/*# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8uL25vZGVfbW9kdWxlcy9zbG90LW1hY2hpbmUtZ2VuL3NyYy9zbG90LW1hY2hpbmUuc2NzcyIsIndlYnBhY2s6Ly8uL25vZGVfbW9kdWxlcy9zbG90LW1hY2hpbmUtZ2VuL2Rpc3Qvc2xvdC1tYWNoaW5lLmNzcyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQTtFQUNFLGFBQUE7RUFDQSxZQUFBO0FDQ0Y7QURDRTtFQUNFLGFBQUE7RUFDQSxlQUFBO0VBQ0Esa0JBQUE7RUFDQSx3QkFBQTtFQUNBLGNBQUE7RUFDQSxVQUFBO0FDQ0o7QURDSTtFQUNFLHVCQUFBO0VBQ0Esc0JBQUE7RUFDQSxtQkFBQTtFQUNBLGVBQUE7RUFDQSwwQkFBQTtFQUNBLGlCQUFBO0VBQ0EsZ0JBQUE7RUFDQSxZQUFBO0FDQ047QURDTTtFQUNFLHVDQUFBO0FDQ1I7QURFTTtFQUNFLHNDQUFBO0FDQVI7QURHTTtFQUVFLFdBQUE7RUFDQSxjQUFBO0VBQ0EsV0FBQTtFQUNBLHlCQUFBO0FDRlI7QURPRTtFQUNFLGVBQUE7RUFDQSxVQUFBO0VBQ0Esd0NBQUE7QUNMSjtBRE9JO0VBQ0UscUJBQUE7QUNMTjtBRFFNO0VBQ0UsZ0JBQUE7RUFDQSxrQkFBQTtFQUNBLDRCQUFBO0FDTlI7QURRUTtFQUNFLHFDQUFBO0FDTlY7QURTUTtFQUNFLDZDQUFBO0FDUFY7QURVUTtFQUNFLHVDQUFBO0FDUlY7QURXUTtFQUNFLFlBQUE7RUFDQSxrQkFBQTtFQUNBLGtCQUFBO0VBQ0EsbUNBQUE7QUNUVjs7QUFrQ0EsMkNBQTJDIiwic291cmNlUm9vdCI6IiJ9 */#slot-machine {\\n  margin: 0 auto 0 auto;\\n}\\n\\n.text-align-center {\\n  text-align: center;\\n}\\n\\n#play-button {\\n  display: block;\\n  margin: 0 auto;\\n  width: 100px;\\n}\\n\\n.button-slot-machine {\\n  margin: 0 auto;\\n  text-align: center;\\n}\\n\\n.title-points-costs {\\n  text-align: center;\\n  font-family: \\\"Chango\\\", cursive;\\n  color: yellow;\\n  text-shadow: 5px 5px black;\\n  text-align: center;\\n  font-size: xx-large;\\n}\\n\\n.points-count {\\n  width: 240px;\\n  padding: 10px;\\n  z-index: 6;\\n  margin: 40px auto;\\n  border-radius: 5px;\\n  border: 4px solid black;\\n  box-shadow: 5px 5px 15px 5px #ff8080, -9px 5px 15px 5px #ffe488, -7px -5px 15px 5px #8cff85, 12px -5px 15px 5px #80c7ff, 12px 10px 15px 7px #e488ff, -10px 10px 15px 7px #ff616b, -10px -7px 27px 1px #8e5cff, 5px 5px 15px 5px rgba(0, 0, 0, 0);\\n  font-size: xx-large;\\n  color: #ffffff;\\n  background: #333333;\\n  text-shadow: #fff 0px 0px 5px, #fff 0px 0px 10px, #fff 0px 0px 15px, #ff2d95 0px 0px 20px, #ff2d95 0px 0px 30px, #ff2d95 0px 0px 40px, #ff2d95 0px 0px 50px, #ff2d95 0px 0px 75px;\\n  font-family: \\\"Shrikhand\\\", cursive;\\n  text-align: center;\\n}\\n\\n.box-not-enought-points {\\n  background-color: yellow;\\n  font-weight: bold;\\n  color: red;\\n  border: 1px solid black;\\n  border-radius: 5px;\\n  box-shadow: 5px 5px 15px 5px #000000;\\n  margin: 20px;\\n  padding: 10px;\\n  text-align: center;\\n  font-size: larger;\\n}\\n\\n.status {\\n  background-color: yellow;\\n  font-weight: bold;\\n  color: red;\\n  border: 1px solid black;\\n  border-radius: 5px;\\n  box-shadow: 5px 5px 15px 5px #000000;\\n  margin: 20px;\\n  padding: 10px;\\n  text-align: center;\\n  font-size: x-large;\\n}\\n\\n.container-not-enought-points {\\n  margin: 0 auto;\\n}\\n\\n.play-button {\\n  width: 300px;\\n  height: 100px;\\n  text-align: center;\\n  margin: 0 auto;\\n  font-size: xx-large;\\n  font-weight: bold;\\n  padding: 50px;\\n}\\n/*# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8uL3NyYy9tYWluL3dlYmFwcC9hcHAvdmlld3MvZ2FtZXMvc2xvdC1tYWNoaW5lL3Nsb3QtbWFjaGluZS5jb21wb25lbnQuc2NzcyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFFQTtFQUNFLHFCQUFBO0FBQUY7O0FBR0E7RUFDRSxrQkFBQTtBQUFGOztBQUdBO0VBQ0UsY0FBQTtFQUNBLGNBQUE7RUFDQSxZQUFBO0FBQUY7O0FBR0E7RUFDRSxjQUFBO0VBQ0Esa0JBQUE7QUFBRjs7QUFHQTtFQUNFLGtCQUFBO0VBQ0EsOEJBQUE7RUFDQSxhQUFBO0VBQ0EsMEJBQUE7RUFDQSxrQkFBQTtFQUNBLG1CQUFBO0FBQUY7O0FBR0E7RUFDRSxZQUFBO0VBQ0EsYUFBQTtFQUNBLFVBQUE7RUFDQSxpQkFBQTtFQUNBLGtCQUFBO0VBQ0EsdUJBQUE7RUFDQSxnUEFBQTtFQUVBLG1CQUFBO0VBQ0EsY0FBQTtFQUNBLG1CQUFBO0VBQ0EsaUxBQUE7RUFFQSxpQ0FBQTtFQUNBLGtCQUFBO0FBRkY7O0FBS0E7RUFDRSx3QkFBQTtFQUNBLGlCQUFBO0VBQ0EsVUFBQTtFQUNBLHVCQUFBO0VBQ0Esa0JBQUE7RUFFQSxvQ0FBQTtFQUNBLFlBQUE7RUFDQSxhQUFBO0VBQ0Esa0JBQUE7RUFDQSxpQkFBQTtBQUZGOztBQUtBO0VBQ0Usd0JBQUE7RUFDQSxpQkFBQTtFQUNBLFVBQUE7RUFDQSx1QkFBQTtFQUNBLGtCQUFBO0VBRUEsb0NBQUE7RUFDQSxZQUFBO0VBQ0EsYUFBQTtFQUNBLGtCQUFBO0VBQ0Esa0JBQUE7QUFGRjs7QUFLQTtFQUNFLGNBQUE7QUFGRjs7QUFLQTtFQUNFLFlBQUE7RUFDQSxhQUFBO0VBQ0Esa0JBQUE7RUFDQSxjQUFBO0VBQ0EsbUJBQUE7RUFDQSxpQkFBQTtFQUNBLGFBQUE7QUFGRiIsInNvdXJjZXNDb250ZW50IjpbIkBpbXBvcnQgJ35zbG90LW1hY2hpbmUtZ2VuL2Rpc3Qvc2xvdC1tYWNoaW5lLmNzcyc7XG5cbiNzbG90LW1hY2hpbmUge1xuICBtYXJnaW46IDAgYXV0byAwIGF1dG87XG59XG5cbi50ZXh0LWFsaWduLWNlbnRlciB7XG4gIHRleHQtYWxpZ246IGNlbnRlcjtcbn1cblxuI3BsYXktYnV0dG9uIHtcbiAgZGlzcGxheTogYmxvY2s7XG4gIG1hcmdpbjogMCBhdXRvO1xuICB3aWR0aDogMTAwcHg7XG59XG5cbi5idXR0b24tc2xvdC1tYWNoaW5lIHtcbiAgbWFyZ2luOiAwIGF1dG87XG4gIHRleHQtYWxpZ246IGNlbnRlcjtcbn1cblxuLnRpdGxlLXBvaW50cy1jb3N0cyB7XG4gIHRleHQtYWxpZ246IGNlbnRlcjtcbiAgZm9udC1mYW1pbHk6ICdDaGFuZ28nLCBjdXJzaXZlO1xuICBjb2xvcjogeWVsbG93O1xuICB0ZXh0LXNoYWRvdzogNXB4IDVweCBibGFjaztcbiAgdGV4dC1hbGlnbjogY2VudGVyO1xuICBmb250LXNpemU6IHh4LWxhcmdlO1xufVxuXG4ucG9pbnRzLWNvdW50IHtcbiAgd2lkdGg6IDI0MHB4O1xuICBwYWRkaW5nOiAxMHB4O1xuICB6LWluZGV4OiA2O1xuICBtYXJnaW46IDQwcHggYXV0bztcbiAgYm9yZGVyLXJhZGl1czogNXB4O1xuICBib3JkZXI6IDRweCBzb2xpZCBibGFjaztcbiAgYm94LXNoYWRvdzogNXB4IDVweCAxNXB4IDVweCAjZmY4MDgwLCAtOXB4IDVweCAxNXB4IDVweCAjZmZlNDg4LCAtN3B4IC01cHggMTVweCA1cHggIzhjZmY4NSwgMTJweCAtNXB4IDE1cHggNXB4ICM4MGM3ZmYsXG4gICAgMTJweCAxMHB4IDE1cHggN3B4ICNlNDg4ZmYsIC0xMHB4IDEwcHggMTVweCA3cHggI2ZmNjE2YiwgLTEwcHggLTdweCAyN3B4IDFweCAjOGU1Y2ZmLCA1cHggNXB4IDE1cHggNXB4IHJnYigwIDAgMCAvIDAlKTtcbiAgZm9udC1zaXplOiB4eC1sYXJnZTtcbiAgY29sb3I6ICNmZmZmZmY7XG4gIGJhY2tncm91bmQ6ICMzMzMzMzM7XG4gIHRleHQtc2hhZG93OiAjZmZmIDBweCAwcHggNXB4LCAjZmZmIDBweCAwcHggMTBweCwgI2ZmZiAwcHggMHB4IDE1cHgsICNmZjJkOTUgMHB4IDBweCAyMHB4LCAjZmYyZDk1IDBweCAwcHggMzBweCwgI2ZmMmQ5NSAwcHggMHB4IDQwcHgsXG4gICAgI2ZmMmQ5NSAwcHggMHB4IDUwcHgsICNmZjJkOTUgMHB4IDBweCA3NXB4O1xuICBmb250LWZhbWlseTogJ1NocmlraGFuZCcsIGN1cnNpdmU7XG4gIHRleHQtYWxpZ246IGNlbnRlcjtcbn1cblxuLmJveC1ub3QtZW5vdWdodC1wb2ludHMge1xuICBiYWNrZ3JvdW5kLWNvbG9yOiB5ZWxsb3c7XG4gIGZvbnQtd2VpZ2h0OiBib2xkO1xuICBjb2xvcjogcmVkO1xuICBib3JkZXI6IDFweCBzb2xpZCBibGFjaztcbiAgYm9yZGVyLXJhZGl1czogNXB4O1xuICAtd2Via2l0LWJveC1zaGFkb3c6IDVweCA1cHggMTVweCA1cHggIzAwMDAwMDtcbiAgYm94LXNoYWRvdzogNXB4IDVweCAxNXB4IDVweCAjMDAwMDAwO1xuICBtYXJnaW46IDIwcHg7XG4gIHBhZGRpbmc6IDEwcHg7XG4gIHRleHQtYWxpZ246IGNlbnRlcjtcbiAgZm9udC1zaXplOiBsYXJnZXI7XG59XG5cbi5zdGF0dXMge1xuICBiYWNrZ3JvdW5kLWNvbG9yOiB5ZWxsb3c7XG4gIGZvbnQtd2VpZ2h0OiBib2xkO1xuICBjb2xvcjogcmVkO1xuICBib3JkZXI6IDFweCBzb2xpZCBibGFjaztcbiAgYm9yZGVyLXJhZGl1czogNXB4O1xuICAtd2Via2l0LWJveC1zaGFkb3c6IDVweCA1cHggMTVweCA1cHggIzAwMDAwMDtcbiAgYm94LXNoYWRvdzogNXB4IDVweCAxNXB4IDVweCAjMDAwMDAwO1xuICBtYXJnaW46IDIwcHg7XG4gIHBhZGRpbmc6IDEwcHg7XG4gIHRleHQtYWxpZ246IGNlbnRlcjtcbiAgZm9udC1zaXplOiB4LWxhcmdlO1xufVxuXG4uY29udGFpbmVyLW5vdC1lbm91Z2h0LXBvaW50cyB7XG4gIG1hcmdpbjogMCBhdXRvO1xufVxuXG4ucGxheS1idXR0b24ge1xuICB3aWR0aDogMzAwcHg7XG4gIGhlaWdodDogMTAwcHg7XG4gIHRleHQtYWxpZ246IGNlbnRlcjtcbiAgbWFyZ2luOiAwIGF1dG87XG4gIGZvbnQtc2l6ZTogeHgtbGFyZ2U7XG4gIGZvbnQtd2VpZ2h0OiBib2xkO1xuICBwYWRkaW5nOiA1MHB4O1xufVxuIl0sInNvdXJjZVJvb3QiOiIifQ== */\"],\n  encapsulation: 2\n}));","map":{"version":3,"mappings":"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","names":["EventEmitter","SlotMachine","timer","i0","SlotMachineComponent","constructor","generalService","pointsDataService","imageSrc","symbols","title","position","weight","ngOnInit","findWidthAuthorities","subscribe","us","user","body","findPropertyByKey","rt","pointsStart","Number","value","points","enoughtPoints","document","querySelector","Promise","r","setTimeout","machine","getElementById","slot","reels","callback","bind","payLine","clockWin","emit","cherryWin","orangeWin","plumWin","state","changePoint","play","updateUserLoggedInAndPoints","id","loggedIn","updatePointsKeycloak","selectors","outputs","decls","vars","consts","template"],"sourceRoot":"","sources":["/home/ceo/mmmm/createyourevent/src/main/webapp/app/views/games/slot-machine/slot-machine.component.ts","/home/ceo/mmmm/createyourevent/src/main/webapp/app/views/games/slot-machine/slot-machine.component.html"],"sourcesContent":["import {\n  ChangeDetectionStrategy,\n  ChangeDetectorRef,\n  Component,\n  OnInit,\n  ViewEncapsulation,\n  AfterViewInit,\n  AfterViewChecked,\n  Output,\n  EventEmitter,\n} from '@angular/core';\nimport { IUser } from 'app/entities/user/user.model';\nimport { GeneralService } from 'app/general.service';\nimport SlotMachine from 'slot-machine-gen';\nimport { timer } from 'rxjs';\nimport { PointsDataService } from 'app/points/points-display/points-display.service';\n\n@Component({\n  selector: 'jhi-slot-machine',\n  templateUrl: './slot-machine.component.html',\n  styleUrls: ['./slot-machine.component.scss'],\n  encapsulation: ViewEncapsulation.None,\n})\nexport class SlotMachineComponent implements OnInit {\n  @Output() clockWin = new EventEmitter<any>();\n  @Output() cherryWin = new EventEmitter<any>();\n  @Output() orangeWin = new EventEmitter<any>();\n  @Output() plumWin = new EventEmitter<any>();\n\n  reels = [\n    {\n      imageSrc: '../../../content/images/slot-machine/reel-strip1.png',\n      symbols: [\n        {\n          title: 'cherry',\n          position: 100,\n          weight: 2,\n        },\n        {\n          title: 'plum',\n          position: 300,\n          weight: 6,\n        },\n        {\n          title: 'orange',\n          position: 500,\n          weight: 5,\n        },\n        {\n          title: 'bell',\n          position: 700,\n          weight: 1,\n        },\n        {\n          title: 'cherry',\n          position: 900,\n          weight: 3,\n        },\n        {\n          title: 'plum',\n          position: 1100,\n          weight: 5,\n        },\n      ],\n    },\n    {\n      imageSrc: '../../../content/images/slot-machine/reel-strip2.png',\n      symbols: [\n        {\n          title: 'orange',\n          position: 100,\n          weight: 6,\n        },\n        {\n          title: 'plum',\n          position: 300,\n          weight: 5,\n        },\n        {\n          title: 'orange',\n          position: 500,\n          weight: 3,\n        },\n        {\n          title: 'plum',\n          position: 700,\n          weight: 5,\n        },\n        {\n          title: 'cherry',\n          position: 900,\n          weight: 2,\n        },\n        {\n          title: 'bell',\n          position: 1100,\n          weight: 1,\n        },\n      ],\n    },\n    {\n      imageSrc: '../../../content/images/slot-machine/reel-strip3.png',\n      symbols: [\n        {\n          title: 'cherry',\n          position: 100,\n          weight: 4,\n        },\n        {\n          title: 'bell',\n          position: 300,\n          weight: 1,\n        },\n        {\n          title: 'orange',\n          position: 500,\n          weight: 6,\n        },\n        {\n          title: 'plum',\n          position: 700,\n          weight: 5,\n        },\n        {\n          title: 'plum',\n          position: 900,\n          weight: 3,\n        },\n        {\n          title: 'cherry',\n          position: 1100,\n          weight: 2,\n        },\n      ],\n    },\n  ];\n\n  slot: any;\n  pointsStart: number;\n  user: IUser;\n  enoughtPoints = false;\n  state = 'new';\n\n  constructor(private generalService: GeneralService, private pointsDataService: PointsDataService) {}\n\n  ngOnInit() {\n    this.generalService.findWidthAuthorities().subscribe(us => {\n      this.user = us.body!;\n      this.generalService.findPropertyByKey('slot_machine_start_points').subscribe(async rt => {\n        this.pointsStart = Number(rt.body.value);\n        if (this.user.points >= this.pointsStart) {\n          this.enoughtPoints = true;\n          while (!document.querySelector('#slot-machine')) {\n            await new Promise(r => setTimeout(r, 500));\n          }\n          var machine = document.getElementById('slot-machine');\n          this.slot = new SlotMachine(machine, this.reels, this.callback.bind(this));\n        }\n      });\n    });\n  }\n\n  callback(payLine: any): void {\n    if (payLine[0].title === payLine[1].title && payLine[0].title === payLine[2].title && payLine[1].title === payLine[2].title) {\n      timer(4500).subscribe(() => {\n        if (payLine[0].title === 'bell') {\n          this.clockWin.emit();\n        }\n        if (payLine[0].title === 'cherry') {\n          this.cherryWin.emit();\n        }\n        if (payLine[0].title === 'orange') {\n          this.orangeWin.emit();\n        }\n        if (payLine[0].title === 'plum') {\n          this.plumWin.emit();\n        }\n        this.state = 'win';\n        this.pointsDataService.changePoint(this.user.points);\n        this.generalService.findWidthAuthorities().subscribe(us => {\n          this.user = us.body!;\n          if (this.user.points - this.pointsStart < 0) {\n            this.enoughtPoints = false;\n          }\n        });\n      });\n    } else {\n      timer(4500).subscribe(() => {\n        this.state = 'lost';\n        this.pointsDataService.changePoint(this.user.points);\n        this.generalService.findWidthAuthorities().subscribe(us => {\n          this.user = us.body!;\n          if (this.user.points - this.pointsStart < 0) {\n            this.enoughtPoints = false;\n          }\n        });\n      });\n    }\n  }\n\n  play(): void {\n    if (this.user.points - this.pointsStart < 0) {\n      this.enoughtPoints = false;\n      return;\n    }\n    this.user.points -= this.pointsStart;\n    this.generalService.updateUserLoggedInAndPoints(this.user.id, this.user.loggedIn, this.user.points).subscribe(() => {\n      this.generalService.updatePointsKeycloak(this.user.points, this.user.id).subscribe(() => {\n        this.state = 'new';\n        this.slot.play();\n      });\n    });\n  }\n}\n","<div class=\"title-points-costs\" jhiTranslate=\"slot-machine.one-game-costs\">One game will use</div>\n<div class=\"points-count\">{{ pointsStart }} {{ 'slot-machine.points' | translate }}</div>\n\n<ng-container *ngIf=\"!enoughtPoints\">\n  <div class=\"text-align-center\">\n    <img class=\"slot-machine\" src=\"../../../../content/images/slot-machine/slotmachine.png\" />\n  </div>\n</ng-container>\n<ng-container *ngIf=\"enoughtPoints\">\n  <div id=\"slot-machine\" class=\"slot-machine\"></div>\n</ng-container>\n\n<ng-container [ngSwitch]=\"state\">\n  <div *ngSwitchCase=\"'new'\">\n    <div class=\"status\">\n      <div jhiTranslate=\"slot-machine.lets-play\">Let's play...</div>\n    </div>\n  </div>\n\n  <div *ngSwitchCase=\"'lost'\">\n    <div class=\"status\">\n      <div jhiTranslate=\"slot-machine.lost\">Lost</div>\n    </div>\n  </div>\n\n  <div *ngSwitchCase=\"'win'\">\n    <div class=\"status\">\n      <div jhiTranslate=\"slot-machine.win\">Win</div>\n    </div>\n  </div>\n</ng-container>\n\n<ng-container *ngIf=\"!enoughtPoints\">\n  <div class=\"container-not-enought-points\">\n    <div class=\"box-not-enought-points\" jhiTranslate=\"slot-machine.not-enought-points\">\n      You don't have enough points to play. Visit www.createyourevent.org/points-list to find out how to get more points on Create Your\n      Event to play.\n    </div>\n  </div>\n</ng-container>\n<ng-container *ngIf=\"enoughtPoints\">\n  <div class=\"button-slot-machine\">\n    <button (click)=\"play()\" pButton pRipple type=\"button\" class=\"p-button-rounded p-button-info play-button\">\n      <fa-icon icon=\"gamepad\"></fa-icon>&nbsp;<span>{{ 'slot-machine.play-game' | translate | uppercase }}</span>\n    </button>\n  </div>\n</ng-container>\n"]},"metadata":{},"sourceType":"module","externalDependencies":[]}