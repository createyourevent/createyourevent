{"ast":null,"code":"import { useEffect } from 'react';\nimport PropTypes from 'prop-types';\nconst getUrl = production => production ? 'https://pay.datatrans.com/upp/payment/js/datatrans-2.0.0.min.js' : 'https://pay.sandbox.datatrans.com/upp/payment/js/datatrans-2.0.0.min.js';\nconst startPayment = props => {\n  window.Datatrans.startPayment({\n    production: props.production,\n    transactionId: props.transactionId,\n    loaded: props.onLoaded,\n    opened: props.onOpened,\n    closed: props.onCancelled,\n    error: props.onError\n  });\n};\nconst cleanupLightbox = () => {\n  if (window.Datatrans) {\n    try {\n      window.Datatrans.close();\n    } catch (err) {} // eslint-disable-line no-empty\n  }\n};\n\nconst Lightbox = props => {\n  useEffect(() => {\n    const {\n      production\n    } = props;\n    const scriptSource = getUrl(production);\n    if (document.querySelector('script[src=\"' + scriptSource + '\"]')) {\n      startPayment(props);\n      return cleanupLightbox;\n    }\n    const script = document.createElement('script');\n    script.src = scriptSource;\n    script.onload = () => {\n      startPayment(props);\n    };\n    document.body.appendChild(script);\n    return cleanupLightbox;\n  }, []);\n  return null;\n};\nexport default Lightbox;\nLightbox.propTypes = {\n  transactionId: PropTypes.string.isRequired,\n  production: PropTypes.bool,\n  onLoaded: PropTypes.func,\n  onOpened: PropTypes.func,\n  onCancelled: PropTypes.func,\n  onError: PropTypes.func\n};\nLightbox.defaultProps = {\n  onLoaded() {},\n  onOpened() {},\n  onCancelled() {},\n  onError() {},\n  production: false\n};","map":{"version":3,"names":["useEffect","PropTypes","getUrl","production","startPayment","props","window","Datatrans","transactionId","loaded","onLoaded","opened","onOpened","closed","onCancelled","error","onError","cleanupLightbox","close","err","Lightbox","scriptSource","document","querySelector","script","createElement","src","onload","body","appendChild","propTypes","string","isRequired","bool","func","defaultProps"],"sources":["/home/ceo/mmmm/createyourevent/src/main/webapp/content/scripts/Lightbox.js"],"sourcesContent":["  import { useEffect } from 'react'\n  import PropTypes from 'prop-types'\n\nconst getUrl = (production) => production\n  ? 'https://pay.datatrans.com/upp/payment/js/datatrans-2.0.0.min.js'\n  : 'https://pay.sandbox.datatrans.com/upp/payment/js/datatrans-2.0.0.min.js'\n\nconst startPayment = (props) => {\n  window.Datatrans.startPayment({\n    production: props.production,\n    transactionId: props.transactionId,\n    loaded: props.onLoaded,\n    opened: props.onOpened,\n    closed: props.onCancelled,\n    error: props.onError\n  })\n}\n\nconst cleanupLightbox = () => {\n  if (window.Datatrans) {\n    try {\n      window.Datatrans.close()\n    } catch (err) {} // eslint-disable-line no-empty\n  }\n}\n\nconst Lightbox = (props) => {\n  useEffect(() => {\n    const { production } = props\n    const scriptSource = getUrl(production)\n\n    if (document.querySelector('script[src=\"' + scriptSource + '\"]')) {\n      startPayment(props)\n\n      return cleanupLightbox\n    }\n\n    const script = document.createElement('script')\n    script.src = scriptSource\n    script.onload = () => {\n      startPayment(props)\n    }\n\n    document.body.appendChild(script)\n\n    return cleanupLightbox\n  }, [])\n\n  return null\n}\n\nexport default Lightbox\n\nLightbox.propTypes = {\n  transactionId: PropTypes.string.isRequired,\n  production: PropTypes.bool,\n\n  onLoaded: PropTypes.func,\n  onOpened: PropTypes.func,\n  onCancelled: PropTypes.func,\n  onError: PropTypes.func\n}\n\nLightbox.defaultProps = {\n  onLoaded() {},\n  onOpened() {},\n  onCancelled() {},\n  onError() {},\n  production: false\n}\n"],"mappings":"AAAE,SAASA,SAAS,QAAQ,OAAO;AACjC,OAAOC,SAAS,MAAM,YAAY;AAEpC,MAAMC,MAAM,GAAIC,UAAU,IAAKA,UAAU,GACrC,iEAAiE,GACjE,yEAAyE;AAE7E,MAAMC,YAAY,GAAIC,KAAK,IAAK;EAC9BC,MAAM,CAACC,SAAS,CAACH,YAAY,CAAC;IAC5BD,UAAU,EAAEE,KAAK,CAACF,UAAU;IAC5BK,aAAa,EAAEH,KAAK,CAACG,aAAa;IAClCC,MAAM,EAAEJ,KAAK,CAACK,QAAQ;IACtBC,MAAM,EAAEN,KAAK,CAACO,QAAQ;IACtBC,MAAM,EAAER,KAAK,CAACS,WAAW;IACzBC,KAAK,EAAEV,KAAK,CAACW;EACf,CAAC,CAAC;AACJ,CAAC;AAED,MAAMC,eAAe,GAAG,MAAM;EAC5B,IAAIX,MAAM,CAACC,SAAS,EAAE;IACpB,IAAI;MACFD,MAAM,CAACC,SAAS,CAACW,KAAK,EAAE;IAC1B,CAAC,CAAC,OAAOC,GAAG,EAAE,CAAC,CAAC,CAAC;EACnB;AACF,CAAC;;AAED,MAAMC,QAAQ,GAAIf,KAAK,IAAK;EAC1BL,SAAS,CAAC,MAAM;IACd,MAAM;MAAEG;IAAW,CAAC,GAAGE,KAAK;IAC5B,MAAMgB,YAAY,GAAGnB,MAAM,CAACC,UAAU,CAAC;IAEvC,IAAImB,QAAQ,CAACC,aAAa,CAAC,cAAc,GAAGF,YAAY,GAAG,IAAI,CAAC,EAAE;MAChEjB,YAAY,CAACC,KAAK,CAAC;MAEnB,OAAOY,eAAe;IACxB;IAEA,MAAMO,MAAM,GAAGF,QAAQ,CAACG,aAAa,CAAC,QAAQ,CAAC;IAC/CD,MAAM,CAACE,GAAG,GAAGL,YAAY;IACzBG,MAAM,CAACG,MAAM,GAAG,MAAM;MACpBvB,YAAY,CAACC,KAAK,CAAC;IACrB,CAAC;IAEDiB,QAAQ,CAACM,IAAI,CAACC,WAAW,CAACL,MAAM,CAAC;IAEjC,OAAOP,eAAe;EACxB,CAAC,EAAE,EAAE,CAAC;EAEN,OAAO,IAAI;AACb,CAAC;AAED,eAAeG,QAAQ;AAEvBA,QAAQ,CAACU,SAAS,GAAG;EACnBtB,aAAa,EAAEP,SAAS,CAAC8B,MAAM,CAACC,UAAU;EAC1C7B,UAAU,EAAEF,SAAS,CAACgC,IAAI;EAE1BvB,QAAQ,EAAET,SAAS,CAACiC,IAAI;EACxBtB,QAAQ,EAAEX,SAAS,CAACiC,IAAI;EACxBpB,WAAW,EAAEb,SAAS,CAACiC,IAAI;EAC3BlB,OAAO,EAAEf,SAAS,CAACiC;AACrB,CAAC;AAEDd,QAAQ,CAACe,YAAY,GAAG;EACtBzB,QAAQ,GAAG,CAAC,CAAC;EACbE,QAAQ,GAAG,CAAC,CAAC;EACbE,WAAW,GAAG,CAAC,CAAC;EAChBE,OAAO,GAAG,CAAC,CAAC;EACZb,UAAU,EAAE;AACd,CAAC"},"metadata":{},"sourceType":"module","externalDependencies":[]}