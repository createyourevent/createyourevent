{"ast":null,"code":"import { MessageService } from 'primeng/api';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"primeng/api\";\nimport * as i2 from \"app/general.service\";\nimport * as i3 from \"@ngx-translate/core\";\nimport * as i4 from \"@angular/common\";\nimport * as i5 from \"@fortawesome/angular-fontawesome\";\nimport * as i6 from \"../../../shared/language/translate.directive\";\nimport * as i7 from \"primeng/fileupload\";\nimport * as i8 from \"primeng/toast\";\nimport * as i9 from \"ngx-audio-player\";\nfunction Mp3PlayerAdminComponent_ng_template_6_ul_1_li_2_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"li\");\n    i0.ɵɵtext(1);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const file_r4 = ctx.$implicit;\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate2(\"\", file_r4.name, \" - \", file_r4.size, \" bytes\");\n  }\n}\nfunction Mp3PlayerAdminComponent_ng_template_6_ul_1_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"ul\");\n    i0.ɵɵtext(1, \"\\n                    \");\n    i0.ɵɵtemplate(2, Mp3PlayerAdminComponent_ng_template_6_ul_1_li_2_Template, 2, 2, \"li\", 3);\n    i0.ɵɵtext(3, \"\\n                \");\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const ctx_r2 = i0.ɵɵnextContext(2);\n    i0.ɵɵadvance(2);\n    i0.ɵɵproperty(\"ngForOf\", ctx_r2.uploadedFiles);\n  }\n}\nfunction Mp3PlayerAdminComponent_ng_template_6_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵtext(0, \"\\n                \");\n    i0.ɵɵtemplate(1, Mp3PlayerAdminComponent_ng_template_6_ul_1_Template, 4, 1, \"ul\", 5);\n    i0.ɵɵtext(2, \"\\n            \");\n  }\n  if (rf & 2) {\n    const ctx_r0 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", ctx_r0.uploadedFiles.length);\n  }\n}\nfunction Mp3PlayerAdminComponent_ng_container_11_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r7 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementContainerStart(0);\n    i0.ɵɵtext(1, \"\\n      \");\n    i0.ɵɵelementStart(2, \"div\", 6);\n    i0.ɵɵtext(3, \"\\n        \");\n    i0.ɵɵelementStart(4, \"div\", 7);\n    i0.ɵɵtext(5, \"\\n          \");\n    i0.ɵɵelementStart(6, \"div\", 6);\n    i0.ɵɵtext(7, \"\\n            \");\n    i0.ɵɵelementStart(8, \"div\", 8);\n    i0.ɵɵtext(9, \"\\n              \");\n    i0.ɵɵelementStart(10, \"span\", 9);\n    i0.ɵɵtext(11, \"Artist: \");\n    i0.ɵɵelementEnd();\n    i0.ɵɵtext(12, \"\\n            \");\n    i0.ɵɵelementEnd();\n    i0.ɵɵtext(13, \"\\n          \");\n    i0.ɵɵelementEnd();\n    i0.ɵɵtext(14, \"\\n          \");\n    i0.ɵɵelementStart(15, \"div\", 6);\n    i0.ɵɵtext(16, \"\\n            \");\n    i0.ɵɵelementStart(17, \"div\", 10);\n    i0.ɵɵtext(18);\n    i0.ɵɵelementEnd();\n    i0.ɵɵtext(19, \"\\n          \");\n    i0.ɵɵelementEnd();\n    i0.ɵɵtext(20, \"\\n        \");\n    i0.ɵɵelementEnd();\n    i0.ɵɵtext(21, \"\\n        \");\n    i0.ɵɵelementStart(22, \"div\", 7);\n    i0.ɵɵtext(23, \"\\n          \");\n    i0.ɵɵelementStart(24, \"div\", 6);\n    i0.ɵɵtext(25, \"\\n            \");\n    i0.ɵɵelementStart(26, \"div\", 8);\n    i0.ɵɵtext(27, \"\\n              \");\n    i0.ɵɵelementStart(28, \"span\", 11);\n    i0.ɵɵtext(29, \"Title: \");\n    i0.ɵɵelementEnd();\n    i0.ɵɵtext(30, \"\\n            \");\n    i0.ɵɵelementEnd();\n    i0.ɵɵtext(31, \"\\n          \");\n    i0.ɵɵelementEnd();\n    i0.ɵɵtext(32, \"\\n          \");\n    i0.ɵɵelementStart(33, \"div\", 6);\n    i0.ɵɵtext(34, \"\\n            \");\n    i0.ɵɵelementStart(35, \"div\", 10);\n    i0.ɵɵtext(36);\n    i0.ɵɵelementEnd();\n    i0.ɵɵtext(37, \"\\n          \");\n    i0.ɵɵelementEnd();\n    i0.ɵɵtext(38, \"\\n        \");\n    i0.ɵɵelementEnd();\n    i0.ɵɵtext(39, \"\\n        \");\n    i0.ɵɵelementStart(40, \"div\", 7);\n    i0.ɵɵtext(41, \"\\n          \");\n    i0.ɵɵelementStart(42, \"button\", 12);\n    i0.ɵɵlistener(\"click\", function Mp3PlayerAdminComponent_ng_container_11_Template_button_click_42_listener() {\n      const restoredCtx = i0.ɵɵrestoreView(_r7);\n      const mp3_r5 = restoredCtx.$implicit;\n      const ctx_r6 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r6.deleteMp3(mp3_r5.id, ctx_r6.shop, ctx_r6.product, ctx_r6.jhiEvent, ctx_r6.service));\n    });\n    i0.ɵɵtext(43, \"\\n            \");\n    i0.ɵɵelement(44, \"fa-icon\", 13);\n    i0.ɵɵtext(45, \"\\n            \");\n    i0.ɵɵelementStart(46, \"span\", 14);\n    i0.ɵɵtext(47, \"Delete\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵtext(48, \"\\n        \");\n    i0.ɵɵelementEnd();\n    i0.ɵɵtext(49, \"\\n        \");\n    i0.ɵɵelementEnd();\n    i0.ɵɵtext(50, \"\\n      \");\n    i0.ɵɵelementEnd();\n    i0.ɵɵtext(51, \"\\n    \");\n    i0.ɵɵelementContainerEnd();\n  }\n  if (rf & 2) {\n    const mp3_r5 = ctx.$implicit;\n    i0.ɵɵadvance(18);\n    i0.ɵɵtextInterpolate1(\"\\n              \", mp3_r5.artists, \"\\n            \");\n    i0.ɵɵadvance(18);\n    i0.ɵɵtextInterpolate1(\"\\n              \", mp3_r5.title, \"\\n            \");\n  }\n}\nexport let Mp3PlayerAdminComponent = /*#__PURE__*/(() => {\n  class Mp3PlayerAdminComponent {\n    constructor(messageService, generalService, translate) {\n      this.messageService = messageService;\n      this.generalService = generalService;\n      this.translate = translate;\n      this.msaapDisplayTitle = true;\n      this.msaapDisplayPlayList = true;\n      this.msaapPageSizeOptions = [2, 4, 6];\n      this.msaapDisplayVolumeControls = true;\n      this.msaapDisplayRepeatControls = true;\n      this.msaapDisplayArtist = false;\n      this.msaapDisplayDuration = false;\n      this.msaapDisablePositionSlider = true;\n      this.pageSizeOptions = 10;\n      this.msaapPlaylist = [];\n      this.uploadedFiles = [];\n      this.mp3s = [];\n    }\n    ngOnChanges(changes) {\n      if (changes['user'] !== undefined) {\n        this.user = changes['user'].currentValue;\n      }\n      if (changes['service'] !== undefined) {\n        this.service = changes['service'].currentValue;\n      }\n      if (this.user && this.service) {\n        this.loadData();\n      }\n      if (changes['product'] !== undefined) {\n        this.product = changes['product'].currentValue;\n      }\n      if (this.user && this.product) {\n        this.loadData();\n      }\n      if (changes['shop'] !== undefined) {\n        this.shop = changes['shop'].currentValue;\n      }\n      if (this.user && this.shop) {\n        this.loadData();\n      }\n      if (changes['event'] !== undefined) {\n        this.jhiEvent = changes['event'].currentValue;\n      }\n      if (this.user && this.jhiEvent) {\n        this.loadData();\n      }\n    }\n    ngOnInit() {\n      if (this.user && this.service) {\n        this.loadData();\n      }\n    }\n    loadData() {\n      if (this.service !== undefined) {\n        this.generalService.findMp3ByServiceIdAndUserId(this.service.id, this.user.id).subscribe(m => {\n          this.mp3s = m.body;\n          this.loadMP3List();\n        });\n      }\n      if (this.jhiEvent !== undefined) {\n        this.generalService.findMp3ByEventIdAndUserId(this.jhiEvent.id, this.user.id).subscribe(m => {\n          this.mp3s = m.body;\n          this.loadMP3List();\n        });\n      }\n      if (this.shop !== undefined) {\n        this.generalService.findMp3ByShopIdAndUserId(this.shop.id, this.user.id).subscribe(m => {\n          this.mp3s = m.body;\n          this.loadMP3List();\n        });\n      }\n      if (this.product !== undefined) {\n        this.generalService.findMp3ByProductIdAndUserId(this.product.id, this.user.id).subscribe(m => {\n          this.mp3s = m.body;\n          this.loadMP3List();\n        });\n      }\n    }\n    loadMP3List() {\n      this.msaapPlaylist = [];\n      this.mp3s.forEach(ele => {\n        this.msaapPlaylist.push({\n          title: ele.title,\n          link: ele.url,\n          artist: ele.artists,\n          duration: ele.duration\n        });\n      });\n      this.msaapPlaylist = this.msaapPlaylist.slice();\n    }\n    onUpload(event) {\n      for (let file of event.files) {\n        this.uploadedFiles.push(file);\n        this.uploadedFiles = this.uploadedFiles.slice();\n      }\n      this.loadData();\n      this.messageService.add({\n        severity: 'info',\n        summary: 'File Uploaded',\n        detail: ''\n      });\n    }\n    deleteMp3(musicId, shop, product, jhiEvent, service) {\n      /*\n      let suffix = '';\n           if(service !== undefined) {\n        suffix = '_service';\n      }\n      if(jhiEvent !== undefined) {\n        suffix = '_event';\n      }\n      if(shop !== undefined) {\n        suffix = '_shop';\n      }\n      if(product !== undefined) {\n        suffix = '_product';\n      }\n      */\n      this.generalService.deleteMP3(musicId).subscribe(() => {\n        this.loadData();\n      });\n    }\n    onEnded(e) {}\n  }\n  Mp3PlayerAdminComponent.ɵfac = function Mp3PlayerAdminComponent_Factory(t) {\n    return new (t || Mp3PlayerAdminComponent)(i0.ɵɵdirectiveInject(i1.MessageService), i0.ɵɵdirectiveInject(i2.GeneralService), i0.ɵɵdirectiveInject(i3.TranslateService));\n  };\n  Mp3PlayerAdminComponent.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n    type: Mp3PlayerAdminComponent,\n    selectors: [[\"jhi-mp3-player-admin\"]],\n    inputs: {\n      user: \"user\",\n      service: \"service\",\n      shop: \"shop\",\n      product: \"product\",\n      jhiEvent: \"jhiEvent\",\n      url: \"url\"\n    },\n    features: [i0.ɵɵProvidersFeature([MessageService]), i0.ɵɵNgOnChangesFeature],\n    decls: 17,\n    vars: 13,\n    consts: [[1, \"card\"], [\"name\", \"files[]\", \"multiple\", \"multiple\", \"accept\", \"audio/*\", \"maxFileSize\", \"15000000\", \"fileLimit\", \"3\", 3, \"url\", \"onUpload\"], [\"pTemplate\", \"content\"], [4, \"ngFor\", \"ngForOf\"], [\"muted\", \"muted\", 3, \"playlist\", \"displayTitle\", \"autoPlay\", \"displayPlaylist\", \"pageSizeOptions\", \"displayVolumeControls\", \"displayRepeatControls\", \"disablePositionSlider\", \"displayArtist\", \"displayDuration\", \"expanded\", \"trackEnded\"], [4, \"ngIf\"], [1, \"row\"], [1, \"col-md-4\"], [1, \"col-md-12\", \"bold\"], [\"jhiTranslate\", \"mp3-player-admin.artist\"], [1, \"col-md-12\"], [\"jhiTranslate\", \"mp3-player-admin.title\"], [1, \"btn\", \"btn-danger\", \"btn-sm\", 3, \"click\"], [\"icon\", \"times\"], [\"jhiTranslate\", \"entity.action.delete\", 1, \"d-none\", \"d-md-inline\"]],\n    template: function Mp3PlayerAdminComponent_Template(rf, ctx) {\n      if (rf & 1) {\n        i0.ɵɵelement(0, \"p-toast\");\n        i0.ɵɵtext(1, \"\\n\\n\");\n        i0.ɵɵelementStart(2, \"div\", 0);\n        i0.ɵɵtext(3, \"\\n    \");\n        i0.ɵɵelementStart(4, \"p-fileUpload\", 1);\n        i0.ɵɵlistener(\"onUpload\", function Mp3PlayerAdminComponent_Template_p_fileUpload_onUpload_4_listener($event) {\n          return ctx.onUpload($event);\n        });\n        i0.ɵɵtext(5, \"\\n            \");\n        i0.ɵɵtemplate(6, Mp3PlayerAdminComponent_ng_template_6_Template, 3, 1, \"ng-template\", 2);\n        i0.ɵɵtext(7, \"\\n          \");\n        i0.ɵɵelementEnd();\n        i0.ɵɵtext(8, \"\\n    \");\n        i0.ɵɵelement(9, \"hr\");\n        i0.ɵɵtext(10, \"\\n    \");\n        i0.ɵɵtemplate(11, Mp3PlayerAdminComponent_ng_container_11_Template, 52, 2, \"ng-container\", 3);\n        i0.ɵɵtext(12, \"\\n    \");\n        i0.ɵɵelement(13, \"hr\");\n        i0.ɵɵtext(14, \"\\n\\n    \");\n        i0.ɵɵelementStart(15, \"ngx-audio-player\", 4);\n        i0.ɵɵlistener(\"trackEnded\", function Mp3PlayerAdminComponent_Template_ngx_audio_player_trackEnded_15_listener($event) {\n          return ctx.onEnded($event);\n        });\n        i0.ɵɵelementEnd();\n        i0.ɵɵtext(16, \"\\n\");\n        i0.ɵɵelementEnd();\n      }\n      if (rf & 2) {\n        i0.ɵɵadvance(4);\n        i0.ɵɵproperty(\"url\", ctx.url);\n        i0.ɵɵadvance(7);\n        i0.ɵɵproperty(\"ngForOf\", ctx.mp3s);\n        i0.ɵɵadvance(4);\n        i0.ɵɵproperty(\"playlist\", ctx.msaapPlaylist)(\"displayTitle\", ctx.msaapDisplayTitle)(\"autoPlay\", false)(\"displayPlaylist\", ctx.msaapDisplayPlayList)(\"pageSizeOptions\", ctx.pageSizeOptions)(\"displayVolumeControls\", ctx.msaapDisplayVolumeControls)(\"displayRepeatControls\", ctx.msaapDisplayRepeatControls)(\"disablePositionSlider\", ctx.msaapDisablePositionSlider)(\"displayArtist\", ctx.msaapDisplayArtist)(\"displayDuration\", ctx.msaapDisplayDuration)(\"expanded\", true);\n      }\n    },\n    dependencies: [i4.NgForOf, i4.NgIf, i5.FaIconComponent, i6.TranslateDirective, i7.FileUpload, i1.PrimeTemplate, i8.Toast, i9.AudioPlayerComponent],\n    styles: [\".bold[_ngcontent-%COMP%]{font-weight:700}\"]\n  });\n  return Mp3PlayerAdminComponent;\n})();","map":null,"metadata":{},"sourceType":"module","externalDependencies":[]}