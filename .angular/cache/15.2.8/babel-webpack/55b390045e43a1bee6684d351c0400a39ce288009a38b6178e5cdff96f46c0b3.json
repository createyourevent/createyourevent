{"ast":null,"code":"import _asyncToGenerator from \"/home/ceo/mmmm/createyourevent/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";\nimport { SlotListCherry } from 'app/entities/slot-list-cherry/slot-list-cherry.model';\nimport { SlotListClock } from 'app/entities/slot-list-clock/slot-list-clock.model';\nimport { SlotListOrange } from 'app/entities/slot-list-orange/slot-list-orange.model';\nimport { SlotListPlum } from 'app/entities/slot-list-plum/slot-list-plum.model';\nimport { forkJoin } from 'rxjs';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"app/general.service\";\nimport * as i2 from \"app/entities/property/service/property.service\";\nimport * as i3 from \"app/entities/coupon/service/coupon.service\";\nimport * as i4 from \"app/entities/slot-list-clock/service/slot-list-clock.service\";\nimport * as i5 from \"app/entities/slot-list-cherry/service/slot-list-cherry.service\";\nimport * as i6 from \"app/entities/slot-list-orange/service/slot-list-orange.service\";\nimport * as i7 from \"app/entities/slot-list-plum/service/slot-list-plum.service\";\nimport * as i8 from \"primeng/api\";\nimport * as i9 from \"primeng/inputnumber\";\nimport * as i10 from \"@angular/forms\";\nimport * as i11 from \"primeng/picklist\";\nfunction AdminSlotMachineComponent_ng_template_27_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵtext(0, \"\\n    \");\n    i0.ɵɵelementStart(1, \"div\");\n    i0.ɵɵtext(2);\n    i0.ɵɵelementEnd();\n    i0.ɵɵtext(3, \"\\n  \");\n  }\n  if (rf & 2) {\n    const coupon_r4 = ctx.$implicit;\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate1(\"\\n      \", coupon_r4.title, \"\\n    \");\n  }\n}\nfunction AdminSlotMachineComponent_ng_template_35_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵtext(0, \"\\n    \");\n    i0.ɵɵelementStart(1, \"div\");\n    i0.ɵɵtext(2);\n    i0.ɵɵelementEnd();\n    i0.ɵɵtext(3, \"\\n  \");\n  }\n  if (rf & 2) {\n    const coupon_r5 = ctx.$implicit;\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate1(\"\\n      \", coupon_r5.title, \"\\n    \");\n  }\n}\nfunction AdminSlotMachineComponent_ng_template_43_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵtext(0, \"\\n    \");\n    i0.ɵɵelementStart(1, \"div\");\n    i0.ɵɵtext(2);\n    i0.ɵɵelementEnd();\n    i0.ɵɵtext(3, \"\\n  \");\n  }\n  if (rf & 2) {\n    const coupon_r6 = ctx.$implicit;\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate1(\"\\n      \", coupon_r6.title, \"\\n    \");\n  }\n}\nfunction AdminSlotMachineComponent_ng_template_51_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵtext(0, \"\\n    \");\n    i0.ɵɵelementStart(1, \"div\");\n    i0.ɵɵtext(2);\n    i0.ɵɵelementEnd();\n    i0.ɵɵtext(3, \"\\n  \");\n  }\n  if (rf & 2) {\n    const coupon_r7 = ctx.$implicit;\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate1(\"\\n      \", coupon_r7.title, \"\\n    \");\n  }\n}\nexport let AdminSlotMachineComponent = /*#__PURE__*/(() => {\n  class AdminSlotMachineComponent {\n    constructor(generalService, propertyService, couponService, cd, slotListClockService, slotListCherryService, slotListOrangeService, slotListPlumService) {\n      this.generalService = generalService;\n      this.propertyService = propertyService;\n      this.couponService = couponService;\n      this.cd = cd;\n      this.slotListClockService = slotListClockService;\n      this.slotListCherryService = slotListCherryService;\n      this.slotListOrangeService = slotListOrangeService;\n      this.slotListPlumService = slotListPlumService;\n      this.coupons = [];\n      this.clockList = [];\n      this.cherryList = [];\n      this.orangeList = [];\n      this.plumList = [];\n    }\n    ngOnInit() {\n      var _this = this;\n      this.generalService.findPropertyByKey('slot_machine_start_points').subscribe( /*#__PURE__*/function () {\n        var _ref = _asyncToGenerator(function* (rt) {\n          _this.slotmachinePoints = Number(rt.body.value);\n          _this.cd.markForCheck();\n          _this.cd.detectChanges();\n        });\n        return function (_x) {\n          return _ref.apply(this, arguments);\n        };\n      }());\n      this.couponService.query().subscribe(res => {\n        this.coupons = res.body;\n        forkJoin({\n          requestOne: this.loadCloack(),\n          requestTwo: this.loadCherry(),\n          requestThree: this.loadOrange(),\n          requestFour: this.loadPlum()\n        }).subscribe(({\n          requestOne,\n          requestTwo,\n          requestThree,\n          requestFour\n        }) => {\n          requestOne;\n          requestTwo;\n          requestThree;\n          requestFour;\n          this.coupons = this.coupons.filter(o1 => !this.cherryList.some(o2 => o1.id === o2.id));\n          this.coupons = this.coupons.filter(o1 => !this.orangeList.some(o2 => o1.id === o2.id));\n          this.coupons = this.coupons.filter(o1 => !this.plumList.some(o2 => o1.id === o2.id));\n          this.coupons = this.coupons.filter(o1 => !this.clockList.some(o2 => o1.id === o2.id));\n          this.cd.markForCheck();\n          this.cd.detectChanges();\n        });\n      });\n    }\n    loadCloack() {\n      return new Promise((resolve, reject) => {\n        this.slotListClockService.query().subscribe(res => {\n          const slc = res.body;\n          if (slc === null || slc.length === 0 || slc[0].coupons === '') {\n            resolve([]);\n          }\n          let coupons = slc[0].coupons.split(',');\n          coupons = coupons.slice(0, -1);\n          const couponsId = [];\n          coupons.forEach(el => {\n            couponsId.push(Number(el));\n          });\n          this.clockList = this.coupons.filter(o1 => couponsId.find(o2 => o1.id === o2));\n          resolve(this.clockList);\n        });\n      });\n    }\n    loadOrange() {\n      return new Promise((resolve, reject) => {\n        this.slotListOrangeService.query().subscribe(res => {\n          const slc = res.body;\n          if (slc === null || slc.length === 0 || slc[0].coupons === '') {\n            resolve([]);\n          }\n          let coupons = slc[0].coupons.split(',');\n          coupons = coupons.slice(0, -1);\n          const couponsId = [];\n          coupons.forEach(el => {\n            couponsId.push(Number(el));\n          });\n          this.orangeList = this.coupons.filter(o1 => couponsId.find(o2 => o1.id === o2));\n          resolve(this.orangeList);\n        });\n      });\n    }\n    loadCherry() {\n      return new Promise((resolve, reject) => {\n        this.slotListCherryService.query().subscribe(res => {\n          const slc = res.body;\n          if (slc === null || slc.length === 0 || slc[0].coupons === '') {\n            resolve([]);\n          }\n          let coupons = slc[0].coupons.split(',');\n          coupons = coupons.slice(0, -1);\n          const couponsId = [];\n          coupons.forEach(el => {\n            couponsId.push(Number(el));\n          });\n          this.cherryList = this.coupons.filter(o1 => couponsId.find(o2 => o1.id === o2));\n          resolve(this.cherryList);\n        });\n      });\n    }\n    loadPlum() {\n      return new Promise((resolve, reject) => {\n        this.slotListPlumService.query().subscribe(res => {\n          const slc = res.body;\n          if (slc === null || slc.length === 0 || slc[0].coupons === '') {\n            resolve([]);\n          }\n          let coupons = slc[0].coupons.split(',');\n          coupons = coupons.slice(0, -1);\n          const couponsId = [];\n          coupons.forEach(el => {\n            couponsId.push(Number(el));\n          });\n          this.plumList = this.coupons.filter(o1 => couponsId.find(o2 => o1.id === o2));\n          resolve(this.plumList);\n        });\n      });\n    }\n    savePointsToPlay() {\n      var _this2 = this;\n      this.generalService.findPropertyByKey('slot_machine_start_points').subscribe( /*#__PURE__*/function () {\n        var _ref2 = _asyncToGenerator(function* (rt) {\n          const prop = rt.body;\n          prop.value = _this2.slotmachinePoints + '';\n          _this2.propertyService.update(prop).subscribe();\n        });\n        return function (_x2) {\n          return _ref2.apply(this, arguments);\n        };\n      }());\n    }\n    moveItem(e) {\n      this.coupons = [...this.coupons];\n      this.cd.markForCheck();\n      this.cd.detectChanges();\n    }\n    saveLists() {\n      const slotListClock = new SlotListClock();\n      const slotListCherry = new SlotListCherry();\n      const slotListOrange = new SlotListOrange();\n      const slotListPlum = new SlotListPlum();\n      let clock = '';\n      this.clockList.forEach(el => {\n        clock = clock + el.id + ',';\n      });\n      slotListClock.coupons = clock;\n      let cherry = '';\n      this.cherryList.forEach(el => {\n        cherry = cherry + el.id + ',';\n      });\n      slotListCherry.coupons = cherry;\n      let orange = '';\n      this.orangeList.forEach(el => {\n        orange = orange + el.id + ',';\n      });\n      slotListOrange.coupons = orange;\n      let plum = '';\n      this.plumList.forEach(el => {\n        plum = plum + el.id + ',';\n      });\n      slotListPlum.coupons = plum;\n      this.generalService.deleteAllSlotListClock().subscribe(() => {\n        this.slotListClockService.create(slotListClock).subscribe();\n      });\n      this.generalService.deleteAllSlotListCherry().subscribe(() => {\n        this.slotListCherryService.create(slotListCherry).subscribe();\n      });\n      this.generalService.deleteAllSlotListOrange().subscribe(() => {\n        this.slotListOrangeService.create(slotListOrange).subscribe();\n      });\n      this.generalService.deleteAllSlotListPlum().subscribe(() => {\n        this.slotListPlumService.create(slotListPlum).subscribe();\n      });\n    }\n  }\n  AdminSlotMachineComponent.ɵfac = function AdminSlotMachineComponent_Factory(t) {\n    return new (t || AdminSlotMachineComponent)(i0.ɵɵdirectiveInject(i1.GeneralService), i0.ɵɵdirectiveInject(i2.PropertyService), i0.ɵɵdirectiveInject(i3.CouponService), i0.ɵɵdirectiveInject(i0.ChangeDetectorRef), i0.ɵɵdirectiveInject(i4.SlotListClockService), i0.ɵɵdirectiveInject(i5.SlotListCherryService), i0.ɵɵdirectiveInject(i6.SlotListOrangeService), i0.ɵɵdirectiveInject(i7.SlotListPlumService));\n  };\n  AdminSlotMachineComponent.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n    type: AdminSlotMachineComponent,\n    selectors: [[\"jhi-admin-slot-machine\"]],\n    decls: 57,\n    vars: 9,\n    consts: [[1, \"formgrid\", \"grid\"], [1, \"field\", \"col\"], [\"for\", \"points\"], [\"id\", \"points\", 3, \"ngModel\", \"ngModelChange\"], [\"type\", \"button\", \"id\", \"cancel-save\", \"data-cy\", \"entityCreateCancelButton\", 1, \"btn\", \"btn-secondary\", 3, \"click\"], [3, \"source\", \"target\", \"onMoveToTarget\", \"onMoveToSource\"], [\"pTemplate\", \"item\"]],\n    template: function AdminSlotMachineComponent_Template(rf, ctx) {\n      if (rf & 1) {\n        i0.ɵɵelementStart(0, \"h1\");\n        i0.ɵɵtext(1, \"Slot Machine\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵtext(2, \"\\n\\n\");\n        i0.ɵɵelementStart(3, \"div\", 0);\n        i0.ɵɵtext(4, \"\\n  \");\n        i0.ɵɵelementStart(5, \"div\", 1);\n        i0.ɵɵtext(6, \"\\n    \");\n        i0.ɵɵelementStart(7, \"label\", 2);\n        i0.ɵɵtext(8, \"Points to play\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵtext(9, \"\\n    \");\n        i0.ɵɵelementStart(10, \"p-inputNumber\", 3);\n        i0.ɵɵlistener(\"ngModelChange\", function AdminSlotMachineComponent_Template_p_inputNumber_ngModelChange_10_listener($event) {\n          return ctx.slotmachinePoints = $event;\n        });\n        i0.ɵɵelementEnd();\n        i0.ɵɵtext(11, \"\\n  \");\n        i0.ɵɵelementEnd();\n        i0.ɵɵtext(12, \"\\n\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵtext(13, \"\\n\");\n        i0.ɵɵelementStart(14, \"button\", 4);\n        i0.ɵɵlistener(\"click\", function AdminSlotMachineComponent_Template_button_click_14_listener() {\n          return ctx.savePointsToPlay();\n        });\n        i0.ɵɵtext(15, \"\\n  Save\\n\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵtext(16, \"\\n\\n\");\n        i0.ɵɵelement(17, \"hr\");\n        i0.ɵɵtext(18, \"\\n\\n\");\n        i0.ɵɵelementStart(19, \"h2\");\n        i0.ɵɵtext(20, \"Winnings\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵtext(21, \"\\n\\n\");\n        i0.ɵɵelementStart(22, \"h3\");\n        i0.ɵɵtext(23, \"Clock List\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵtext(24, \"\\n\");\n        i0.ɵɵelementStart(25, \"p-pickList\", 5);\n        i0.ɵɵlistener(\"onMoveToTarget\", function AdminSlotMachineComponent_Template_p_pickList_onMoveToTarget_25_listener($event) {\n          return ctx.moveItem($event);\n        })(\"onMoveToSource\", function AdminSlotMachineComponent_Template_p_pickList_onMoveToSource_25_listener($event) {\n          return ctx.moveItem($event);\n        });\n        i0.ɵɵtext(26, \"\\n  \");\n        i0.ɵɵtemplate(27, AdminSlotMachineComponent_ng_template_27_Template, 4, 1, \"ng-template\", 6);\n        i0.ɵɵtext(28, \"\\n\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵtext(29, \"\\n\\n\");\n        i0.ɵɵelementStart(30, \"h3\");\n        i0.ɵɵtext(31, \"Cherry List\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵtext(32, \"\\n\");\n        i0.ɵɵelementStart(33, \"p-pickList\", 5);\n        i0.ɵɵlistener(\"onMoveToTarget\", function AdminSlotMachineComponent_Template_p_pickList_onMoveToTarget_33_listener($event) {\n          return ctx.moveItem($event);\n        })(\"onMoveToSource\", function AdminSlotMachineComponent_Template_p_pickList_onMoveToSource_33_listener($event) {\n          return ctx.moveItem($event);\n        });\n        i0.ɵɵtext(34, \"\\n  \");\n        i0.ɵɵtemplate(35, AdminSlotMachineComponent_ng_template_35_Template, 4, 1, \"ng-template\", 6);\n        i0.ɵɵtext(36, \"\\n\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵtext(37, \"\\n\\n\");\n        i0.ɵɵelementStart(38, \"h3\");\n        i0.ɵɵtext(39, \"Orange List\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵtext(40, \"\\n\");\n        i0.ɵɵelementStart(41, \"p-pickList\", 5);\n        i0.ɵɵlistener(\"onMoveToTarget\", function AdminSlotMachineComponent_Template_p_pickList_onMoveToTarget_41_listener($event) {\n          return ctx.moveItem($event);\n        })(\"onMoveToSource\", function AdminSlotMachineComponent_Template_p_pickList_onMoveToSource_41_listener($event) {\n          return ctx.moveItem($event);\n        });\n        i0.ɵɵtext(42, \"\\n  \");\n        i0.ɵɵtemplate(43, AdminSlotMachineComponent_ng_template_43_Template, 4, 1, \"ng-template\", 6);\n        i0.ɵɵtext(44, \"\\n\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵtext(45, \"\\n\\n\");\n        i0.ɵɵelementStart(46, \"h3\");\n        i0.ɵɵtext(47, \"Plum List\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵtext(48, \"\\n\");\n        i0.ɵɵelementStart(49, \"p-pickList\", 5);\n        i0.ɵɵlistener(\"onMoveToTarget\", function AdminSlotMachineComponent_Template_p_pickList_onMoveToTarget_49_listener($event) {\n          return ctx.moveItem($event);\n        })(\"onMoveToSource\", function AdminSlotMachineComponent_Template_p_pickList_onMoveToSource_49_listener($event) {\n          return ctx.moveItem($event);\n        });\n        i0.ɵɵtext(50, \"\\n  \");\n        i0.ɵɵtemplate(51, AdminSlotMachineComponent_ng_template_51_Template, 4, 1, \"ng-template\", 6);\n        i0.ɵɵtext(52, \"\\n\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵtext(53, \"\\n\\n\");\n        i0.ɵɵelementStart(54, \"button\", 4);\n        i0.ɵɵlistener(\"click\", function AdminSlotMachineComponent_Template_button_click_54_listener() {\n          return ctx.saveLists();\n        });\n        i0.ɵɵtext(55, \"Save\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵtext(56, \"\\n\");\n      }\n      if (rf & 2) {\n        i0.ɵɵadvance(10);\n        i0.ɵɵproperty(\"ngModel\", ctx.slotmachinePoints);\n        i0.ɵɵadvance(15);\n        i0.ɵɵproperty(\"source\", ctx.coupons)(\"target\", ctx.clockList);\n        i0.ɵɵadvance(8);\n        i0.ɵɵproperty(\"source\", ctx.coupons)(\"target\", ctx.cherryList);\n        i0.ɵɵadvance(8);\n        i0.ɵɵproperty(\"source\", ctx.coupons)(\"target\", ctx.orangeList);\n        i0.ɵɵadvance(8);\n        i0.ɵɵproperty(\"source\", ctx.coupons)(\"target\", ctx.plumList);\n      }\n    },\n    dependencies: [i8.PrimeTemplate, i9.InputNumber, i10.NgControlStatus, i10.NgModel, i11.PickList],\n    changeDetection: 0\n  });\n  return AdminSlotMachineComponent;\n})();","map":null,"metadata":{},"sourceType":"module","externalDependencies":[]}