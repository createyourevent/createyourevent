{"ast":null,"code":"import * as i0 from \"@angular/core\";\nimport * as i1 from \"app/general.service\";\nimport * as i2 from \"app/google-geocode.service\";\nimport * as i3 from \"@angular/forms\";\nimport * as i4 from \"../../shared/language/translate.directive\";\nimport * as i5 from \"../../views/boxes/shop_slider/shop__slider.component\";\nimport * as i6 from \"primeng/knob\";\nexport class DistanceShopComponent {\n  constructor(generalService, googleGeocoderService) {\n    this.generalService = generalService;\n    this.googleGeocoderService = googleGeocoderService;\n    this.shopsWithDistance = [];\n    this.distance = 0;\n  }\n  ngOnInit() {\n    this.generalService.findWidthAuthorities().subscribe(u => {\n      this.user = u.body;\n    });\n  }\n  changeSliderRadius(e) {\n    console.log(e);\n    this.shopsWithDistance = [];\n    let latUser = 0;\n    let lngUser = 0;\n    let posUser;\n    const queryParam = this.user.address.replace(' ', '+');\n    this.googleGeocoderService.getFromAddress(queryParam).subscribe(res => {\n      const geocoder = res.body['results'];\n      const geometry = geocoder[0].geometry;\n      latUser = geometry.location.lat;\n      lngUser = geometry.location.lng;\n      posUser = new google.maps.LatLng(latUser, lngUser);\n      this.generalService.findShopByActiveTrueAndActiveOwnerTrue().subscribe(shops => {\n        this.allShops = shops.body;\n        let latShop = 0;\n        let lngShop = 0;\n        let posShop;\n        this.allShops.forEach(element => {\n          const queryParamShop = element.address.replace(' ', '+');\n          this.googleGeocoderService.getFromAddress(queryParamShop).subscribe(resShop => {\n            const geocoderShop = resShop.body['results'];\n            const geometryShop = geocoderShop[0].geometry;\n            latShop = geometryShop.location.lat;\n            lngShop = geometryShop.location.lng;\n            posShop = new google.maps.LatLng(latShop, lngShop);\n            const distance = google.maps.geometry.spherical.computeDistanceBetween(posUser, posShop);\n            const maxDistance = this.distance * 1000;\n            if (maxDistance > distance) {\n              this.shopsWithDistance.push(element);\n            }\n          });\n        });\n      });\n    });\n  }\n}\nDistanceShopComponent.ɵfac = function DistanceShopComponent_Factory(t) {\n  return new (t || DistanceShopComponent)(i0.ɵɵdirectiveInject(i1.GeneralService), i0.ɵɵdirectiveInject(i2.GoogleGeocodeService));\n};\nDistanceShopComponent.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n  type: DistanceShopComponent,\n  selectors: [[\"jhi-distance-shop\"]],\n  decls: 29,\n  vars: 8,\n  consts: [[1, \"container-fluid\"], [1, \"row\"], [1, \"col-md-4\"], [\"jhiTranslate\", \"distance.distance\"], [1, \"slider\", 3, \"ngModel\", \"step\", \"ngModelChange\", \"onChange\"], [1, \"col-md-12\"], [\"orientation\", \"horizontal\", \"verticalViewPortHeight\", \"600\", 3, \"numVisible\", \"numScroll\", \"circular\", \"autoplayInterval\", \"shops\"]],\n  template: function DistanceShopComponent_Template(rf, ctx) {\n    if (rf & 1) {\n      i0.ɵɵelementStart(0, \"div\", 0);\n      i0.ɵɵtext(1, \"\\n\\t\");\n      i0.ɵɵelementStart(2, \"div\", 1);\n      i0.ɵɵtext(3, \"\\n\\t\\t\");\n      i0.ɵɵelementStart(4, \"div\", 2);\n      i0.ɵɵtext(5, \"\\n\\t\\t\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵtext(6, \"\\n\\t\\t\");\n      i0.ɵɵelementStart(7, \"div\", 2);\n      i0.ɵɵtext(8, \"\\n            \");\n      i0.ɵɵelementStart(9, \"h5\");\n      i0.ɵɵelement(10, \"span\", 3);\n      i0.ɵɵtext(11);\n      i0.ɵɵelementEnd();\n      i0.ɵɵtext(12, \"\\n            \");\n      i0.ɵɵelementStart(13, \"p-knob\", 4);\n      i0.ɵɵlistener(\"ngModelChange\", function DistanceShopComponent_Template_p_knob_ngModelChange_13_listener($event) {\n        return ctx.distance = $event;\n      })(\"onChange\", function DistanceShopComponent_Template_p_knob_onChange_13_listener($event) {\n        return ctx.changeSliderRadius($event);\n      });\n      i0.ɵɵelementEnd();\n      i0.ɵɵtext(14, \"\\n        \");\n      i0.ɵɵelementEnd();\n      i0.ɵɵtext(15, \"\\n        \");\n      i0.ɵɵelementStart(16, \"div\", 2);\n      i0.ɵɵtext(17, \"\\n\\t\\t\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵtext(18, \"\\n\\t\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵtext(19, \"\\n\\t\");\n      i0.ɵɵelementStart(20, \"div\", 1);\n      i0.ɵɵtext(21, \"\\n\\t\\t\");\n      i0.ɵɵelementStart(22, \"div\", 5);\n      i0.ɵɵtext(23, \"\\n            \");\n      i0.ɵɵelement(24, \"jhi-shop-slider\", 6);\n      i0.ɵɵtext(25, \"\\n\\t\\t\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵtext(26, \"\\n\\t\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵtext(27, \"\\n\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵtext(28, \"\\n\\n\\n\\n\\n\\n\");\n    }\n    if (rf & 2) {\n      i0.ɵɵadvance(11);\n      i0.ɵɵtextInterpolate1(\"\", ctx.distance, \" Km\");\n      i0.ɵɵadvance(2);\n      i0.ɵɵproperty(\"ngModel\", ctx.distance)(\"step\", 5);\n      i0.ɵɵadvance(11);\n      i0.ɵɵproperty(\"numVisible\", 2)(\"numScroll\", 1)(\"circular\", true)(\"autoplayInterval\", 3000)(\"shops\", ctx.shopsWithDistance);\n    }\n  },\n  dependencies: [i3.NgControlStatus, i3.NgModel, i4.TranslateDirective, i5.ShopSliderComponent, i6.Knob],\n  styles: [\".slider[_ngcontent-%COMP%] {\\n  width: 250px;\\n  margin: 25px;\\n}\\n/*# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8uL3NyYy9tYWluL3dlYmFwcC9hcHAvbWFwL2Rpc3RhbmNlLXNob3AvZGlzdGFuY2Utc2hvcC5jb21wb25lbnQuc2NzcyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQTtFQUNFLFlBQUE7RUFDQSxZQUFBO0FBQ0YiLCJzb3VyY2VzQ29udGVudCI6WyIuc2xpZGVyIHtcbiAgd2lkdGg6IDI1MHB4O1xuICBtYXJnaW46IDI1cHg7XG59XG4iXSwic291cmNlUm9vdCI6IiJ9 */\"]\n});","map":{"version":3,"mappings":"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","names":["DistanceShopComponent","constructor","generalService","googleGeocoderService","ngOnInit","findWidthAuthorities","subscribe","u","user","body","changeSliderRadius","e","console","log","shopsWithDistance","latUser","lngUser","posUser","queryParam","address","replace","getFromAddress","res","geocoder","geometry","location","lat","lng","google","maps","LatLng","findShopByActiveTrueAndActiveOwnerTrue","shops","allShops","latShop","lngShop","posShop","forEach","element","queryParamShop","resShop","geocoderShop","geometryShop","distance","spherical","computeDistanceBetween","maxDistance","push","selectors","decls","vars","consts","template","i0","ctx"],"sourceRoot":"","sources":["/home/ceo/mmmm/createyourevent/src/main/webapp/app/map/distance-shop/distance-shop.component.ts","/home/ceo/mmmm/createyourevent/src/main/webapp/app/map/distance-shop/distance-shop.component.html"],"sourcesContent":["import { Component, OnInit } from \"@angular/core\";\nimport { IShop } from \"app/entities/shop/shop.model\";\nimport { IUser } from \"app/entities/user/user.model\";\nimport { GeneralService } from \"app/general.service\";\nimport { GoogleGeocodeService } from \"app/google-geocode.service\";\n\n\n@Component({\n  selector: 'jhi-distance-shop',\n  templateUrl: './distance-shop.component.html',\n  styleUrls: ['distance-shop.component.scss']\n})\nexport class DistanceShopComponent implements OnInit {\n  user!: IUser;\n  allShops!: IShop[];\n  shopsWithDistance: IShop[] = [];\n  distance = 0;\n\n  constructor(private generalService: GeneralService, private googleGeocoderService: GoogleGeocodeService) {}\n\n  ngOnInit(): void {\n    this.generalService.findWidthAuthorities().subscribe(u => {\n      this.user = u.body!;\n    });\n  }\n\n  changeSliderRadius(e: any): void {\n    console.log(e);\n    this.shopsWithDistance = [];\n    let latUser = 0;\n    let lngUser = 0;\n    let posUser: google.maps.LatLng;\n    const queryParam = this.user.address!.replace(' ', '+');\n    this.googleGeocoderService.getFromAddress(queryParam).subscribe((res: any) => {\n      const geocoder = res.body!['results'];\n      const geometry = geocoder[0].geometry;\n      latUser = geometry.location.lat;\n      lngUser = geometry.location.lng;\n      posUser = new google.maps.LatLng(latUser, lngUser);\n\n      this.generalService.findShopByActiveTrueAndActiveOwnerTrue().subscribe(shops => {\n        this.allShops = shops.body!;\n        let latShop = 0;\n        let lngShop = 0;\n        let posShop: google.maps.LatLng;\n        this.allShops.forEach(element => {\n          const queryParamShop = element.address!.replace(' ', '+');\n          this.googleGeocoderService.getFromAddress(queryParamShop).subscribe((resShop: any) => {\n            const geocoderShop = resShop.body!['results'];\n            const geometryShop = geocoderShop[0].geometry;\n            latShop = geometryShop.location.lat;\n            lngShop = geometryShop.location.lng;\n            posShop = new google.maps.LatLng(latShop, lngShop);\n\n            const distance = google.maps.geometry.spherical.computeDistanceBetween(posUser, posShop);\n            const maxDistance = this.distance * 1000;\n            if (maxDistance > distance) {\n              this.shopsWithDistance.push(element);\n            }\n          });\n        });\n      });\n    });\n  }\n}\n","<div class=\"container-fluid\">\n\t<div class=\"row\">\n\t\t<div class=\"col-md-4\">\n\t\t</div>\n\t\t<div class=\"col-md-4\">\n            <h5><span jhiTranslate=\"distance.distance\"></span>{{ distance }} Km</h5>\n            <p-knob [(ngModel)]=\"distance\" [step]=\"5\" (onChange)=\"changeSliderRadius($event)\" class=\"slider\"></p-knob>\n        </div>\n        <div class=\"col-md-4\">\n\t\t</div>\n\t</div>\n\t<div class=\"row\">\n\t\t<div class=\"col-md-12\">\n            <jhi-shop-slider orientation=\"horizontal\" [numVisible]=\"2\" [numScroll]=\"1\" [circular]=\"true\" verticalViewPortHeight=\"600\" [autoplayInterval]=\"3000\" [shops]=\"shopsWithDistance\"></jhi-shop-slider>\n\t\t</div>\n\t</div>\n</div>\n\n\n\n\n\n"]},"metadata":{},"sourceType":"module","externalDependencies":[]}